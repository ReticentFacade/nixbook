import{S as t}from"./B3DQGssQ.js";class e{static#t=.25;static#e=1;#n=void 0;get sharedHighlightClassName(){return this.#n}#o=void 0;#i=void 0;buttonPopOutAnimation=null;highlightFlashAnimation=null;constructor(e,n=t.newRandomID(),o=t.newRandomID()){this.#i=e,this.#n=n,this.#o=o}init(){let e=this.#i.querySelector(`style#${this.#o}`);e&&this.#i.head.removeChild(e),e=this.#i.createElement("style"),e.id=this.#o,this.#i.head.appendChild(e);const n=t.newRandomID(),o=t.newRandomID(),i=t.newRandomID();this.buttonPopOutAnimation=`375ms ease-out ${o}`,this.highlightFlashAnimation=`250ms 6 alternate 300ms ${i}`;const s=[`.${this.sharedHighlightClassName} .ssh-close {\n        position: absolute;\n        left: -9px;\n        top: -9px;\n        width: 18px;\n        height: 18px;\n        z-index: 999;\n        border: 0;\n        background: url(${chrome.runtime.getURL("/static/images/material_icons/cancel_18dp.svg")});\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-color: transparent;\n        background-origin: border-box;\n        outline: none;\n        box-shadow: none;\n        animation-duration: 275ms;\n        animation-timing-function: ease-out;\n    \n        animation-name: ${n}\n      }`,`.${this.sharedHighlightClassName} .ssh-close:hover,\n\t\t\t .${this.sharedHighlightClassName} .ssh-close:focus\n      {\n        background-image: url(${chrome.runtime.getURL("/static/images/material_icons/cancel_hover_18dp.svg")});\n\t\t\t}`,`@media print { \n\t\t\t\t.${this.sharedHighlightClassName} { \t\t\t\t\t-webkit-print-color-adjust: exact !important;           box-shadow: unset !important; \t\t\t\t} \t\t\t}`,`@keyframes ${n} {\n\t\t\t\tfrom {           opacity: 0.7;           transform: scale(0.6);         }\n    \n        to {           opacity: 1;           transform: scale(1);         }\t\n\t\t\t}`,`@keyframes ${o} {\n\t\t\t\tto {           opacity: 0;           filter: blur(4px);         }\n\t\t\t}`,`@keyframes ${i} {\n        to {           opacity: 0;\n        }\n\t\t\t}`];return e.innerText=s.join("\n"),this}static#s(){return""}static formatCSSRule(t,n=!1,o){const i=Object.assign({},t.style),s=n?" !important":"";let r=[["italic","italic"]].filter((([e])=>t[e])).map((([,t])=>t));r.length>0&&(i["font-style"]=`${r.join(" ")}${s}`),r=[["bold","bold"]].filter((([e])=>t[e])).map((([,t])=>t)),r.length>0&&(i["font-weight"]=`${r.join(" ")}${s}`),r=[["underline","underline"],["strikethrough","line-through"]].filter((([e])=>t[e])).map((([,t])=>t)),r.length>0&&(i["text-decoration"]=`${r.join(" ")}${s}`),t.monospace&&(i["font-family"]=`monospace${s}`);const l=t.scale??1;isNaN(l)||1==l||(i["font-size"]=`${100*l}%${s}`),r=[["drop_shadow","drop-shadow(rgba(0,0,0, 0.3) 0.2em 0.2em 0.1em)"],["invert","invert(1)"],["blur",()=>`blur(${e.#t*t.blur}em)`]].filter((([e])=>t[e])).map((([,t])=>"string"==typeof t?t:t())),r.length>0&&(i.filter=`${r.join(" ")}${s}`),t.no_user_select&&(i[`${e.#s()}user-select`]=`none${s}`);let a,c=t.inherit_style_background_color;if(!c){const t=new RegExp("^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})","ig").exec(i["background-color"]);!t||t.length<4?c=!0:a=`rgba(${[t[1],t[2],t[3],e.#e].map((t=>"string"==typeof t?parseInt(t,16):t)).join(", ")})`}let h="--highlight-bg-color";c||(i[h]=a),i["background-color"]=`${c?"inherit":`var(${h})`}${s}`,!t.blockquote&&o?.highlightBoxShadowEnabled&&(i["box-shadow"]=`0 0 0.35em 0.2em ${c?"inherit":`var(${h})`}${s}`);const m=Boolean(t.inherit_style_color);return!m&&t.text_color_equals_background?i.color=i["background-color"]:(m&&(i.color="inherit"),i.color&&(i.color+=s)),t.blockquote&&(i.display=`flow-root${s}`,i["margin-block-start"]=`1em${s}`,i["margin-block-end"]=`1em${s}`,i["margin-inline-start"]=`40px${s}`,i["margin-inline-end"]=`40px${s}`,i.padding=`1em${s}`,i["border-left"]=`0.4em solid${s}`,i.color&&(i["border-left-color"]=i.color)),`.${t.className}\n      ${JSON.stringify(i,null,"\t").replace(/"/g,"").replace(/,\n/g,";").replace(/\}/g,";}")}`}setRule(t,n=!1,o){const i=e.formatCSSRule(t,n,o),s=this.deleteRule(t.className);this.insertRule(i,s)}insertRule(t,e=-1){const n=this.#i.getElementById(this.#o).sheet;n.insertRule(t,-1===e?n.cssRules.length:e)}deleteRule(t){const e=this.#i.querySelector(`#${this.#o}`).sheet,n=`.${t}`;for(let t=0;t<e.cssRules.length;t++){const o=e.cssRules[t];if(o.type===CSSRule.STYLE_RULE&&o.selectorText===n)return e.deleteRule(t),t}return-1}textualizeStyleElement(){const t=this.#i.getElementById(this.#o);if(!t)return"";const e=t.sheet,n=Array.from(e.cssRules).map((({cssText:t})=>t)).join("\n");return t.textContent=n,n}}export{e as S};

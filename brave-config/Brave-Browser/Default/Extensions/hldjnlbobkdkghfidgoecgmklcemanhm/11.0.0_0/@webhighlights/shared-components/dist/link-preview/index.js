(()=>{var i={22331:(i,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>l});var n=e(36758),o=e.n(n),r=e(40935),a=e.n(r)()(o());a.push([i.id,'.wh-loading-skeleton{color:rgba(0,0,0,0);opacity:.8;animation:1.25s linear 0s infinite normal none running loadingBlinking}@keyframes loadingBlinking{0%{background:rgba(140,140,140,.15)}70%{background:rgba(67,79,86,.15)}100%{background:rgba(112,145,169,.15)}}:host{width:450px;height:120px;background-color:white;background-color:var(--wh-bg-base, white);border-width:var(--link-preview-border-width);box-sizing:border-box;border:1px solid #e1e8ed;border:1px solid var(--wh-border-color, #e1e8ed);overflow:hidden;color:rgb(24, 25, 25);color:var(--wh-text, rgb(24, 25, 25));cursor:pointer;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;display:flex;text-decoration:none;opacity:1;position:relative;transition-duration:.15s;transition-timing-function:ease-in-out}webhighlights-loading-text{text-align:left;margin:0px;flex-grow:0;font-size:11px;color:var(--wh-text-lighter);word-break:break-all}.link-preview-image{display:block;flex:0 0 125px;overflow:hidden;height:auto;position:relative;transition:flex-basis .25s ease-in-out 0s;background-color:white;background-color:var(--wh-fallback-img-color, white)}.link-preview-image:not(.loading){width:100%;-o-object-fit:cover;object-fit:cover}.link-preview-image.loading{color:rgba(0,0,0,0);opacity:.8;animation:1.25s linear 0s infinite normal none running loadingBlinking;background:center center/cover no-repeat var(--link-preview-loading-bg-color);background:center center/cover no-repeat var(--wh-bg-lighter, var(--link-preview-loading-bg-color))}.fallback-img{display:flex;align-items:center;justify-content:center}@media(min-width: 991px){.link-preview-image{flex:0 0 180px}}.link-preview-meta-info-container{display:flex;justify-content:space-around;flex-direction:column;flex:1 1 0%;padding:8px 8px;min-width:0px;box-sizing:border-box}.link-preview-meta-info-header{line-height:1.1;display:block;margin:2px 0px 8px;word-break:break-all}.link-preview-meta-info-header.loading{width:60%;height:25px;color:rgba(0,0,0,0);opacity:.8;animation:.75s linear 0s infinite normal none running loadingBlinking;background:--link-preview-loading-bg-color}.link-preview-meta-info-header:not(.loading){text-align:left;font-size:16px;font-weight:400;margin:0px;flex-grow:1.2}.link-preview-meta-info-description{display:block;margin-bottom:12px;position:relative;padding:4px 0}.link-preview-meta-info-description.loading{width:95%;height:30px;color:rgba(0,0,0,0);opacity:.8;animation:.75s linear .125s infinite normal none running loadingBlinking;background:--link-preview-loading-bg-color}.link-preview-meta-info-description:not(.loading){text-align:left;font-size:13px;font-weight:300;flex-grow:2;margin:auto 0px;line-height:16px;text-overflow:ellipsis}.link-preview-meta-info-footer{display:flex;word-break:break-all}.link-preview-meta-info-footer webhighlights-loading-text{width:100%;padding:2px 0;font-size:10px;color:var(--wh-text-lightest);--loading-text-duration: 0.75s;--loading-text-delay: 0.25s;--loading-text-opacity: 0.8;--loading-width: 40%}',""]);const l=a},40935:i=>{"use strict";i.exports=function(i){var t=[];return t.toString=function(){return this.map((function(t){var e="",n=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),n&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=i(t),n&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(i,e,n,o,r){"string"==typeof i&&(i=[[null,i,void 0]]);var a={};if(n)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(a[s]=!0)}for(var d=0;d<i.length;d++){var c=[].concat(i[d]);n&&a[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),e&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=e):c[2]=e),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},36758:i=>{"use strict";i.exports=function(i){return i[1]}},57560:(i,t,e)=>{var n=e(22331);n&&n.__esModule&&(n=n.default),i.exports="string"==typeof n?n:n.toString()},69361:(i,t,e)=>{"use strict";e.d(t,{u:()=>r});var n=e(38085);const o=new n.ChromeJwtService;function r(i){return new n.HttpClient(i||n.productionEnvironment,o)}},17100:(i,t,e)=>{"use strict";e.d(t,{N:()=>r});var n=e(69361),o=e(38085);function r(i){return new o.HttpFacade((0,n.u)(i))}},30827:(i,t,e)=>{"use strict";e.d(t,{y:()=>r});var n=e(38085),o=e(93811);class r extends o.LitElement{constructor(){super(...arguments),this.components=[]}connectedCallback(){super.connectedCallback(),(0,n.lazyDefine)(this.components)}static define(i,t,e){(0,n.defineWebHighlightsElement)(i,t,e)}}},95665:i=>{"use strict";i.exports=LitDecoratorsExternal},93811:i=>{"use strict";i.exports=LitExternal},38085:i=>{"use strict";i.exports=WebHighlightsSharedLibExternal}},t={};function e(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,exports:{}};return i[n](r,r.exports,e),r.exports}e.n=i=>{var t=i&&i.__esModule?()=>i.default:()=>i;return e.d(t,{a:t}),t},e.d=(i,t)=>{for(var n in t)e.o(t,n)&&!e.o(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:t[n]})},e.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),e.r=i=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},(()=>{"use strict";var i=e(38085),t=e(93811),n=e(95665),o=e(17100),r=e(30827),a=e(57560),l=e.n(a),s=function(i,t,e,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,t,e,n);else for(var l=i.length-1;l>=0;l--)(o=i[l])&&(a=(r<3?o(a):r>3?o(t,e,a):o(t,e))||a);return r>3&&a&&Object.defineProperty(t,e,a),a};const d=i.SHARED_COMPONENTS.LinkPreview,c="webhighlights-link-preview";class g extends r.y{get meta(){var i,t,e,n,o;return Object.assign(Object.assign(Object.assign(Object.assign({},null!==(t=null===(i=this.props)||void 0===i?void 0:i.metaDataFallback)&&void 0!==t?t:{}),this.metaData),null!==(e=this.props.metaData)&&void 0!==e?e:{}),null!==(o=null===(n=this.props)||void 0===n?void 0:n.metaDataOverrides)&&void 0!==o?o:{})}get loading(){var i;return void 0===this.metaData&&void 0===(null===(i=this.props)||void 0===i?void 0:i.metaData)||this.props.loading}constructor(){var t;super(),this.imageLoadingError=!1,this.components=[i.SHARED_COMPONENTS.LoadingText.TAG,i.SHARED_COMPONENTS.FallbackImage.TAG],(null===(t=this.props)||void 0===t?void 0:t.metaData)&&(this.metaData=this.props.metaData)}firstUpdated(){return i=this,t=void 0,n=function*(){this.metaData||this.props.metaData||!this.props.url||(this.httpFacade=(0,o.N)(this.props.environment),this.httpFacade.getMetaData(this.props.url).then((i=>this.metaData=i)).catch((()=>this.metaData={})))},new((e=void 0)||(e=Promise))((function(o,r){function a(i){try{s(n.next(i))}catch(i){r(i)}}function l(i){try{s(n.throw(i))}catch(i){r(i)}}function s(i){var t;i.done?o(i.value):(t=i.value,t instanceof e?t:new e((function(i){i(t)}))).then(a,l)}s((n=n.apply(i,t||[])).next())}));var i,t,e,n}get loadingClass(){return this.loading?"loading":""}get description(){var t,e,n,o,r;const a=null!==(e=null===(t=this.meta)||void 0===t?void 0:t.description)&&void 0!==e?e:"";return(0,i.truncateString)(a,null!==(r=null===(o=null===(n=this.props)||void 0===n?void 0:n.truncate)||void 0===o?void 0:o.description)&&void 0!==r?r:70)}get previewUrl(){var t,e,n;if(this.loading)return"";const o=this.props.url.split("//")[1];return(0,i.truncateString)(o,null!==(n=null===(e=null===(t=this.props)||void 0===t?void 0:t.truncate)||void 0===e?void 0:e.url)&&void 0!==n?n:32)}get title(){var t,e,n,o,r;return(0,i.truncateString)(this.loading?"":null!==(e=null===(t=this.meta)||void 0===t?void 0:t.title)&&void 0!==e?e:"",null!==(r=null===(o=null===(n=this.props)||void 0===n?void 0:n.truncate)||void 0===o?void 0:o.title)&&void 0!==r?r:50).trim()}get imageSrc(){var i,t,e;return null!==(e=null===(t=null===(i=this.meta)||void 0===i?void 0:i.image)||void 0===t?void 0:t.url)&&void 0!==e?e:""}onImageLoadingError(i){this.imageLoadingError=!0}render(){var i,e;return t.html`
      <div
        class="link-preview-meta-info-container ${this.loadingClass}"
        part="info-container"
      >
        <!-- prettier-ignore -->
        <header data-testid=${d.TEST_IDS.TITLE} class="link-preview-meta-info-header ${this.loadingClass}" part="header">${this.title}</header>
        <main
          data-testid=${d.TEST_IDS.DESCRIPTION}
          class="link-preview-meta-info-description ${this.loadingClass}"
          part="description"
        >
          <span>${this.description}</span>
        </main>
        <footer class="link-preview-meta-info-footer">
          <webhighlights-loading-text
            class="link-preview-meta-info-footer-url"
            data-testid=${d.TEST_IDS.URL}
            .loading=${!!this.loadingClass}
            >${this.previewUrl}</webhighlights-loading-text
          >
        </footer>
      </div>
      ${this.loading?t.html`
            <div
              class="link-preview-image ${this.loadingClass}"
              part="image"
            ></div>
          `:t.html`
            ${this.imageLoadingError||!this.imageSrc?t.html`
                  <webhighlights-fallback-img
                    class="link-preview-image"
                    part="image"
                  ></webhighlights-fallback-img>
                `:t.html` <img
                  class="link-preview-image"
                  data-testid=${d.TEST_IDS.IMAGE}
                  part="image"
                  src="${this.imageSrc}"
                  alt=${(null===(e=null===(i=this.meta)||void 0===i?void 0:i.image)||void 0===e?void 0:e.alt)||"Link preview image"}
                  loading="lazy"
                  @error=${this.onImageLoadingError}
                />`}
          `}
    `}}g.styles=t.css`
    ${(0,t.unsafeCSS)(l())}
  `,s([(0,n.property)()],g.prototype,"props",void 0),s([(0,n.property)()],g.prototype,"metaData",void 0),s([(0,n.state)()],g.prototype,"imageLoadingError",void 0),r.y.define(c,g),r.y.define(c,g)})()})();
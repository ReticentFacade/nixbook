/*! For license information please see background.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(()=>(()=>{var t={3449:function(t,e,r){"use strict";var n,i,o,s,a,c,u,l,h,f=this&&this.__classPrivateFieldSet||function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},p=this&&this.__classPrivateFieldGet||function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const d=r(6465),g=r(1073),m=r(6745),b=r(2255),y=r(8203),T=r(7422);class v{constructor(t){var e,r,p,g,_,w;n.set(this,void 0),i.set(this,void 0),o.set(this,void 0),s.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),h.set(this,void 0),this.blocks={retrieve:t=>this.request({path:b.getBlock.path(t),method:b.getBlock.method,query:(0,m.pick)(t,b.getBlock.queryParams),body:(0,m.pick)(t,b.getBlock.bodyParams),auth:null==t?void 0:t.auth}),update:t=>this.request({path:b.updateBlock.path(t),method:b.updateBlock.method,query:(0,m.pick)(t,b.updateBlock.queryParams),body:(0,m.pick)(t,b.updateBlock.bodyParams),auth:null==t?void 0:t.auth}),delete:t=>this.request({path:b.deleteBlock.path(t),method:b.deleteBlock.method,query:(0,m.pick)(t,b.deleteBlock.queryParams),body:(0,m.pick)(t,b.deleteBlock.bodyParams),auth:null==t?void 0:t.auth}),children:{append:t=>this.request({path:b.appendBlockChildren.path(t),method:b.appendBlockChildren.method,query:(0,m.pick)(t,b.appendBlockChildren.queryParams),body:(0,m.pick)(t,b.appendBlockChildren.bodyParams),auth:null==t?void 0:t.auth}),list:t=>this.request({path:b.listBlockChildren.path(t),method:b.listBlockChildren.method,query:(0,m.pick)(t,b.listBlockChildren.queryParams),body:(0,m.pick)(t,b.listBlockChildren.bodyParams),auth:null==t?void 0:t.auth})}},this.databases={list:t=>this.request({path:b.listDatabases.path(),method:b.listDatabases.method,query:(0,m.pick)(t,b.listDatabases.queryParams),body:(0,m.pick)(t,b.listDatabases.bodyParams),auth:null==t?void 0:t.auth}),retrieve:t=>this.request({path:b.getDatabase.path(t),method:b.getDatabase.method,query:(0,m.pick)(t,b.getDatabase.queryParams),body:(0,m.pick)(t,b.getDatabase.bodyParams),auth:null==t?void 0:t.auth}),query:t=>this.request({path:b.queryDatabase.path(t),method:b.queryDatabase.method,query:(0,m.pick)(t,b.queryDatabase.queryParams),body:(0,m.pick)(t,b.queryDatabase.bodyParams),auth:null==t?void 0:t.auth}),create:t=>this.request({path:b.createDatabase.path(),method:b.createDatabase.method,query:(0,m.pick)(t,b.createDatabase.queryParams),body:(0,m.pick)(t,b.createDatabase.bodyParams),auth:null==t?void 0:t.auth}),update:t=>this.request({path:b.updateDatabase.path(t),method:b.updateDatabase.method,query:(0,m.pick)(t,b.updateDatabase.queryParams),body:(0,m.pick)(t,b.updateDatabase.bodyParams),auth:null==t?void 0:t.auth})},this.pages={create:t=>this.request({path:b.createPage.path(),method:b.createPage.method,query:(0,m.pick)(t,b.createPage.queryParams),body:(0,m.pick)(t,b.createPage.bodyParams),auth:null==t?void 0:t.auth}),retrieve:t=>this.request({path:b.getPage.path(t),method:b.getPage.method,query:(0,m.pick)(t,b.getPage.queryParams),body:(0,m.pick)(t,b.getPage.bodyParams),auth:null==t?void 0:t.auth}),update:t=>this.request({path:b.updatePage.path(t),method:b.updatePage.method,query:(0,m.pick)(t,b.updatePage.queryParams),body:(0,m.pick)(t,b.updatePage.bodyParams),auth:null==t?void 0:t.auth}),properties:{retrieve:t=>this.request({path:b.getPageProperty.path(t),method:b.getPageProperty.method,query:(0,m.pick)(t,b.getPageProperty.queryParams),body:(0,m.pick)(t,b.getPageProperty.bodyParams),auth:null==t?void 0:t.auth})}},this.users={retrieve:t=>this.request({path:b.getUser.path(t),method:b.getUser.method,query:(0,m.pick)(t,b.getUser.queryParams),body:(0,m.pick)(t,b.getUser.bodyParams),auth:null==t?void 0:t.auth}),list:t=>this.request({path:b.listUsers.path(),method:b.listUsers.method,query:(0,m.pick)(t,b.listUsers.queryParams),body:(0,m.pick)(t,b.listUsers.bodyParams),auth:null==t?void 0:t.auth}),me:t=>this.request({path:b.getSelf.path(),method:b.getSelf.method,query:(0,m.pick)(t,b.getSelf.queryParams),body:(0,m.pick)(t,b.getSelf.bodyParams),auth:null==t?void 0:t.auth})},this.comments={create:t=>this.request({path:b.createComment.path(),method:b.createComment.method,query:(0,m.pick)(t,b.createComment.queryParams),body:(0,m.pick)(t,b.createComment.bodyParams),auth:null==t?void 0:t.auth}),list:t=>this.request({path:b.listComments.path(),method:b.listComments.method,query:(0,m.pick)(t,b.listComments.queryParams),body:(0,m.pick)(t,b.listComments.bodyParams),auth:null==t?void 0:t.auth})},this.search=t=>this.request({path:b.search.path(),method:b.search.method,query:(0,m.pick)(t,b.search.queryParams),body:(0,m.pick)(t,b.search.bodyParams),auth:null==t?void 0:t.auth}),this.oauth={token:t=>this.request({path:b.oauthToken.path(),method:b.oauthToken.method,query:(0,m.pick)(t,b.oauthToken.queryParams),body:(0,m.pick)(t,b.oauthToken.bodyParams),auth:{client_id:t.client_id,client_secret:t.client_secret}})},f(this,n,null==t?void 0:t.auth,"f"),f(this,i,null!==(e=null==t?void 0:t.logLevel)&&void 0!==e?e:d.LogLevel.WARN,"f"),f(this,o,null!==(r=null==t?void 0:t.logger)&&void 0!==r?r:(0,d.makeConsoleLogger)(T.name),"f"),f(this,s,(null!==(p=null==t?void 0:t.baseUrl)&&void 0!==p?p:"https://api.notion.com")+"/v1/","f"),f(this,a,null!==(g=null==t?void 0:t.timeoutMs)&&void 0!==g?g:6e4,"f"),f(this,c,null!==(_=null==t?void 0:t.notionVersion)&&void 0!==_?_:v.defaultNotionVersion,"f"),f(this,u,null!==(w=null==t?void 0:t.fetch)&&void 0!==w?w:y.default,"f"),f(this,l,null==t?void 0:t.agent,"f"),f(this,h,`notionhq-client/${T.version}`,"f")}async request({path:t,method:e,query:r,body:n,auth:i}){this.log(d.LogLevel.INFO,"request start",{method:e,path:t});const o=n&&0!==Object.entries(n).length?JSON.stringify(n):void 0,f=new URL(`${p(this,s,"f")}${t}`);if(r)for(const[t,e]of Object.entries(r))void 0!==e&&(Array.isArray(e)?e.forEach((e=>f.searchParams.append(t,decodeURIComponent(e)))):f.searchParams.append(t,String(e)));let m;if("object"==typeof i){const t=`${i.client_id}:${i.client_secret}`;m={authorization:`Basic ${Buffer.from(t).toString("base64")}`}}else m=this.authAsHeaders(i);const b={...m,"Notion-Version":p(this,c,"f"),"user-agent":p(this,h,"f")};void 0!==o&&(b["content-type"]="application/json");try{const r=await g.RequestTimeoutError.rejectAfterTimeout(p(this,u,"f").call(this,f.toString(),{method:e.toUpperCase(),headers:b,body:o,agent:p(this,l,"f")}),p(this,a,"f")),n=await r.text();if(!r.ok)throw(0,g.buildRequestError)(r,n);const i=JSON.parse(n);return this.log(d.LogLevel.INFO,"request success",{method:e,path:t}),i}catch(t){if(!(0,g.isNotionClientError)(t))throw t;throw this.log(d.LogLevel.WARN,"request fail",{code:t.code,message:t.message}),(0,g.isHTTPResponseError)(t)&&this.log(d.LogLevel.DEBUG,"failed response body",{body:t.body}),t}}log(t,e,r){(0,d.logLevelSeverity)(t)>=(0,d.logLevelSeverity)(p(this,i,"f"))&&p(this,o,"f").call(this,t,e,r)}authAsHeaders(t){const e={},r=null!=t?t:p(this,n,"f");return void 0!==r&&(e.authorization=`Bearer ${r}`),e}}e.default=v,n=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,v.defaultNotionVersion="2022-06-28"},2255:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oauthToken=e.listComments=e.createComment=e.search=e.createDatabase=e.listDatabases=e.queryDatabase=e.updateDatabase=e.getDatabase=e.appendBlockChildren=e.listBlockChildren=e.deleteBlock=e.updateBlock=e.getBlock=e.getPageProperty=e.updatePage=e.getPage=e.createPage=e.listUsers=e.getUser=e.getSelf=void 0,e.getSelf={method:"get",pathParams:[],queryParams:[],bodyParams:[],path:()=>"users/me"},e.getUser={method:"get",pathParams:["user_id"],queryParams:[],bodyParams:[],path:t=>`users/${t.user_id}`},e.listUsers={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"users"},e.createPage={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","content","children"],path:()=>"pages"},e.getPage={method:"get",pathParams:["page_id"],queryParams:["filter_properties"],bodyParams:[],path:t=>`pages/${t.page_id}`},e.updatePage={method:"patch",pathParams:["page_id"],queryParams:[],bodyParams:["properties","icon","cover","archived","in_trash"],path:t=>`pages/${t.page_id}`},e.getPageProperty={method:"get",pathParams:["page_id","property_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:t=>`pages/${t.page_id}/properties/${t.property_id}`},e.getBlock={method:"get",pathParams:["block_id"],queryParams:[],bodyParams:[],path:t=>`blocks/${t.block_id}`},e.updateBlock={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["embed","type","archived","in_trash","bookmark","image","video","pdf","file","audio","code","equation","divider","breadcrumb","table_of_contents","link_to_page","table_row","heading_1","heading_2","heading_3","paragraph","bulleted_list_item","numbered_list_item","quote","to_do","toggle","template","callout","synced_block","table"],path:t=>`blocks/${t.block_id}`},e.deleteBlock={method:"delete",pathParams:["block_id"],queryParams:[],bodyParams:[],path:t=>`blocks/${t.block_id}`},e.listBlockChildren={method:"get",pathParams:["block_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:t=>`blocks/${t.block_id}/children`},e.appendBlockChildren={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["children","after"],path:t=>`blocks/${t.block_id}/children`},e.getDatabase={method:"get",pathParams:["database_id"],queryParams:[],bodyParams:[],path:t=>`databases/${t.database_id}`},e.updateDatabase={method:"patch",pathParams:["database_id"],queryParams:[],bodyParams:["title","description","icon","cover","properties","is_inline","archived","in_trash"],path:t=>`databases/${t.database_id}`},e.queryDatabase={method:"post",pathParams:["database_id"],queryParams:["filter_properties"],bodyParams:["sorts","filter","start_cursor","page_size","archived","in_trash"],path:t=>`databases/${t.database_id}/query`},e.listDatabases={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"databases"},e.createDatabase={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","title","description","is_inline"],path:()=>"databases"},e.search={method:"post",pathParams:[],queryParams:[],bodyParams:["sort","query","start_cursor","page_size","filter"],path:()=>"search"},e.createComment={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","rich_text","discussion_id"],path:()=>"comments"},e.listComments={method:"get",pathParams:[],queryParams:["block_id","start_cursor","page_size"],bodyParams:[],path:()=>"comments"},e.oauthToken={method:"post",pathParams:[],queryParams:[],bodyParams:["grant_type","code","redirect_uri","external_account"],path:()=>"oauth/token"}},1073:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildRequestError=e.APIResponseError=e.UnknownHTTPResponseError=e.isHTTPResponseError=e.RequestTimeoutError=e.isNotionClientError=e.ClientErrorCode=e.APIErrorCode=void 0;const n=r(6745);var i,o;!function(t){t.Unauthorized="unauthorized",t.RestrictedResource="restricted_resource",t.ObjectNotFound="object_not_found",t.RateLimited="rate_limited",t.InvalidJSON="invalid_json",t.InvalidRequestURL="invalid_request_url",t.InvalidRequest="invalid_request",t.ValidationError="validation_error",t.ConflictError="conflict_error",t.InternalServerError="internal_server_error",t.ServiceUnavailable="service_unavailable"}(i=e.APIErrorCode||(e.APIErrorCode={})),function(t){t.RequestTimeout="notionhq_client_request_timeout",t.ResponseError="notionhq_client_response_error"}(o=e.ClientErrorCode||(e.ClientErrorCode={}));class s extends Error{}function a(t){return(0,n.isObject)(t)&&t instanceof s}function c(t,e){return a(t)&&t.code in e}e.isNotionClientError=a;class u extends s{constructor(t="Request to Notion API has timed out"){super(t),this.code=o.RequestTimeout,this.name="RequestTimeoutError"}static isRequestTimeoutError(t){return c(t,{[o.RequestTimeout]:!0})}static rejectAfterTimeout(t,e){return new Promise(((r,n)=>{const i=setTimeout((()=>{n(new u)}),e);t.then(r).catch(n).then((()=>clearTimeout(i)))}))}}e.RequestTimeoutError=u;class l extends s{constructor(t){super(t.message),this.name="HTTPResponseError";const{code:e,status:r,headers:n,rawBodyText:i}=t;this.code=e,this.status=r,this.headers=n,this.body=i}}const h={[o.ResponseError]:!0,[i.Unauthorized]:!0,[i.RestrictedResource]:!0,[i.ObjectNotFound]:!0,[i.RateLimited]:!0,[i.InvalidJSON]:!0,[i.InvalidRequestURL]:!0,[i.InvalidRequest]:!0,[i.ValidationError]:!0,[i.ConflictError]:!0,[i.InternalServerError]:!0,[i.ServiceUnavailable]:!0};e.isHTTPResponseError=function(t){return!!c(t,h)};class f extends l{constructor(t){var e;super({...t,code:o.ResponseError,message:null!==(e=t.message)&&void 0!==e?e:`Request to Notion API failed with status: ${t.status}`}),this.name="UnknownHTTPResponseError"}static isUnknownHTTPResponseError(t){return c(t,{[o.ResponseError]:!0})}}e.UnknownHTTPResponseError=f;const p={[i.Unauthorized]:!0,[i.RestrictedResource]:!0,[i.ObjectNotFound]:!0,[i.RateLimited]:!0,[i.InvalidJSON]:!0,[i.InvalidRequestURL]:!0,[i.InvalidRequest]:!0,[i.ValidationError]:!0,[i.ConflictError]:!0,[i.InternalServerError]:!0,[i.ServiceUnavailable]:!0};class d extends l{constructor(){super(...arguments),this.name="APIResponseError"}static isAPIResponseError(t){return c(t,p)}}e.APIResponseError=d,e.buildRequestError=function(t,e){const r=function(t){if("string"!=typeof t)return;let e;try{e=JSON.parse(t)}catch(t){return}var r;return(0,n.isObject)(e)&&"string"==typeof e.message&&("string"==typeof(r=e.code)&&r in p)?{...e,code:e.code,message:e.message}:void 0}(e);return void 0!==r?new d({code:r.code,message:r.message,headers:t.headers,status:t.status,rawBodyText:e}):new f({message:void 0,headers:t.headers,status:t.status,rawBodyText:e})}},9885:(t,e)=>{"use strict";async function*r(t,e){let r=e.start_cursor;do{const n=await t({...e,start_cursor:r});yield*n.results,r=n.next_cursor}while(r)}function n(t){return"page"===t.object&&"url"in t}function i(t){return"database"===t.object&&"title"in t}Object.defineProperty(e,"__esModule",{value:!0}),e.isMentionRichTextItemResponse=e.isEquationRichTextItemResponse=e.isTextRichTextItemResponse=e.isFullComment=e.isFullUser=e.isFullPageOrDatabase=e.isFullDatabase=e.isFullPage=e.isFullBlock=e.collectPaginatedAPI=e.iteratePaginatedAPI=void 0,e.iteratePaginatedAPI=r,e.collectPaginatedAPI=async function(t,e){const n=[];for await(const i of r(t,e))n.push(i);return n},e.isFullBlock=function(t){return"block"===t.object&&"type"in t},e.isFullPage=n,e.isFullDatabase=i,e.isFullPageOrDatabase=function(t){return"database"===t.object?i(t):n(t)},e.isFullUser=function(t){return"type"in t},e.isFullComment=function(t){return"created_by"in t},e.isTextRichTextItemResponse=function(t){return"text"===t.type},e.isEquationRichTextItemResponse=function(t){return"equation"===t.type},e.isMentionRichTextItemResponse=function(t){return"mention"===t.type}},8288:(t,e,r)=>{"use strict";r(3449),r(6465),r(1073),r(9885)},6465:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logLevelSeverity=e.makeConsoleLogger=e.LogLevel=void 0;const n=r(6745);var i;!function(t){t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error"}(i=e.LogLevel||(e.LogLevel={})),e.makeConsoleLogger=function(t){return(e,r,n)=>{console[e](`${t} ${e}:`,r,n)}},e.logLevelSeverity=function(t){switch(t){case i.DEBUG:return 20;case i.INFO:return 40;case i.WARN:return 60;case i.ERROR:return 80;default:return(0,n.assertNever)(t)}}},6745:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=e.pick=e.assertNever=void 0,e.assertNever=function(t){throw new Error(`Unexpected value should never occur: ${t}`)},e.pick=function(t,e){const r=e.map((e=>[e,null==t?void 0:t[e]]));return Object.fromEntries(r)},e.isObject=function(t){return"object"==typeof t&&null!==t}},8677:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",l="[object Function]",h="[object Map]",f="[object Number]",p="[object Object]",d="[object Promise]",g="[object RegExp]",m="[object Set]",b="[object String]",y="[object WeakMap]",T="[object ArrayBuffer]",v="[object DataView]",_=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[o]=S[s]=S[T]=S[a]=S[v]=S[c]=S[u]=S[l]=S[h]=S[f]=S[p]=S[g]=S[m]=S[b]=S[y]=!1;var E="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,A="object"==typeof self&&self&&self.Object===Object&&self,I=E||A||Function("return this")(),k=e&&!e.nodeType&&e,N=k&&t&&!t.nodeType&&t,O=N&&N.exports===k,L=O&&E.process,R=function(){try{return L&&L.binding&&L.binding("util")}catch(t){}}(),C=R&&R.isTypedArray;function B(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function G(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function D(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var P,x,U,M=Array.prototype,j=Function.prototype,$=Object.prototype,H=I["__core-js_shared__"],q=j.toString,F=$.hasOwnProperty,V=(P=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",W=$.toString,K=RegExp("^"+q.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=O?I.Buffer:void 0,Y=I.Symbol,J=I.Uint8Array,X=$.propertyIsEnumerable,Z=M.splice,Q=Y?Y.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=z?z.isBuffer:void 0,rt=(x=Object.keys,U=Object,function(t){return x(U(t))}),nt=Nt(I,"DataView"),it=Nt(I,"Map"),ot=Nt(I,"Promise"),st=Nt(I,"Set"),at=Nt(I,"WeakMap"),ct=Nt(Object,"create"),ut=Ct(nt),lt=Ct(it),ht=Ct(ot),ft=Ct(st),pt=Ct(at),dt=Y?Y.prototype:void 0,gt=dt?dt.valueOf:void 0;function mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function yt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new yt;++e<r;)this.add(t[e])}function vt(t){var e=this.__data__=new bt(t);this.size=e.size}function _t(t,e){for(var r=t.length;r--;)if(Bt(t[r][0],e))return r;return-1}function wt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=F.call(t,Q),r=t[Q];try{t[Q]=void 0;var n=!0}catch(t){}var i=W.call(t);return n&&(e?t[Q]=r:delete t[Q]),i}(t):function(t){return W.call(t)}(t)}function St(t){return jt(t)&&wt(t)==o}function Et(t,e,r,n,i){return t===e||(null==t||null==e||!jt(t)&&!jt(e)?t!=t&&e!=e:function(t,e,r,n,i,l){var d=Dt(t),y=Dt(e),_=d?s:Lt(t),w=y?s:Lt(e),S=(_=_==o?p:_)==p,E=(w=w==o?p:w)==p,A=_==w;if(A&&Pt(t)){if(!Pt(e))return!1;d=!0,S=!1}if(A&&!S)return l||(l=new vt),d||$t(t)?At(t,e,r,n,i,l):function(t,e,r,n,i,o,s){switch(r){case v:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T:return!(t.byteLength!=e.byteLength||!o(new J(t),new J(e)));case a:case c:case f:return Bt(+t,+e);case u:return t.name==e.name&&t.message==e.message;case g:case b:return t==e+"";case h:var l=G;case m:var p=1&n;if(l||(l=D),t.size!=e.size&&!p)return!1;var d=s.get(t);if(d)return d==e;n|=2,s.set(t,e);var y=At(l(t),l(e),n,i,o,s);return s.delete(t),y;case"[object Symbol]":if(gt)return gt.call(t)==gt.call(e)}return!1}(t,e,_,r,n,i,l);if(!(1&r)){var I=S&&F.call(t,"__wrapped__"),k=E&&F.call(e,"__wrapped__");if(I||k){var N=I?t.value():t,O=k?e.value():e;return l||(l=new vt),i(N,O,r,n,l)}}return!!A&&(l||(l=new vt),function(t,e,r,n,i,o){var s=1&r,a=It(t),c=a.length;if(c!=It(e).length&&!s)return!1;for(var u=c;u--;){var l=a[u];if(!(s?l in e:F.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++u<c;){var d=t[l=a[u]],g=e[l];if(n)var m=s?n(g,d,l,e,t,o):n(d,g,l,t,e,o);if(!(void 0===m?d===g||i(d,g,r,n,o):m)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,r,n,i,l))}(t,e,r,n,Et,i))}function At(t,e,r,n,i,o){var s=1&r,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var l=-1,h=!0,f=2&r?new Tt:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],d=e[l];if(n)var g=s?n(d,p,l,e,t,o):n(p,d,l,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!B(e,(function(t,e){if(s=e,!f.has(s)&&(p===t||i(p,t,r,n,o)))return f.push(e);var s}))){h=!1;break}}else if(p!==d&&!i(p,d,r,n,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function It(t){return function(t,e,r){var n=e(t);return Dt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,Ht,Ot)}function kt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Nt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Mt(t)||function(t){return!!V&&V in t}(t))&&(xt(t)?K:_).test(Ct(t))}(r)?r:void 0}mt.prototype.clear=function(){this.__data__=ct?ct(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(ct){var r=e[t];return r===n?void 0:r}return F.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return ct?void 0!==e[t]:F.call(e,t)},mt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ct&&void 0===e?n:e,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(t){var e=this.__data__,r=_t(e,t);return!(r<0||(r==e.length-1?e.pop():Z.call(e,r,1),--this.size,0))},bt.prototype.get=function(t){var e=this.__data__,r=_t(e,t);return r<0?void 0:e[r][1]},bt.prototype.has=function(t){return _t(this.__data__,t)>-1},bt.prototype.set=function(t,e){var r=this.__data__,n=_t(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},yt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(it||bt),string:new mt}},yt.prototype.delete=function(t){var e=kt(this,t).delete(t);return this.size-=e?1:0,e},yt.prototype.get=function(t){return kt(this,t).get(t)},yt.prototype.has=function(t){return kt(this,t).has(t)},yt.prototype.set=function(t,e){var r=kt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Tt.prototype.add=Tt.prototype.push=function(t){return this.__data__.set(t,n),this},Tt.prototype.has=function(t){return this.__data__.has(t)},vt.prototype.clear=function(){this.__data__=new bt,this.size=0},vt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},vt.prototype.get=function(t){return this.__data__.get(t)},vt.prototype.has=function(t){return this.__data__.has(t)},vt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof bt){var n=r.__data__;if(!it||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new yt(n)}return r.set(t,e),this.size=r.size,this};var Ot=tt?function(t){return null==t?[]:(t=Object(t),function(e){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];a=s,X.call(t,a)&&(o[i++]=s)}var a;return o}(tt(t)))}:function(){return[]},Lt=wt;function Rt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||w.test(t))&&t>-1&&t%1==0&&t<e}function Ct(t){if(null!=t){try{return q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bt(t,e){return t===e||t!=t&&e!=e}(nt&&Lt(new nt(new ArrayBuffer(1)))!=v||it&&Lt(new it)!=h||ot&&Lt(ot.resolve())!=d||st&&Lt(new st)!=m||at&&Lt(new at)!=y)&&(Lt=function(t){var e=wt(t),r=e==p?t.constructor:void 0,n=r?Ct(r):"";if(n)switch(n){case ut:return v;case lt:return h;case ht:return d;case ft:return m;case pt:return y}return e});var Gt=St(function(){return arguments}())?St:function(t){return jt(t)&&F.call(t,"callee")&&!X.call(t,"callee")},Dt=Array.isArray,Pt=et||function(){return!1};function xt(t){if(!Mt(t))return!1;var e=wt(t);return e==l||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Mt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function jt(t){return null!=t&&"object"==typeof t}var $t=C?function(t){return function(e){return t(e)}}(C):function(t){return jt(t)&&Ut(t.length)&&!!S[wt(t)]};function Ht(t){return null!=(e=t)&&Ut(e.length)&&!xt(e)?function(t,e){var r=Dt(t),n=!r&&Gt(t),i=!r&&!n&&Pt(t),o=!r&&!n&&!i&&$t(t),s=r||n||i||o,a=s?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=a.length;for(var u in t)!e&&!F.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Rt(u,c))||a.push(u);return a}(t):function(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||$))return rt(t);var e,r,n=[];for(var i in Object(t))F.call(t,i)&&"constructor"!=i&&n.push(i);return n}(t);var e}t.exports=function(t,e){return Et(t,e)}},5650:(t,e,r)=>{var n=r(8942).Symbol;t.exports=n},6912:t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},5111:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},2837:t=>{t.exports=function(t){return t.split("")}},7250:t=>{t.exports=function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},7379:(t,e,r)=>{var n=r(5650),i=r(8870),o=r(9005),s=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},2478:(t,e,r)=>{var n=r(7250),i=r(9454),o=r(7706);t.exports=function(t,e,r){return e==e?o(t,e,r):n(t,i,r)}},8250:t=>{t.exports=function(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}},9454:t=>{t.exports=function(t){return t!=t}},9624:(t,e,r)=>{var n=r(3655),i=r(4759),o=r(1580),s=r(4066),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,h=u.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(n(t)?f:a).test(s(t))}},9261:(t,e,r)=>{var n=r(5111),i=r(2478),o=r(8250),s=r(9460),a=r(4354),c=Array.prototype.splice;t.exports=function(t,e,r,u){var l=u?o:i,h=-1,f=e.length,p=t;for(t===e&&(e=a(e)),r&&(p=n(t,s(r)));++h<f;)for(var d=0,g=e[h],m=r?r(g):g;(d=l(p,m,d,u))>-1;)p!==t&&c.call(p,d,1),c.call(t,d,1);return t}},3945:(t,e,r)=>{var n=r(2053),i=r(5234),o=r(796);t.exports=function(t,e){return o(i(t,e,n),t+"")}},7403:(t,e,r)=>{var n=r(2619),i=r(2532),o=r(2053),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:o;t.exports=s},3501:t=>{t.exports=function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}},2291:(t,e,r)=>{var n=r(5650),i=r(5111),o=r(3142),s=r(1187),a=n?n.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},9460:t=>{t.exports=function(t){return function(e){return t(e)}}},8931:(t,e,r)=>{var n=r(3501);t.exports=function(t,e,r){var i=t.length;return r=void 0===r?i:r,!e&&r>=i?t:n(t,e,r)}},8774:(t,e,r)=>{var n=r(2478);t.exports=function(t,e){for(var r=t.length;r--&&n(e,t[r],0)>-1;);return r}},4354:t=>{t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},1950:(t,e,r)=>{var n=r(8942)["__core-js_shared__"];t.exports=n},2532:(t,e,r)=>{var n=r(4715),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},4967:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},4715:(t,e,r)=>{var n=r(9624),i=r(155);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},8870:(t,e,r)=>{var n=r(5650),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var i=s.call(t);return n&&(e?t[a]=r:delete t[a]),i}},155:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},3417:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},4759:(t,e,r)=>{var n,i=r(1950),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!o&&o in t}},9005:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5234:(t,e,r)=>{var n=r(6912),i=Math.max;t.exports=function(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),c=Array(a);++s<a;)c[s]=o[e+s];s=-1;for(var u=Array(e+1);++s<e;)u[s]=o[s];return u[e]=r(c),n(t,this,u)}}},8942:(t,e,r)=>{var n=r(4967),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},796:(t,e,r)=>{var n=r(7403),i=r(3316)(n);t.exports=i},3316:t=>{var e=Date.now;t.exports=function(t){var r=0,n=0;return function(){var i=e(),o=16-(i-n);if(n=i,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},7706:t=>{t.exports=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}},2237:(t,e,r)=>{var n=r(2837),i=r(3417),o=r(2013);t.exports=function(t){return i(t)?o(t):n(t)}},4066:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},2945:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},2013:t=>{var e="\\ud800-\\udfff",r="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+i+")?",u="[\\ufe0e\\ufe0f]?",l=u+c+"(?:\\u200d(?:"+[o,s,a].join("|")+")"+u+c+")*",h="(?:"+[o+n+"?",n,s,a,r].join("|")+")",f=RegExp(i+"(?="+i+")|"+h+l,"g");t.exports=function(t){return t.match(f)||[]}},2619:t=>{t.exports=function(t){return function(){return t}}},2053:t=>{t.exports=function(t){return t}},3142:t=>{var e=Array.isArray;t.exports=e},3655:(t,e,r)=>{var n=r(7379),i=r(1580);t.exports=function(t){if(!i(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1580:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},547:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8138:(t,e,r)=>{var n=r(7379),i=r(3142),o=r(547);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==n(t)}},1187:(t,e,r)=>{var n=r(7379),i=r(547);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},7292:(t,e,r)=>{var n=r(3945)(r(581));t.exports=n},581:(t,e,r)=>{var n=r(9261);t.exports=function(t,e){return t&&t.length&&e&&e.length?n(t,e):t}},5243:(t,e,r)=>{var n=r(2291);t.exports=function(t){return null==t?"":n(t)}},7426:(t,e,r)=>{var n=r(2291),i=r(8931),o=r(8774),s=r(2237),a=r(5243),c=r(2945);t.exports=function(t,e,r){if((t=a(t))&&(r||void 0===e))return t.slice(0,c(t)+1);if(!t||!(e=n(e)))return t;var u=s(t),l=o(u,s(e))+1;return i(u,0,l).join("")}},8203:(t,e,r)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},4204:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(5289),o=r(8475),s=n(r(8677)),a=function(){function t(t,e){"string"==typeof t&&(t=new o.InsertDataQuill(i.DataType.Text,t+"")),this.insert=t,this.attributes=e||{}}return t.createNewLineOp=function(){return new t(i.NewLine)},t.prototype.isContainerBlock=function(){return this.isBlockquote()||this.isList()||this.isTable()||this.isCodeBlock()||this.isHeader()||this.isBlockAttribute()||this.isCustomTextBlock()},t.prototype.isBlockAttribute=function(){var t=this.attributes;return!!(t.align||t.direction||t.indent)},t.prototype.isBlockquote=function(){return!!this.attributes.blockquote},t.prototype.isHeader=function(){return!!this.attributes.header},t.prototype.isTable=function(){return!!this.attributes.table},t.prototype.isSameHeaderAs=function(t){return t.attributes.header===this.attributes.header&&this.isHeader()},t.prototype.hasSameAdiAs=function(t){return this.attributes.align===t.attributes.align&&this.attributes.direction===t.attributes.direction&&this.attributes.indent===t.attributes.indent},t.prototype.hasSameIndentationAs=function(t){return this.attributes.indent===t.attributes.indent},t.prototype.hasSameAttr=function(t){return s.default(this.attributes,t.attributes)},t.prototype.hasHigherIndentThan=function(t){return(Number(this.attributes.indent)||0)>(Number(t.attributes.indent)||0)},t.prototype.isInline=function(){return!(this.isContainerBlock()||this.isVideo()||this.isCustomEmbedBlock())},t.prototype.isCodeBlock=function(){return!!this.attributes["code-block"]},t.prototype.hasSameLangAs=function(t){return this.attributes["code-block"]===t.attributes["code-block"]},t.prototype.isJustNewline=function(){return this.insert.value===i.NewLine},t.prototype.isList=function(){return this.isOrderedList()||this.isBulletList()||this.isCheckedList()||this.isUncheckedList()},t.prototype.isOrderedList=function(){return this.attributes.list===i.ListType.Ordered},t.prototype.isBulletList=function(){return this.attributes.list===i.ListType.Bullet},t.prototype.isCheckedList=function(){return this.attributes.list===i.ListType.Checked},t.prototype.isUncheckedList=function(){return this.attributes.list===i.ListType.Unchecked},t.prototype.isACheckList=function(){return this.attributes.list==i.ListType.Unchecked||this.attributes.list===i.ListType.Checked},t.prototype.isSameListAs=function(t){return!!t.attributes.list&&(this.attributes.list===t.attributes.list||t.isACheckList()&&this.isACheckList())},t.prototype.isSameTableRowAs=function(t){return!!t.isTable()&&this.isTable()&&this.attributes.table===t.attributes.table},t.prototype.isText=function(){return this.insert.type===i.DataType.Text},t.prototype.isImage=function(){return this.insert.type===i.DataType.Image},t.prototype.isFormula=function(){return this.insert.type===i.DataType.Formula},t.prototype.isVideo=function(){return this.insert.type===i.DataType.Video},t.prototype.isLink=function(){return this.isText()&&!!this.attributes.link},t.prototype.isCustomEmbed=function(){return this.insert instanceof o.InsertDataCustom},t.prototype.isCustomEmbedBlock=function(){return this.isCustomEmbed()&&!!this.attributes.renderAsBlock},t.prototype.isCustomTextBlock=function(){return this.isText()&&!!this.attributes.renderAsBlock},t.prototype.isMentions=function(){return this.isText()&&!!this.attributes.mentions},t}();e.DeltaInsertOp=a},8475:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.InsertDataQuill=function(t,e){this.type=t,this.value=e};e.InsertDataCustom=function(t,e){this.type=t,this.value=e}},6168:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(5289),o=n(r(8537)),s=n(r(1439)),a=function(){function t(){}return t.denormalize=function(t){if(!t||"object"!=typeof t)return[];if("object"==typeof t.insert||t.insert===i.NewLine)return[t];var e=o.tokenizeWithNewLines(t.insert+"");if(1===e.length)return[t];var r=s.assign({},t,{insert:i.NewLine});return e.map((function(e){return e===i.NewLine?r:s.assign({},t,{insert:e})}))},t}();e.InsertOpDenormalizer=a},4171:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4204),i=r(5289),o=r(8475),s=r(1366),a=r(6168),c=r(186),u=function(){function t(){}return t.convert=function(e,r){if(!Array.isArray(e))return[];for(var i,o,c=[],u=0,l=[].concat.apply([],e.map(a.InsertOpDenormalizer.denormalize));u<l.length;u++){var h=l[u];h.insert&&(i=t.convertInsertVal(h.insert,r))&&(o=s.OpAttributeSanitizer.sanitize(h.attributes,r),c.push(new n.DeltaInsertOp(i,o)))}return c},t.convertInsertVal=function(t,e){if("string"==typeof t)return new o.InsertDataQuill(i.DataType.Text,t);if(!t||"object"!=typeof t)return null;var r=Object.keys(t);return r.length?i.DataType.Image in t?new o.InsertDataQuill(i.DataType.Image,c.OpLinkSanitizer.sanitize(t[i.DataType.Image]+"",e)):i.DataType.Video in t?new o.InsertDataQuill(i.DataType.Video,c.OpLinkSanitizer.sanitize(t[i.DataType.Video]+"",e)):i.DataType.Formula in t?new o.InsertDataQuill(i.DataType.Formula,t[i.DataType.Formula]):new o.InsertDataCustom(r[0],t[r[0]]):null},t}();e.InsertOpsConverter=u},1366:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5289),i=r(2229),o=r(8735),s=r(186),a=function(){function t(){}return t.sanitize=function(e,r){var a={};if(!e||"object"!=typeof e)return a;var c=["bold","italic","underline","strike","code","blockquote","code-block","renderAsBlock"],u=["background","color"],l=e.font,h=e.size,f=e.link,p=e.script,d=e.list,g=e.header,m=e.align,b=e.direction,y=e.indent,T=e.mentions,v=e.mention,_=e.width,w=e.target,S=e.rel,E=e["code-block"],A=c.concat(u,["font","size","link","script","list","header","align","direction","indent","mentions","mention","width","target","rel","code-block"]);if(c.forEach((function(t){var r=e[t];r&&(a[t]=!!r)})),u.forEach((function(r){var n=e[r];n&&(t.IsValidHexColor(n+"")||t.IsValidColorLiteral(n+"")||t.IsValidRGBColor(n+""))&&(a[r]=n)})),l&&t.IsValidFontName(l+"")&&(a.font=l),h&&t.IsValidSize(h+"")&&(a.size=h),_&&t.IsValidWidth(_+"")&&(a.width=_),f&&(a.link=s.OpLinkSanitizer.sanitize(f+"",r)),w&&t.isValidTarget(w)&&(a.target=w),S&&t.IsValidRel(S)&&(a.rel=S),E&&(t.IsValidLang(E)?a["code-block"]=E:a["code-block"]=!!E),p!==n.ScriptType.Sub&&n.ScriptType.Super!==p||(a.script=p),d!==n.ListType.Bullet&&d!==n.ListType.Ordered&&d!==n.ListType.Checked&&d!==n.ListType.Unchecked||(a.list=d),Number(g)&&(a.header=Math.min(Number(g),6)),o.find([n.AlignType.Center,n.AlignType.Right,n.AlignType.Justify,n.AlignType.Left],(function(t){return t===m}))&&(a.align=m),b===n.DirectionType.Rtl&&(a.direction=b),y&&Number(y)&&(a.indent=Math.min(Number(y),30)),T&&v){var I=i.MentionSanitizer.sanitize(v,r);Object.keys(I).length>0&&(a.mentions=!!T,a.mention=v)}return Object.keys(e).reduce((function(t,r){return-1===A.indexOf(r)&&(t[r]=e[r]),t}),a)},t.IsValidHexColor=function(t){return!!t.match(/^#([0-9A-F]{6}|[0-9A-F]{3})$/i)},t.IsValidColorLiteral=function(t){return!!t.match(/^[a-z]{1,50}$/i)},t.IsValidRGBColor=function(t){return!!t.match(/^rgb\(((0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d),\s*){2}(0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d)\)$/i)},t.IsValidFontName=function(t){return!!t.match(/^[a-z\s0-9\- ]{1,30}$/i)},t.IsValidSize=function(t){return!!t.match(/^[a-z0-9\-]{1,20}$/i)},t.IsValidWidth=function(t){return!!t.match(/^[0-9]*(px|em|%)?$/)},t.isValidTarget=function(t){return!!t.match(/^[_a-zA-Z0-9\-]{1,50}$/)},t.IsValidRel=function(t){return!!t.match(/^[a-zA-Z\s\-]{1,250}$/i)},t.IsValidLang=function(t){return"boolean"==typeof t||!!t.match(/^[a-zA-Z\s\-\\\/\+]{1,50}$/i)},t}();e.OpAttributeSanitizer=a},186:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(4627)),o=r(3029),s=function(){function t(){}return t.sanitize=function(t,e){var r=function(){};e&&"function"==typeof e.urlSanitizer&&(r=e.urlSanitizer);var n=r(t);return"string"==typeof n?n:o.encodeLink(i.sanitize(t))},t}();e.OpLinkSanitizer=s},1913:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(3029),o=r(5289),s=n(r(1439)),a=n(r(8735)),c=r(1366),u={serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"};e.DEFAULT_INLINE_STYLES={font:function(t){return u[t]||"font-family:"+t},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(t,e){var r=3*parseInt(t,10);return"padding-"+("rtl"===e.attributes.direction?"right":"left")+":"+r+"em"},direction:function(t,e){return"rtl"===t?"direction:rtl"+(e.attributes.align?"":"; text-align:inherit"):void 0}};var l=function(){function t(t,e){this.op=t,this.options=s.assign({},{classPrefix:"ql",inlineStyles:void 0,encodeHtml:!0,listItemTag:"li",paragraphTag:"p"},e)}return t.prototype.prefixClass=function(t){return this.options.classPrefix?this.options.classPrefix+"-"+t:t+""},t.prototype.getHtml=function(){var t=this.getHtmlParts();return t.openingTag+t.content+t.closingTag},t.prototype.getHtmlParts=function(){var t=this;if(this.op.isJustNewline()&&!this.op.isContainerBlock())return{openingTag:"",closingTag:"",content:o.NewLine};var e=this.getTags(),r=this.getTagAttributes();!e.length&&r.length&&e.push("span");for(var n=[],s=[],a=function(e){return"img"===e&&!!t.op.attributes.link},c=0,u=e;c<u.length;c++){var l=u[c];a(l)&&n.push(i.makeStartTag("a",this.getLinkAttrs())),n.push(i.makeStartTag(l,r)),s.push("img"===l?"":i.makeEndTag(l)),a(l)&&s.push(i.makeEndTag("a")),r=[]}return s.reverse(),{openingTag:n.join(""),content:this.getContent(),closingTag:s.join("")}},t.prototype.getContent=function(){if(this.op.isContainerBlock())return"";if(this.op.isMentions())return this.op.insert.value;var t=this.op.isFormula()||this.op.isText()?this.op.insert.value:"";return this.options.encodeHtml&&i.encodeHtml(t)||t},t.prototype.getCssClasses=function(){var t=this.op.attributes;if(this.options.inlineStyles)return[];var e=["indent","align","direction","font","size"];return this.options.allowBackgroundClasses&&e.push("background"),(this.getCustomCssClasses()||[]).concat(e.filter((function(e){return!!t[e]})).filter((function(e){return"background"!==e||c.OpAttributeSanitizer.IsValidColorLiteral(t[e])})).map((function(e){return e+"-"+t[e]})).concat(this.op.isFormula()?"formula":[]).concat(this.op.isVideo()?"video":[]).concat(this.op.isImage()?"image":[]).map(this.prefixClass.bind(this)))},t.prototype.getCssStyles=function(){var t=this,r=this.op.attributes,n=[["color"]];return!this.options.inlineStyles&&this.options.allowBackgroundClasses||n.push(["background","background-color"]),this.options.inlineStyles&&(n=n.concat([["indent"],["align","text-align"],["direction"],["font","font-family"],["size"]])),(this.getCustomCssStyles()||[]).concat(n.filter((function(t){return!!r[t[0]]})).map((function(n){var i=n[0],o=r[i],s=t.options.inlineStyles&&t.options.inlineStyles[i]||e.DEFAULT_INLINE_STYLES[i];return"object"==typeof s?s[o]:"function"==typeof s?s(o,t.op):a.preferSecond(n)+":"+o}))).filter((function(t){return void 0!==t}))},t.prototype.getTagAttributes=function(){if(this.op.attributes.code&&!this.op.isLink())return[];var t=this.makeAttr.bind(this),e=this.getCustomTagAttributes(),r=e?Object.keys(this.getCustomTagAttributes()).map((function(r){return t(r,e[r])})):[],n=this.getCssClasses(),i=n.length?r.concat([t("class",n.join(" "))]):r;if(this.op.isImage())return this.op.attributes.width&&(i=i.concat(t("width",this.op.attributes.width))),i.concat(t("src",this.op.insert.value));if(this.op.isACheckList())return i.concat(t("data-checked",this.op.isCheckedList()?"true":"false"));if(this.op.isFormula())return i;if(this.op.isVideo())return i.concat(t("frameborder","0"),t("allowfullscreen","true"),t("src",this.op.insert.value));if(this.op.isMentions()){var o=this.op.attributes.mention;return o.class&&(i=i.concat(t("class",o.class))),i=o["end-point"]&&o.slug?i.concat(t("href",o["end-point"]+"/"+o.slug)):i.concat(t("href","about:blank")),o.target&&(i=i.concat(t("target",o.target))),i}var s=this.getCssStyles();return s.length&&i.push(t("style",s.join(";"))),this.op.isCodeBlock()&&"string"==typeof this.op.attributes["code-block"]?i.concat(t("data-language",this.op.attributes["code-block"])):(this.op.isContainerBlock()||this.op.isLink()&&(i=i.concat(this.getLinkAttrs())),i)},t.prototype.makeAttr=function(t,e){return{key:t,value:e}},t.prototype.getLinkAttrs=function(){var t=c.OpAttributeSanitizer.isValidTarget(this.options.linkTarget||"")?this.options.linkTarget:void 0,e=c.OpAttributeSanitizer.IsValidRel(this.options.linkRel||"")?this.options.linkRel:void 0,r=this.op.attributes.target||t,n=this.op.attributes.rel||e;return[].concat(this.makeAttr("href",this.op.attributes.link)).concat(r?this.makeAttr("target",r):[]).concat(n?this.makeAttr("rel",n):[])},t.prototype.getCustomTag=function(t){if(this.options.customTag&&"function"==typeof this.options.customTag)return this.options.customTag.apply(null,[t,this.op])},t.prototype.getCustomTagAttributes=function(){if(this.options.customTagAttributes&&"function"==typeof this.options.customTagAttributes)return this.options.customTagAttributes.apply(null,[this.op])},t.prototype.getCustomCssClasses=function(){if(this.options.customCssClasses&&"function"==typeof this.options.customCssClasses){var t=this.options.customCssClasses.apply(null,[this.op]);if(t)return Array.isArray(t)?t:[t]}},t.prototype.getCustomCssStyles=function(){if(this.options.customCssStyles&&"function"==typeof this.options.customCssStyles){var t=this.options.customCssStyles.apply(null,[this.op]);if(t)return Array.isArray(t)?t:[t]}},t.prototype.getTags=function(){var t=this,e=this.op.attributes;if(!this.op.isText())return[this.op.isVideo()?"iframe":this.op.isImage()?"img":"span"];for(var r=this.options.paragraphTag||"p",n=0,i=[["blockquote"],["code-block","pre"],["list",this.options.listItemTag],["header"],["align",r],["direction",r],["indent",r]];n<i.length;n++){var s,c=i[n],u=c[0];if(e[u])return(s=this.getCustomTag(u))?[s]:"header"===u?["h"+e[u]]:[a.preferSecond(c)]}if(this.op.isCustomTextBlock())return(s=this.getCustomTag("renderAsBlock"))?[s]:[r];var l=Object.keys(e).reduce((function(e,r){var n=t.getCustomTag(r);return n&&(e[r]=n),e}),{}),h=[["link","a"],["mentions","a"],["script"],["bold","strong"],["italic","em"],["strike","s"],["underline","u"],["code"]];return h.filter((function(t){return!!e[t[0]]})).concat(Object.keys(l).filter((function(t){return!h.some((function(e){return e[0]==t}))})).map((function(t){return[t,l[t]]}))).map((function(t){return l[t[0]]?l[t[0]]:"script"===t[0]?e[t[0]]===o.ScriptType.Sub?"sub":"sup":a.preferSecond(t)}))},t}();e.OpToHtmlConverter=l},275:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(4171),o=r(1913),s=r(887),a=r(8840),c=r(886),u=r(3029),l=n(r(1439)),h=r(5289),f=r(1915),p="<br/>",d=function(){function t(t,e){var r;this.rawDeltaOps=[],this.callbacks={},this.options=l.assign({paragraphTag:"p",encodeHtml:!0,classPrefix:"ql",inlineStyles:!1,multiLineBlockquote:!0,multiLineHeader:!0,multiLineCodeblock:!0,multiLineParagraph:!0,multiLineCustomBlock:!0,allowBackgroundClasses:!1,linkTarget:"_blank"},e,{orderedListTag:"ol",bulletListTag:"ul",listItemTag:"li"}),r=this.options.inlineStyles?"object"==typeof this.options.inlineStyles?this.options.inlineStyles:{}:void 0,this.converterOptions={encodeHtml:this.options.encodeHtml,classPrefix:this.options.classPrefix,inlineStyles:r,listItemTag:this.options.listItemTag,paragraphTag:this.options.paragraphTag,linkRel:this.options.linkRel,linkTarget:this.options.linkTarget,allowBackgroundClasses:this.options.allowBackgroundClasses,customTag:this.options.customTag,customTagAttributes:this.options.customTagAttributes,customCssClasses:this.options.customCssClasses,customCssStyles:this.options.customCssStyles},this.rawDeltaOps=t}return t.prototype._getListTag=function(t){return t.isOrderedList()?this.options.orderedListTag+"":t.isBulletList()||t.isCheckedList()||t.isUncheckedList()?this.options.bulletListTag+"":""},t.prototype.getGroupedOps=function(){var t=i.InsertOpsConverter.convert(this.rawDeltaOps,this.options),e=s.Grouper.pairOpsWithTheirBlock(t),r=s.Grouper.groupConsecutiveSameStyleBlocks(e,{blockquotes:!!this.options.multiLineBlockquote,header:!!this.options.multiLineHeader,codeBlocks:!!this.options.multiLineCodeblock,customBlocks:!!this.options.multiLineCustomBlock}),n=s.Grouper.reduceConsecutiveSameStyleBlocksToOne(r);return n=(new f.TableGrouper).group(n),(new c.ListNester).nest(n)},t.prototype.convert=function(){var t=this;return this.getGroupedOps().map((function(e){if(e instanceof a.ListGroup)return t._renderWithCallbacks(h.GroupType.List,e,(function(){return t._renderList(e)}));if(e instanceof a.TableGroup)return t._renderWithCallbacks(h.GroupType.Table,e,(function(){return t._renderTable(e)}));if(e instanceof a.BlockGroup){var r=e;return t._renderWithCallbacks(h.GroupType.Block,e,(function(){return t._renderBlock(r.op,r.ops)}))}return e instanceof a.BlotBlock?t._renderCustom(e.op,null):e instanceof a.VideoItem?t._renderWithCallbacks(h.GroupType.Video,e,(function(){var r=e;return new o.OpToHtmlConverter(r.op,t.converterOptions).getHtml()})):t._renderWithCallbacks(h.GroupType.InlineGroup,e,(function(){return t._renderInlines(e.ops,!0)}))})).join("")},t.prototype._renderWithCallbacks=function(t,e,r){var n="",i=this.callbacks.beforeRender_cb;(n="function"==typeof i?i.apply(null,[t,e]):"")||(n=r());var o=this.callbacks.afterRender_cb;return"function"==typeof o?o.apply(null,[t,n]):n},t.prototype._renderList=function(t){var e=this,r=t.items[0];return u.makeStartTag(this._getListTag(r.item.op))+t.items.map((function(t){return e._renderListItem(t)})).join("")+u.makeEndTag(this._getListTag(r.item.op))},t.prototype._renderListItem=function(t){t.item.op.attributes.indent=0;var e=new o.OpToHtmlConverter(t.item.op,this.converterOptions).getHtmlParts(),r=this._renderInlines(t.item.ops,!1);return e.openingTag+r+(t.innerList?this._renderList(t.innerList):"")+e.closingTag},t.prototype._renderTable=function(t){var e=this;return u.makeStartTag("table")+u.makeStartTag("tbody")+t.rows.map((function(t){return e._renderTableRow(t)})).join("")+u.makeEndTag("tbody")+u.makeEndTag("table")},t.prototype._renderTableRow=function(t){var e=this;return u.makeStartTag("tr")+t.cells.map((function(t){return e._renderTableCell(t)})).join("")+u.makeEndTag("tr")},t.prototype._renderTableCell=function(t){var e=new o.OpToHtmlConverter(t.item.op,this.converterOptions).getHtmlParts(),r=this._renderInlines(t.item.ops,!1);return u.makeStartTag("td",{key:"data-row",value:t.item.op.attributes.table})+e.openingTag+r+e.closingTag+u.makeEndTag("td")},t.prototype._renderBlock=function(t,e){var r=this,n=new o.OpToHtmlConverter(t,this.converterOptions).getHtmlParts();if(t.isCodeBlock())return n.openingTag+u.encodeHtml(e.map((function(e){return e.isCustomEmbed()?r._renderCustom(e,t):e.insert.value})).join(""))+n.closingTag;var i=e.map((function(e){return r._renderInline(e,t)})).join("");return n.openingTag+(i||p)+n.closingTag},t.prototype._renderInlines=function(t,e){var r=this;void 0===e&&(e=!0);var n=t.length-1,i=t.map((function(t,e){return e>0&&e===n&&t.isJustNewline()?"":r._renderInline(t,null)})).join("");if(!e)return i;var o=u.makeStartTag(this.options.paragraphTag),s=u.makeEndTag(this.options.paragraphTag);return i===p||this.options.multiLineParagraph?o+i+s:o+i.split(p).map((function(t){return""===t?p:t})).join(s+o)+s},t.prototype._renderInline=function(t,e){return t.isCustomEmbed()?this._renderCustom(t,e):new o.OpToHtmlConverter(t,this.converterOptions).getHtml().replace(/\n/g,p)},t.prototype._renderCustom=function(t,e){var r=this.callbacks.renderCustomOp_cb;return"function"==typeof r?r.apply(null,[t,e]):""},t.prototype.beforeRender=function(t){"function"==typeof t&&(this.callbacks.beforeRender_cb=t)},t.prototype.afterRender=function(t){"function"==typeof t&&(this.callbacks.afterRender_cb=t)},t.prototype.renderCustomWith=function(t){this.callbacks.renderCustomOp_cb=t},t}();e.QuillDeltaToHtmlConverter=d},3029:(t,e)=>{"use strict";var r;function n(t){return i(r.Html).reduce(s,t)}function i(t){var e=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#x27;"],["\\/","&#x2F;"],["\\(","&#40;"],["\\)","&#41;"]];return t===r.Html?e.filter((function(t){var e=t[0];return t[1],-1===e.indexOf("(")&&-1===e.indexOf(")")})):e.filter((function(t){var e=t[0];return t[1],-1===e.indexOf("/")}))}function o(t,e){return t.replace(new RegExp(e[0],"g"),e[1])}function s(t,e){return t.replace(new RegExp(e[1],"g"),e[0].replace("\\",""))}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Html=0]="Html",t[t.Url=1]="Url"}(r||(r={})),e.makeStartTag=function(t,e){if(void 0===e&&(e=void 0),!t)return"";var r="";e&&(r=[].concat(e).map((function(t){return t.key+(t.value?'="'+t.value+'"':"")})).join(" "));var n=">";return"img"!==t&&"br"!==t||(n="/>"),r?"<"+t+" "+r+n:"<"+t+n},e.makeEndTag=function(t){return void 0===t&&(t=""),t&&"</"+t+">"||""},e.decodeHtml=n,e.encodeHtml=function(t,e){return void 0===e&&(e=!0),e&&(t=n(t)),i(r.Html).reduce(o,t)},e.encodeLink=function(t){var e=i(r.Url),n=e.reduce(s,t);return e.reduce(o,n)}},887:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4204),i=r(8735),o=r(8840),s=function(){function t(){}return t.pairOpsWithTheirBlock=function(t){for(var e,r=[],n=function(t){return!(t.isJustNewline()||t.isCustomEmbedBlock()||t.isVideo()||t.isContainerBlock())},s=function(t){return t.isInline()},a=t.length-1;a>=0;a--){var c=t[a];c.isVideo()?r.push(new o.VideoItem(c)):c.isCustomEmbedBlock()?r.push(new o.BlotBlock(c)):c.isContainerBlock()?(e=i.sliceFromReverseWhile(t,a-1,n),r.push(new o.BlockGroup(c,e.elements)),a=e.sliceStartsAt>-1?e.sliceStartsAt:a):(e=i.sliceFromReverseWhile(t,a-1,s),r.push(new o.InlineGroup(e.elements.concat(c))),a=e.sliceStartsAt>-1?e.sliceStartsAt:a)}return r.reverse(),r},t.groupConsecutiveSameStyleBlocks=function(e,r){return void 0===r&&(r={header:!0,codeBlocks:!0,blockquotes:!0,customBlocks:!0}),i.groupConsecutiveElementsWhile(e,(function(e,n){return e instanceof o.BlockGroup&&n instanceof o.BlockGroup&&(r.codeBlocks&&t.areBothCodeblocksWithSameLang(e,n)||r.blockquotes&&t.areBothBlockquotesWithSameAdi(e,n)||r.header&&t.areBothSameHeadersWithSameAdi(e,n)||r.customBlocks&&t.areBothCustomBlockWithSameAttr(e,n))}))},t.reduceConsecutiveSameStyleBlocksToOne=function(t){var e=n.DeltaInsertOp.createNewLineOp();return t.map((function(t){if(!Array.isArray(t))return t instanceof o.BlockGroup&&!t.ops.length&&t.ops.push(e),t;var r=t.length-1;return t[0].ops=i.flatten(t.map((function(t,n){return t.ops.length?t.ops.concat(n<r?[e]:[]):[e]}))),t[0]}))},t.areBothCodeblocksWithSameLang=function(t,e){return t.op.isCodeBlock()&&e.op.isCodeBlock()&&t.op.hasSameLangAs(e.op)},t.areBothSameHeadersWithSameAdi=function(t,e){return t.op.isSameHeaderAs(e.op)&&t.op.hasSameAdiAs(e.op)},t.areBothBlockquotesWithSameAdi=function(t,e){return t.op.isBlockquote()&&e.op.isBlockquote()&&t.op.hasSameAdiAs(e.op)},t.areBothCustomBlockWithSameAttr=function(t,e){return t.op.isCustomTextBlock()&&e.op.isCustomTextBlock()&&t.op.hasSameAttr(e.op)},t}();e.Grouper=s},886:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8840),i=r(8735),o=function(){function t(){}return t.prototype.nest=function(t){var e=this,r=this.convertListBlocksToListGroups(t),o=this.groupConsecutiveListGroups(r),s=i.flatten(o.map((function(t){return Array.isArray(t)?e.nestListSection(t):t})));return i.groupConsecutiveElementsWhile(s,(function(t,e){return t instanceof n.ListGroup&&e instanceof n.ListGroup&&t.items[0].item.op.isSameListAs(e.items[0].item.op)})).map((function(t){if(!Array.isArray(t))return t;var e=t.map((function(t){return t.items}));return new n.ListGroup(i.flatten(e))}))},t.prototype.convertListBlocksToListGroups=function(t){return i.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof n.BlockGroup&&e instanceof n.BlockGroup&&t.op.isList()&&e.op.isList()&&t.op.isSameListAs(e.op)&&t.op.hasSameIndentationAs(e.op)})).map((function(t){return Array.isArray(t)?new n.ListGroup(t.map((function(t){return new n.ListItem(t)}))):t instanceof n.BlockGroup&&t.op.isList()?new n.ListGroup([new n.ListItem(t)]):t}))},t.prototype.groupConsecutiveListGroups=function(t){return i.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof n.ListGroup&&e instanceof n.ListGroup}))},t.prototype.nestListSection=function(t){var e=this,r=this.groupByIndent(t);return Object.keys(r).map(Number).sort().reverse().forEach((function(n){r[n].forEach((function(r){var n=t.indexOf(r);e.placeUnderParent(r,t.slice(0,n))&&t.splice(n,1)}))})),t},t.prototype.groupByIndent=function(t){return t.reduce((function(t,e){var r=e.items[0].item.op.attributes.indent;return r&&(t[r]=t[r]||[],t[r].push(e)),t}),{})},t.prototype.placeUnderParent=function(t,e){for(var r=e.length-1;r>=0;r--){var n=e[r];if(t.items[0].item.op.hasHigherIndentThan(n.items[0].item.op)){var i=n.items[n.items.length-1];return i.innerList?i.innerList.items=i.innerList.items.concat(t.items):i.innerList=t,!0}}return!1},t}();e.ListNester=o},1915:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8840),i=r(8735),o=function(){function t(){}return t.prototype.group=function(t){return this.convertTableBlocksToTableGroups(t)},t.prototype.convertTableBlocksToTableGroups=function(t){var e=this;return i.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof n.BlockGroup&&e instanceof n.BlockGroup&&t.op.isTable()&&e.op.isTable()})).map((function(t){return Array.isArray(t)?new n.TableGroup(e.convertTableBlocksToTableRows(t)):t instanceof n.BlockGroup&&t.op.isTable()?new n.TableGroup([new n.TableRow([new n.TableCell(t)])]):t}))},t.prototype.convertTableBlocksToTableRows=function(t){return i.groupConsecutiveElementsWhile(t,(function(t,e){return t instanceof n.BlockGroup&&e instanceof n.BlockGroup&&t.op.isTable()&&e.op.isTable()&&t.op.isSameTableRowAs(e.op)})).map((function(t){return new n.TableRow(Array.isArray(t)?t.map((function(t){return new n.TableCell(t)})):[new n.TableCell(t)])}))},t}();e.TableGrouper=o},8840:function(t,e){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});e.InlineGroup=function(t){this.ops=t};var i=function(t){this.op=t},o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.VideoItem=o;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(i);e.BlotBlock=s;e.BlockGroup=function(t,e){this.op=t,this.ops=e};e.ListGroup=function(t){this.items=t};e.ListItem=function(t,e){void 0===e&&(e=null),this.item=t,this.innerList=e};e.TableGroup=function(t){this.rows=t};e.TableRow=function(t){this.cells=t};e.TableCell=function(t){this.item=t}},8735:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.preferSecond=function(t){return 0===t.length?null:t.length>=2?t[1]:t[0]},e.flatten=function t(e){return e.reduce((function(e,r){return e.concat(Array.isArray(r)?t(r):r)}),[])},e.find=function(t,e){if(Array.prototype.find)return Array.prototype.find.call(t,e);for(var r=0;r<t.length;r++)if(e(t[r]))return t[r]},e.groupConsecutiveElementsWhile=function(t,e){for(var r,n=[],i=0;i<t.length;i++)r=t[i],i>0&&e(r,t[i-1])?n[n.length-1].push(r):n.push([r]);return n.map((function(t){return 1===t.length?t[0]:t}))},e.sliceFromReverseWhile=function(t,e,r){for(var n={elements:[],sliceStartsAt:-1},i=e;i>=0&&r(t[i]);i--)n.sliceStartsAt=i,n.elements.unshift(t[i]);return n},e.intersperse=function(t,e){return t.reduce((function(r,n,i){return r.push(n),i<t.length-1&&r.push(e),r}),[])}},1439:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assign=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=0;i<e.length;i++){var o=e[i];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])}return n}},8537:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tokenizeWithNewLines=function(t){var e="\n";if(t===e)return[t];var r=t.split(e);if(1===r.length)return r;var n=r.length-1;return r.reduce((function(t,r,i){return i!==n?""!==r?t=t.concat(r,e):t.push(e):""!==r&&t.push(r),t}),[])}},4627:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=function(t){var e=t;return e=e.replace(/^\s*/gm,""),/^((https?|s?ftp|file|blob|mailto|tel):|#|\/|data:image\/)/.test(e)?e:"unsafe:"+e}},5395:(t,e,r)=>{"use strict";r(275).QuillDeltaToHtmlConverter,r(1913).OpToHtmlConverter;var n=r(8840);n.InlineGroup,n.VideoItem,n.BlockGroup,n.ListGroup,n.ListItem,n.BlotBlock,r(4204).DeltaInsertOp;var i=r(8475);i.InsertDataQuill,i.InsertDataCustom;var o=r(5289);o.NewLine,o.ListType,o.ScriptType,o.DirectionType,o.AlignType,o.DataType,o.GroupType},2229:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(186),i=function(){function t(){}return t.sanitize=function(e,r){var i={};return e&&"object"==typeof e?(e.class&&t.IsValidClass(e.class)&&(i.class=e.class),e.id&&t.IsValidId(e.id)&&(i.id=e.id),t.IsValidTarget(e.target+"")&&(i.target=e.target),e.avatar&&(i.avatar=n.OpLinkSanitizer.sanitize(e.avatar+"",r)),e["end-point"]&&(i["end-point"]=n.OpLinkSanitizer.sanitize(e["end-point"]+"",r)),e.slug&&(i.slug=e.slug+""),i):i},t.IsValidClass=function(t){return!!t.match(/^[a-zA-Z0-9_\-]{1,500}$/i)},t.IsValidId=function(t){return!!t.match(/^[a-zA-Z0-9_\-\:\.]{1,500}$/i)},t.IsValidTarget=function(t){return["_self","_blank","_parent","_top"].indexOf(t)>-1},t}();e.MentionSanitizer=i},5289:(t,e)=>{"use strict";var r,n,i,o,s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.NewLine="\n",function(t){t.Ordered="ordered",t.Bullet="bullet",t.Checked="checked",t.Unchecked="unchecked"}(r||(r={})),e.ListType=r,function(t){t.Sub="sub",t.Super="super"}(n||(n={})),e.ScriptType=n,function(t){t.Rtl="rtl"}(i||(i={})),e.DirectionType=i,function(t){t.Left="left",t.Center="center",t.Right="right",t.Justify="justify"}(o||(o={})),e.AlignType=o,function(t){t.Image="image",t.Video="video",t.Formula="formula",t.Text="text"}(s||(s={})),e.DataType=s,function(t){t.Block="block",t.InlineGroup="inline-group",t.List="list",t.Video="video",t.Table="table"}(a||(a={})),e.GroupType=a},4872:(t,e,r)=>{t.exports={deltaToMarkdown:r(927)}},5528:(t,e,r)=>{const n=r(8227),{encodeLink:i}=r(5250);t.exports={embed:{image:function(t){this.append("![]("+i(t)+")")},thematic_break:function(){this.open="\n---\n"+this.open}},inline:{italic:function(){return["_","_"]},bold:function(){return["**","**"]},link:function(t){return["[","]("+t+")"]}},block:{header:function({header:t}){this.open="#".repeat(t)+" "+this.open},blockquote:function(){this.open="> "+this.open},list:{group:function(){return new n(["","\n"])},line:function(t,e){if("bullet"===t.list)this.open="- "+this.open;else if("checked"===t.list)this.open="- [x] "+this.open;else if("unchecked"===t.list)this.open="- [ ] "+this.open;else if("ordered"===t.list){e.count=e.count||0;var r=++e.count;this.open=r+". "+this.open}}}}}},927:(t,e,r)=>{const n=r(1580),i=r(3142),o=r(7426),s=r(5528),a=r(8227);function c(t,e){for(var r in t)if(Object.keys(e.block).includes(r))return!0;return!1}t.exports=function(t,e=s){return o(function(t,e){var r,o,s,u,l,h=new a;function f(){s=o=new a(["","\n"]),h.append(o),u={}}f();for(var p=0;p<t.length;p++){var d=t[p];if(n(d.insert))for(var g in d.insert)e.embed[g]&&(_(d.attributes),e.embed[g].call(s,d.insert[g],d.attributes));else{var m=d.insert.split("\n");if(c(d.attributes,e)){for(var b=1;b<m.length;b++)for(var y in d.attributes)if(e.block[y]){var T=e.block[y];"object"==typeof T&&(r&&r.type!==y&&(r=null),!r&&T.group&&(r={el:T.group(),type:y,value:d.attributes[g],distance:0},h.append(r.el)),r&&(r.el.append(o),r.distance=0),T=T.line),T.call(o,d.attributes,r),f();break}l=!0}else{for(var v=0;v<m.length;v++)(v>0||l)&&r&&++r.distance>=2&&(r=null),_(d.attributes,t[p+1]&&t[p+1].attributes),s.append(m[v]),v<m.length-1&&f();l=!1}}}return h;function _(t,r){var n=[],o=[];t=t||{};for(var c=s,l={};c._format;){if(l[c._format]=!0,!t[c._format]){for(var h in l)delete u[h];s=c.parent()}c=c.parent()}for(var f in t)if(e.inline[f]){if(u[f]&&u[f]===t[f])continue;r&&t[f]===r[f]?n.push(f):o.push(f),u[f]=t[f]}function p(r){var n=e.inline[r].call(null,t[r]);i(n)&&(n=new a(n)),n._format=r,s.append(n),s=n}n.forEach(p),o.forEach(p)}}(t,e).render())+"\n"}},8227:(t,e,r)=>{const n=r(3142),i=r(8138),o=r(7292);var s=0;class a{constructor(t){this.id=++s,n(t)?(this.open=t[0],this.close=t[1]):i(t)&&(this.text=t),this.children=[]}append(t){t instanceof a||(t=new a(t)),t._parent&&o(t._parent.children,t),t._parent=this,this.children=this.children.concat(t)}render(){var t="";this.open&&(t+=this.open),this.text&&(t+=this.text);for(var e=0;e<this.children.length;e++)t+=this.children[e].render();return this.close&&(t+=this.close),t}parent(){return this._parent}}t.exports=a},5250:t=>{t.exports={encodeLink:t=>encodeURI(t).replace(/\(/i,"%28").replace(/\)/i,"%29").replace(/(\?|&)response-content-disposition=attachment.*$/,"")}},7422:t=>{"use strict";t.exports=JSON.parse('{"name":"@notionhq/client","version":"2.2.15","description":"A simple and easy to use client for the Notion API","engines":{"node":">=12"},"homepage":"https://developers.notion.com/docs/getting-started","bugs":{"url":"https://github.com/makenotion/notion-sdk-js/issues"},"repository":{"type":"git","url":"https://github.com/makenotion/notion-sdk-js/"},"keywords":["notion","notionapi","rest","notion-api"],"main":"./build/src","types":"./build/src/index.d.ts","scripts":{"prepare":"npm run build","prepublishOnly":"npm run checkLoggedIn && npm run lint && npm run test","build":"tsc","prettier":"prettier --write .","lint":"prettier --check . && eslint . --ext .ts && cspell \'**/*\' ","test":"jest ./test","check-links":"git ls-files | grep md$ | xargs -n 1 markdown-link-check","prebuild":"npm run clean","clean":"rm -rf ./build","checkLoggedIn":"./scripts/verifyLoggedIn.sh"},"author":"","license":"MIT","files":["build/package.json","build/src/**"],"dependencies":{"@types/node-fetch":"^2.5.10","node-fetch":"^2.6.1"},"devDependencies":{"@types/jest":"^28.1.4","@typescript-eslint/eslint-plugin":"^5.39.0","@typescript-eslint/parser":"^5.39.0","cspell":"^5.4.1","eslint":"^7.24.0","jest":"^28.1.2","markdown-link-check":"^3.8.7","prettier":"^2.8.8","ts-jest":"^28.0.5","typescript":"^4.8.4"}}')}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";function t(t,e){return Array(e+1).join(t)}r(5395);var e={};function n(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function i(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function o(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if(s(i,e,r))return i}}function s(t,e,r){var n=t.filter;if("string"==typeof n){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(t,e,r))return!0}}e.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},e.lineBreak={filter:"br",replacement:function(t,e,r){return r.br+"\n"}},e.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,r,n){var i=Number(r.nodeName.charAt(1));return"setext"===n.headingStyle&&i<3?"\n\n"+e+"\n"+t(1===i?"=":"-",e.length)+"\n\n":"\n\n"+t("#",i)+" "+e+"\n\n"}},e.blockquote={filter:"blockquote",replacement:function(t){return"\n\n"+(t=(t=t.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},e.list={filter:["ul","ol"],replacement:function(t,e){var r=e.parentNode;return"LI"===r.nodeName&&r.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},e.listItem={filter:"li",replacement:function(t,e,r){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=r.bulletListMarker+"   ",i=e.parentNode;if("OL"===i.nodeName){var o=i.getAttribute("start"),s=Array.prototype.indexOf.call(i.children,e);n=(o?Number(o)+s:s+1)+".  "}return n+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}},e.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,r){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},e.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(e,r,n){for(var i,o=((r.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],s=r.firstChild.textContent,a=n.fence.charAt(0),c=3,u=new RegExp("^"+a+"{3,}","gm");i=u.exec(s);)i[0].length>=c&&(c=i[0].length+1);var l=t(a,c);return"\n\n"+l+o+"\n"+s.replace(/\n$/,"")+"\n"+l+"\n\n"}},e.horizontalRule={filter:"hr",replacement:function(t,e,r){return"\n\n"+r.hr+"\n\n"}},e.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){var r=e.getAttribute("href");r&&(r=r.replace(/([()])/g,"\\$1"));var i=n(e.getAttribute("title"));return i&&(i=' "'+i.replace(/"/g,'\\"')+'"'),"["+t+"]("+r+i+")"}},e.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,r){var i,o,s=e.getAttribute("href"),a=n(e.getAttribute("title"));switch(a&&(a=' "'+a+'"'),r.linkReferenceStyle){case"collapsed":i="["+t+"][]",o="["+t+"]: "+s+a;break;case"shortcut":i="["+t+"]",o="["+t+"]: "+s+a;break;default:var c=this.references.length+1;i="["+t+"]["+c+"]",o="["+c+"]: "+s+a}return this.references.push(o),i},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},e.emphasis={filter:["em","i"],replacement:function(t,e,r){return t.trim()?r.emDelimiter+t+r.emDelimiter:""}},e.strong={filter:["strong","b"],replacement:function(t,e,r){return t.trim()?r.strongDelimiter+t+r.strongDelimiter:""}},e.code={filter:function(t){var e=t.previousSibling||t.nextSibling,r="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!r},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",r="`",n=t.match(/`+/gm)||[];-1!==n.indexOf(r);)r+="`";return r+e+t+e+r}},e.image={filter:"img",replacement:function(t,e){var r=n(e.getAttribute("alt")),i=e.getAttribute("src")||"",o=n(e.getAttribute("title"));return i?"!["+r+"]("+i+(o?' "'+o+'"':"")+")":""}},i.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=o(this.array,t,this.options))||(e=o(this._keep,t,this.options))||(e=o(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var a,c="undefined"!=typeof window?window:{};!function(){var t=c.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(t){}return e}()?(a=function(){},function(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){c.ActiveXObject&&(t=!0)}return t}()?a.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:a.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e}):c.DOMParser;Array.prototype.reduce;r(4872),r(8288);var u=Object.defineProperty,l=(t,e,r)=>((t,e,r)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);const h="Not set",f=[{description:"Highlight Text",name:"highlight-text",shortcut:"⌥S"},{description:"Highlight (Same Format)",name:"highlight-last-format",shortcut:"⌥A"},{description:"Toggle Sidebar",name:"toggle-sidebar",shortcut:"⌥W"},{description:"Bookmark Page",name:"toggle-bookmark",shortcut:"⌥B"}];var p=(t=>(t.COMMANDS="COMMANDS",t))(p||{});const d=new class{sendMessage(t){try{return chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0].id&&chrome.tabs.sendMessage(e[0].id,t)})),!0}catch{return!1}}sendRuntimeMessage(t,e){try{return e?chrome.runtime.sendMessage(t,e):chrome.runtime.sendMessage(t),!0}catch{return!1}}async readDataFromBackgroundScript(t){try{return await this.sendRuntimePortMessage(t)}catch{return"COMMANDS"===t?f:{}}}async readCommands(){return this.readDataFromBackgroundScript("COMMANDS")}async findSpecificCommand(t){return(await this.readCommands()).find((e=>e.name===t))}async sendRuntimePortMessage(t){return new Promise(((e,r)=>{var n,i;(typeof chrome>"u"||null==(n=null==chrome?void 0:chrome.runtime)||!n.connect)&&r("Chrome Runtime API is not available.");try{const n=null==(i=null==chrome?void 0:chrome.runtime)?void 0:i.connect({name:t}),o=t=>{n.onMessage.removeListener(o),n.disconnect(),e(t)},s=()=>{r("Port disconnected unexpectedly.")};n.onMessage.addListener(o),n.onDisconnect.addListener(s)}catch(t){r(t)}}))}};function g(t,e){return"string"==typeof(null==e?void 0:e.method)&&typeof t[null==e?void 0:e.method]<"u"}function m(t){this.message=t}m.prototype=new Error,m.prototype.name="InvalidCharacterError";var b=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new m("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,o=0,s="";n=e.charAt(o++);~n&&(r=i%4?64*r+n:n,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function y(t){this.message=t}y.prototype=new Error,y.prototype.name="InvalidTokenError";const T="jwt_webmarker";function v(t){try{return function(t,e){if("string"!=typeof t)throw new y("Invalid token specified");var r=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(b(e).replace(/(.)/g,(function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}catch{return b(e)}}(t.split(".")[r]))}catch(t){throw new y("Invalid token specified: "+t.message)}}(t)||void 0}catch{return}}class _{constructor(t=T){this.key=t}async getJwt(){return typeof window>"u"?"":localStorage[this.key]}async getJwtPayload(){return function(t=T){try{return v(localStorage[t])}catch{return}}(this.key)}setJwt(t){try{localStorage[this.key]=t}catch{}}}const w=new class extends _{constructor(){super(T)}get chromeStorageIsAvailable(){return hr()}async getJwt(){return this.chromeStorageIsAvailable?fr.getValue(T):super.getJwt()}async getJwtPayload(){try{return v(await this.getJwt())??void 0}catch{return}}async isLoggedIn(){return!!await this.getJwtPayload()}setJwt(t){this.chromeStorageIsAvailable?fr.setValue("jwt_webmarker",t):super.setJwt(t)}};var S=(t=>(t.BASIC="BASIC",t.EXPERT="EXPERT",t))(S||{});function E(t,{timeZone:e,todayOffset:r}={}){const n=new Date(Date.now()+864e5*(r??0));try{return t.toLocaleDateString(void 0,{timeZone:e})===n.toLocaleDateString(void 0,{timeZone:e})}catch{return t.toLocaleDateString()===n.toLocaleDateString()}}function A(){return typeof window>"u"?null:window.webhighlightsContext??null}function I(){const t=A();if(!function(t){const e=t||A();return!!(e&&e.chromeSyncService&&e.db&&e.httpFacade)}(t))throw new Error("Context not initialized. Call 'initContext' first.");return t}const k={production:!0,mode:"prod",MISC_SERVER_URL:"https://web-highlights-misc-server.herokuapp.com",BACKEND_URL:"https://web-highlights.herokuapp.com",BACKEND_URL_FALLBACK:"https://pre-web-highlights.herokuapp.com",BLOG_URL:"https://web-highlights.com/blog",WEBSITE_URL:"https://web-highlights.com",DOCS_URL:"https://web-highlights.com/docs/",FRONTEND_URL:"https://app.web-highlights.com",PRIVACY_URL:"https://web-highlights.com/legal/privacy-policy",EXTENSION_ID:"hldjnlbobkdkghfidgoecgmklcemanhm",PADDLE_VENDOR_ID:169421},N=function(){var t;const e=(null==(t=function(){try{return I()}catch{return null}}())?void 0:t.environment)??k,r="https://app.web-highlights.com/oauth/notion";return{LINKED_IN_URL:"https://www.linkedin.com/company/86328566",FACEBOOK_URL:"https://www.facebook.com/webhighlightscom/",INSTAGRAM_URL:"https://www.instagram.com/web_highlights/",LINKED_IN_URL_PRIVATE:"https://www.linkedin.com/in/marius-bongarts-6b3638171",TWITTER_URL:"https://twitter.com/WebHighlights_",TWITTER_URL_PRIVATE:"https://twitter.com/MariusBongarts",GITHUB_LINK_PRIVATE:"https://github.com/MariusBongarts",LINK_TREE_PRIVATE:"https://linktr.ee/MariusBongarts",GITHUB_LINK:"https://github.com/Web-Highlights",AVATAR_MARIUS_B:"https://avatars.githubusercontent.com/u/38838885?s=256&v=4",AVATAR_WEB_HIGHLIGHTS:"https://avatars.githubusercontent.com/u/110981256?s=256&v=4",MEDIUM_URL_PRIVATE:"https://medium.com/@mariusbongarts",LEGAL_TOS_LINK:`${e.WEBSITE_URL}/legal/terms-of-service`,DISCOVER_LINK:`${e.WEBSITE_URL}/discover`,LEGAL_PRIVACY_LINK:`${e.WEBSITE_URL}/legal/privacy-policy`,LEGAL_IMPRINT_LINK:`${e.WEBSITE_URL}/legal/imprint`,FAQ_LINK:`${e.WEBSITE_URL}/blog/faq-web-highlights-pdf-web-highlighter`,BLOG_LINK:`${e.WEBSITE_URL}/blog`,RELEASE_NOTES_LINK:`${e.WEBSITE_URL}/blog/whats-new`,markIdAttrKey:"markid",markMediatypeAttrKey:"media-type",TOOLBOX_CONTAINS_HIGHLIGHT_CLASS:"contains-highlight",HIGHLIGHT_CLASS:"webhighlights-highlight",CONTAINS_TAGS_CLASS:"webhighlight-with-tags",CONTAINS_NOTES_CLASS:"webhighlight-with-notes",CHROME_EXTENSION_LINK:"https://chromewebstore.google.com/detail/web-highlights-pdf-web-hi/hldjnlbobkdkghfidgoecgmklcemanhm",EDGE_EXTENSION_LINK:"https://microsoftedge.microsoft.com/addons/detail/web-highlights-pdf-we/ghdpaajjhmlfkogblgeibaabcpjfgldn",SIDEBAR_HTML_ATTRS:{ALIGNMENT:"alignment",SIDEBAR_WIDTH:"sidebar-width"},NOTION_REDIRECT_URL:r,NOTION_AUTH_URL:`https://api.notion.com/v1/oauth/authorize?client_id=4f5934df-e74b-4318-b381-604df7b3e06d&response_type=code&owner=user&redirect_uri=${encodeURIComponent(r)}`,DAILY_NOTION_API_EXPORT_LIMIT:2,DAILY_CAPACITIES_API_EXPORT_LIMIT:3,GLOBAL_STYLE_VARIABLES_ID:"web-highlights-global-style-variables"}}();var O,L=(t=>(t.trash="trash",t["copy-file"]="copy-file",t.blockquote="blockquote",t["file-pdf"]="file-pdf",t["file-html"]="file-html",t.settings="settings",t.rocket="rocket",t.search="search",t.bulb="bulb",t.star="star",t["delete-x"]="delete-x",t.twitter="twitter",t.box="box",t["mark-icon"]="mark-icon",t.linkedin="linkedin",t.facebook="facebook",t.clock="clock",t.calendar="calendar",t["external-link"]="external-link",t["cloud-off"]="cloud-off",t.cloud="cloud",t["cloud-check"]="cloud-check",t["plus-circle"]="plus-circle",t["minus-circle"]="minus-circle",t.info="info",t["x-circle"]="x-circle",t["check-circle"]="check-circle",t["thumbs-up"]="thumbs-up",t["thumbs-down"]="thumbs-down",t.brain="brain",t["arrow-right"]="arrow-right",t.eye="eye",t["eye-off"]="eye-off",t["feather-edit-3"]="feather-edit-3",t.tag="tag",t.home="home",t.bookmark="bookmark",t["align-left"]="align-left",t["align-right"]="align-right",t["push-right"]="push-right",t["sidebar-overlay"]="sidebar-overlay",t["sidebar-expand"]="sidebar-expand",t.sun="sun",t.moon="moon",t.power="power",t.image="image",t["book-open"]="book-open",t.bell="bell",t["minimize-2"]="minimize-2",t["maximize-2"]="maximize-2",t["lock-icon"]="lock-icon",t.link="link",t["unlock-icon"]="unlock-icon",t.menu="menu",t.list="list",t.logout="logout",t["chevron-right"]="chevron-right",t["chevron-left"]="chevron-left",t.history="history",t.globe="globe",t.grid="grid",t["arrows-down-up"]="arrows-down-up",t.filter="filter",t["filter-2"]="filter-2",t.groups="groups",t["size-small"]="size-small",t["size-medium"]="size-medium",t["size-large"]="size-large",t["alert-circle"]="alert-circle",t.save="save",t.user="user",t["arrow-up-circle"]="arrow-up-circle",t.compass="compass",t.zap="zap",t.smartphone="smartphone",t.capacities="capacities",t.notion="notion",t.obsidian="obsidian",t.book="book",t.colorPalette="colorPalette",t.type="type",t.crown="crown",t.command="command",t.circle="circle",t.dragDots="dragDots",t.weava="weava",t.mail="mail",t.repeat="repeat",t.inbox="inbox",t.flame="flame",t.medal="medal",t["check-badge"]="check-badge",t.check="check",t.dot="dot",t["curved-arrow-left"]="curved-arrow-left",t["buyer-pay-icon"]="buyer-pay-icon",t["save-plant"]="save-plant",t))(L||{});function R(t,e){const r=function(t,e){return t.map((t=>({tagName:t,options:e})))}(t,e);xr.dispatch("defineComponent",{detail:{componentDefinitions:r}})}function C(t){(function(){let t=document.querySelector(Ze.Toasts.TAG);t||(t=document.createElement(Ze.Toasts.TAG),document.body.append(t))})(),setTimeout((()=>{xr.dispatch("showToast",{detail:t})}),0)}(O||(O={})).WEB_HIGHLIGHT="web-highlight",L.notion,L.smartphone,L["copy-file"],L.capacities,L.weava;for(var B=[],G=[],D=typeof Uint8Array<"u"?Uint8Array:Array,P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0;x<64;++x)B[x]=P[x],G[P.charCodeAt(x)]=x;function U(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function M(t){return B[t>>18&63]+B[t>>12&63]+B[t>>6&63]+B[63&t]}function j(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(M(n));return i.join("")}G[45]=62,G[95]=63;var $,H=function(t){var e,r,n=U(t),i=n[0],o=n[1],s=new D(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),a=0,c=o>0?i-4:i;for(r=0;r<c;r+=4)e=G[t.charCodeAt(r)]<<18|G[t.charCodeAt(r+1)]<<12|G[t.charCodeAt(r+2)]<<6|G[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return 2===o&&(e=G[t.charCodeAt(r)]<<2|G[t.charCodeAt(r+1)]>>4,s[a++]=255&e),1===o&&(e=G[t.charCodeAt(r)]<<10|G[t.charCodeAt(r+1)]<<4|G[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},q=function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(j(t,s,s+o>a?a:s+o));return 1===n?(e=t[r-1],i.push(B[e>>2]+B[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(B[e>>10]+B[e>>4&63]+B[e<<2&63]+"=")),i.join("")},F=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},V=function(t,e,r,n,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+p]=255&s,p+=d,s/=256,u-=8);t[r+p-d]|=128*g},W=(function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var n=2147483647;function i(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),n=i(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(U(t,Uint8Array)){var e=new Uint8Array(t);return l(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t));if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(t,SharedArrayBuffer)||t&&U(t.buffer,SharedArrayBuffer)))return l(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,r);var s=function(t){if(o.isBuffer(t)){var e=0|h(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||M(t.length)?i(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(s)return s;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t))}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return a(t),i(t<0?0:0|h(t))}function u(t){for(var e=t.length<0?0:0|h(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,o.prototype),n}function h(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(t));var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(t).length;default:if(i)return n?-1:D(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return w(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),M(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var h=!0,f=0;f<c;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(M(a))return s;t[r+s]=a}return s}function y(t,e,r,n){return x(D(e,t.length-r),t,r,n)}function T(t,e,r,n){return x(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function v(t,e,r,n){return x(P(e),t,r,n)}function _(t,e,r,n){return x(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function w(t,e,r){return 0===e&&r===t.length?q(t):q(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,c,u=t[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}e.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch{return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,r){return s(t,e,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},o.allocUnsafe=function(t){return c(t)},o.allocUnsafeSlow=function(t){return c(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(U(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(U(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(t,e,r,n,i){if(U(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(t));if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),c=Math.min(s,a),u=this.slice(n,i),l=t.slice(e,r),h=0;h<c;++h)if(u[h]!==l[h]){s=u[h],a=l[h];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return y(this,t,e,r);case"ascii":case"latin1":case"binary":return T(this,t,e,r);case"base64":return v(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function k(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=j[t[o]];return i}function N(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(t,e,r,n,i){return e=+e,r>>>=0,i||R(t,0,r,4),V(t,e,r,n,23,4),r+4}function B(t,e,r,n,i){return e=+e,r>>>=0,i||R(t,0,r,8),V(t,e,r,n,52,8),r+8}o.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||O(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),F(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),F(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),F(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),F(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),!n&&0!==n&&(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,n),c=a.length;if(0===c)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%c]}return this};var G=/[^+/0-9A-Za-z-_]/g;function D(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function P(t){return H(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function x(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function M(t){return t!=t}var j=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()}($={exports:{}},$.exports),$.exports),K=W.Buffer;W.SlowBuffer,W.INSPECT_MAX_BYTES,W.kMaxLength;var z=function(t,e){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Y(t,e){function r(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var J=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Y(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),X=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Y(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function Z(t){return t&&t.Math==Math&&t}function Q(){return Z("object"==typeof globalThis&&globalThis)||Z("object"==typeof window&&window)||Z("object"==typeof self&&self)||Z("object"==typeof global&&global)||Function("return this")()}var tt=function(t){var e,r="object"==typeof(e=Q()).navigator&&"ReactNative"===e.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=K.alloc(t),i=0;i<t;++i)n[i]=Math.floor(256*Math.random());return n},et=function(){if(typeof window<"u"){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(K.alloc(e))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(t){return global.crypto.getRandomValues(K.alloc(t))}:tt}();function rt(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function nt(t){return"object"==typeof t&&null!==t}function it(t,e){var r=!1;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r||(console.warn(e),r=!0),t.apply(this,n)}}function ot(t){if(ArrayBuffer.isView(t))return K.from(t.buffer,t.byteOffset,t.byteLength);if(function(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}(t))return K.from(t);throw new X("Must use either Buffer or TypedArray")}var st=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,at=function(t){return"string"==typeof t&&st.test(t)},ct=function(t){if(!at(t))throw new X('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return K.from(e,"hex")},ut=function(t,e){return void 0===e&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},lt=Math.pow(2,53),ht=-Math.pow(2,53),ft=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new X("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=K.alloc(t.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=K.from(e,"binary"):Array.isArray(e)?this.buffer=K.from(e):this.buffer=ot(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if("string"==typeof e&&1!==e.length)throw new X("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new X("only accepts single character Uint8Array or Array");var r;if((r="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||r>255)throw new X("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=K.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(t,e){if(e="number"==typeof e?e:this.position,this.buffer.length<e+t.length){var r=K.alloc(this.buffer.length+t.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r}ArrayBuffer.isView(t)?(this.buffer.set(ot(t),e),this.position=e+t.byteLength>this.position?e+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,e,t.length,"binary"),this.position=e+t.length>this.position?e+t.length:this.position)},t.prototype.read=function(t,e){return e=e&&e>0?e:this.position,this.buffer.slice(t,t+e)},t.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(t){return this.buffer.toString(t)},t.prototype.toExtendedJSON=function(t){t=t||{};var e=this.buffer.toString("base64"),r=Number(this.sub_type).toString(16);return t.legacy?{$binary:e,$type:1===r.length?"0"+r:r}:{$binary:{base64:e,subType:1===r.length?"0"+r:r}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new pt(this.buffer.slice(0,this.position));throw new J('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,r){var n,i;if(r=r||{},"$binary"in e?r.legacy&&"string"==typeof e.$binary&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=K.from(e.$binary,"base64")):"string"!=typeof e.$binary&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=K.from(e.$binary.base64,"base64")):"$uuid"in e&&(i=4,n=ct(e.$uuid)),!n)throw new X("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return 4===i?new pt(n):new t(n,i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(ft.prototype,"_bsontype",{value:"Binary"});var pt=function(t){function e(r){var n,i,o=this;if(null==r)n=e.generate();else if(r instanceof e)n=K.from(r.buffer),i=r.__id;else if(ArrayBuffer.isView(r)&&16===r.byteLength)n=ot(r);else{if("string"!=typeof r)throw new X("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");n=ct(r)}return(o=t.call(this,n,4)||this).__id=i,o}return Y(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer},set:function(t){this.buffer=t,e.cacheHexString&&(this.__id=ut(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(void 0===t&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var r=ut(this.id,t);return e.cacheHexString&&(this.__id=r),r},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch{return!1}},e.prototype.toBinary=function(){return new ft(this.id,ft.SUBTYPE_UUID)},e.generate=function(){var t=et(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,K.from(t)},e.isValid=function(t){return!!t&&(t instanceof e||("string"==typeof t?at(t):!(!rt(t)||16!==t.length||64!=(240&t[6])||128&~t[8])))},e.createFromHexString=function(t){return new e(ct(t))},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},e}(ft),dt=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},t}();Object.defineProperty(dt.prototype,"_bsontype",{value:"Code"});var gt=function(){function t(e,r,n,i){if(!(this instanceof t))return new t(e,r,n,i);var o=e.split(".");2===o.length&&(n=o.shift(),e=o.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},t.prototype.toExtendedJSON=function(t){t=t||{};var e={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(e.$db=this.db),e=Object.assign(e,this.fields)),e},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(gt.prototype,"_bsontype",{value:"DBRef"});var mt=void 0;try{mt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var bt=4294967296,yt=bt*bt,Tt=yt/2,vt={},_t={},wt=function(){function t(e,r,n){if(void 0===e&&(e=0),!(this instanceof t))return new t(e,r,n);"bigint"==typeof e?Object.assign(this,t.fromBigInt(e,!!r)):"string"==typeof e?Object.assign(this,t.fromString(e,!!r)):(this.low=0|e,this.high=0|r,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,i,o;return r?(o=0<=(e>>>=0)&&e<256)&&(i=_t[e])?i:(n=t.fromBits(e,(0|e)<0?-1:0,!0),o&&(_t[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(i=vt[e])?i:(n=t.fromBits(e,e<0?-1:0,!1),o&&(vt[e]=n),n)},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=yt)return t.MAX_UNSIGNED_VALUE}else{if(e<=-Tt)return t.MIN_VALUE;if(e+1>=Tt)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%bt|0,e/bt|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof r?(n=r,r=!1):r=!!r,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return t.fromString(e.substring(1),r,n).neg();for(var o=t.fromNumber(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+c),n);if(c<8){var l=t.fromNumber(Math.pow(n,c));s=s.mul(l).add(t.fromNumber(u))}else s=(s=s.mul(o)).add(t.fromNumber(u))}return s.unsigned=r,s},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(t){return nt(t)&&!0===t.__isLong__},t.fromValue=function(e,r){return"number"==typeof e?t.fromNumber(e,r):"string"==typeof e?t.fromString(e,r):t.fromBits(e.low,e.high,"boolean"==typeof r?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,l=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,f&=65535,l+=(h+=i+c)>>>16,h&=65535,u+=(l+=n+a)>>>16,l&=65535,u+=r+s,u&=65535,t.fromBits(h<<16|f,u<<16|l,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(t){return this.compare(t)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(mt){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var r=(this.unsigned?mt.div_u:mt.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,mt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(n=this.shr(1).div(e).shl(1)).eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),a=s<=48?1:Math.pow(2,s-48),c=t.fromNumber(n),u=c.mul(e);u.isNegative()||u.gt(i);)n-=a,u=(c=t.fromNumber(n,this.unsigned)).mul(e);c.isZero()&&(c=t.ONE),o=o.add(c),i=i.sub(u)}return o},t.prototype.div=function(t){return this.divide(t)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.prototype.eq=function(t){return this.equals(t)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e,r=0!==this.high?this.high:this.low;for(e=31;e>0&&!(r&1<<e);e--);return 0!==this.high?e+33:e+1},t.prototype.greaterThan=function(t){return this.comp(t)>0},t.prototype.gt=function(t){return this.greaterThan(t)},t.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},t.prototype.gte=function(t){return this.greaterThanOrEqual(t)},t.prototype.ge=function(t){return this.greaterThanOrEqual(t)},t.prototype.isEven=function(){return!(1&this.low)},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return!(1&~this.low)},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.lessThan=function(t){return this.comp(t)<0},t.prototype.lt=function(t){return this.lessThan(t)},t.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},t.prototype.lte=function(t){return this.lessThanOrEqual(t)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),mt){var r=(this.unsigned?mt.rem_u:mt.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,mt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(t){return this.modulo(t)},t.prototype.rem=function(t){return this.modulo(t)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),mt){var r=mt.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,mt.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,c=65535&e.high,u=e.low>>>16,l=65535&e.low,h=0,f=0,p=0,d=0;return p+=(d+=s*l)>>>16,d&=65535,f+=(p+=o*l)>>>16,p&=65535,f+=(p+=s*u)>>>16,p&=65535,h+=(f+=i*l)>>>16,f&=65535,h+=(f+=o*u)>>>16,f&=65535,h+=(f+=s*c)>>>16,f&=65535,h+=n*l+i*u+o*c+s*a,h&=65535,t.fromBits(p<<16|d,h<<16|f,this.unsigned)},t.prototype.mul=function(t){return this.multiply(t)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.neq=function(t){return this.notEquals(t)},t.prototype.ne=function(t){return this.notEquals(t)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(t){return this.shiftLeft(t)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(t){return this.shiftRight(t)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}return 32===e?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},t.prototype.shru=function(t){return this.shiftRightUnsigned(t)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(t){return this.subtract(t)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*bt+(this.low>>>0):this.high*bt+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),i=n.mul(r).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,a="";;){var c=s.div(o),u=(s.sub(c.mul(o)).toInt()>>>0).toString(e);if((s=c).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(t){return this.lessThanOrEqual(t)},t.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(16777216),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(wt.prototype,"__isLong__",{value:!0}),Object.defineProperty(wt.prototype,"_bsontype",{value:"Long"});var St=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Et=/^(\+|-)?(Infinity|inf)$/i,At=/^(\+|-)?NaN$/i,It=6111,kt=-6176,Nt=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ot=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Lt=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Rt=/^([-+])?(\d+)?$/;function Ct(t){return!isNaN(parseInt(t,10))}function Bt(t){var e=wt.fromNumber(1e9),r=wt.fromNumber(0);if(!(t.parts[0]||t.parts[1]||t.parts[2]||t.parts[3]))return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new wt(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function Gt(t,e){throw new X('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var Dt=function(){function t(e){if(!(this instanceof t))return new t(e);if("string"==typeof e)this.bytes=t.fromString(e).bytes;else{if(!rt(e))throw new X("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new X("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}return t.fromString=function(e){var r,n=!1,i=!1,o=!1,s=0,a=0,c=0,u=0,l=0,h=[0],f=0,p=0,d=0,g=0,m=0,b=0,y=new wt(0,0),T=new wt(0,0),v=0;if(e.length>=7e3)throw new X(e+" not a valid Decimal128 string");var _=e.match(St),w=e.match(Et),S=e.match(At);if(!_&&!w&&!S||0===e.length)throw new X(e+" not a valid Decimal128 string");if(_){var E=_[2],A=_[4],I=_[5],k=_[6];A&&void 0===k&&Gt(e,"missing exponent power"),A&&void 0===E&&Gt(e,"missing exponent base"),void 0===A&&(I||k)&&Gt(e,"missing e before exponent")}if(("+"===e[v]||"-"===e[v])&&(n="-"===e[v++]),!Ct(e[v])&&"."!==e[v]){if("i"===e[v]||"I"===e[v])return new t(K.from(n?Ot:Lt));if("N"===e[v])return new t(K.from(Nt))}for(;Ct(e[v])||"."===e[v];)"."!==e[v]?(f<34&&("0"!==e[v]||o)&&(o||(l=a),o=!0,h[p++]=parseInt(e[v],10),f+=1),o&&(c+=1),i&&(u+=1),a+=1,v+=1):(i&&Gt(e,"contains multiple periods"),i=!0,v+=1);if(i&&!a)throw new X(e+" not a valid Decimal128 string");if("e"===e[v]||"E"===e[v]){var N=e.substr(++v).match(Rt);if(!N||!N[2])return new t(K.from(Nt));m=parseInt(N[0],10),v+=N[0].length}if(e[v])return new t(K.from(Nt));if(d=0,f){if(g=f-1,1!==(s=c))for(;0===h[l+s-1];)s-=1}else d=0,g=0,h[0]=0,c=1,f=1,s=0;for(m<=u&&u-m>16384?m=kt:m-=u;m>It;){if((g+=1)-d>34){if(h.join("").match(/^0+$/)){m=It;break}Gt(e,"overflow")}m-=1}for(;m<kt||f<c;){if(0===g&&s<f){m=kt,s=0;break}if(f<c?c-=1:g-=1,m<It)m+=1;else{if(h.join("").match(/^0+$/)){m=It;break}Gt(e,"overflow")}}if(g-d+1<s){var O=a;i&&(l+=1,O+=1),n&&(l+=1,O+=1);var L=parseInt(e[l+g+1],10),R=0;if(L>=5&&(R=1,5===L))for(R=h[g]%2==1?1:0,b=l+g+2;b<O;b++)if(parseInt(e[b],10)){R=1;break}if(R)for(var C=g;C>=0;C--)if(++h[C]>9&&(h[C]=0,0===C)){if(!(m<It))return new t(K.from(n?Ot:Lt));m+=1,h[C]=1}}if(y=wt.fromNumber(0),T=wt.fromNumber(0),0===s)y=wt.fromNumber(0),T=wt.fromNumber(0);else if(g-d<17)for(C=d,T=wt.fromNumber(h[C++]),y=new wt(0,0);C<=g;C++)T=(T=T.multiply(wt.fromNumber(10))).add(wt.fromNumber(h[C]));else{for(C=d,y=wt.fromNumber(h[C++]);C<=g-17;C++)y=(y=y.multiply(wt.fromNumber(10))).add(wt.fromNumber(h[C]));for(T=wt.fromNumber(h[C++]);C<=g;C++)T=(T=T.multiply(wt.fromNumber(10))).add(wt.fromNumber(h[C]))}var B=function(t,e){if(!t&&!e)return{high:wt.fromNumber(0),low:wt.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new wt(t.getLowBits(),0),i=e.shiftRightUnsigned(32),o=new wt(e.getLowBits(),0),s=r.multiply(i),a=r.multiply(o),c=n.multiply(i),u=n.multiply(o);return s=s.add(a.shiftRightUnsigned(32)),a=new wt(a.getLowBits(),0).add(c).add(u.shiftRightUnsigned(32)),{high:s=s.add(a.shiftRightUnsigned(32)),low:u=a.shiftLeft(32).add(new wt(u.getLowBits(),0))}}(y,wt.fromString("100000000000000000"));B.low=B.low.add(T),function(t,e){var r=t.high>>>0,n=e.high>>>0;return r<n||r===n&&t.low>>>0<e.low>>>0}(B.low,T)&&(B.high=B.high.add(wt.fromNumber(1))),r=m+6176;var G={low:wt.fromNumber(0),high:wt.fromNumber(0)};B.high.shiftRightUnsigned(49).and(wt.fromNumber(1)).equals(wt.fromNumber(1))?(G.high=G.high.or(wt.fromNumber(3).shiftLeft(61)),G.high=G.high.or(wt.fromNumber(r).and(wt.fromNumber(16383).shiftLeft(47))),G.high=G.high.or(B.high.and(wt.fromNumber(0x7fffffffffff)))):(G.high=G.high.or(wt.fromNumber(16383&r).shiftLeft(49)),G.high=G.high.or(B.high.and(wt.fromNumber(562949953421311)))),G.low=B.low,n&&(G.high=G.high.or(wt.fromString("9223372036854775808")));var D=K.alloc(16);return v=0,D[v++]=255&G.low.low,D[v++]=G.low.low>>8&255,D[v++]=G.low.low>>16&255,D[v++]=G.low.low>>24&255,D[v++]=255&G.low.high,D[v++]=G.low.high>>8&255,D[v++]=G.low.high>>16&255,D[v++]=G.low.high>>24&255,D[v++]=255&G.high.low,D[v++]=G.high.low>>8&255,D[v++]=G.high.low>>16&255,D[v++]=G.high.low>>24&255,D[v++]=255&G.high.high,D[v++]=G.high.high>>8&255,D[v++]=G.high.high>>16&255,D[v++]=G.high.high>>24&255,new t(D)},t.prototype.toString=function(){for(var t,e=0,r=new Array(36),n=0;n<r.length;n++)r[n]=0;var i,o,s,a=0,c=!1,u={parts:[0,0,0,0]},l=[];a=0;var h=this.bytes,f=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24,p=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24,d=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24,g=h[a++]|h[a++]<<8|h[a++]<<16|h[a++]<<24;a=0,(new wt(f,p),new wt(d,g)).lessThan(wt.ZERO)&&l.push("-");var m=g>>26&31;if(m>>3==3){if(30===m)return l.join("")+"Infinity";if(31===m)return"NaN";t=g>>15&16383,i=8+(g>>14&1)}else i=g>>14&7,t=g>>17&16383;var b=t-6176;if(u.parts[0]=(16383&g)+((15&i)<<14),u.parts[1]=d,u.parts[2]=p,u.parts[3]=f,0===u.parts[0]&&0===u.parts[1]&&0===u.parts[2]&&0===u.parts[3])c=!0;else for(s=3;s>=0;s--){var y=0,T=Bt(u);if(u=T.quotient,y=T.rem.low)for(o=8;o>=0;o--)r[9*s+o]=y%10,y=Math.floor(y/10)}if(c)e=1,r[a]=0;else for(e=36;!r[a];)e-=1,a+=1;var v=e-1+b;if(v>=34||v<=-7||b>0){if(e>34)return l.push("".concat(0)),b>0?l.push("E+".concat(b)):b<0&&l.push("E".concat(b)),l.join("");for(l.push("".concat(r[a++])),(e-=1)&&l.push("."),n=0;n<e;n++)l.push("".concat(r[a++]));l.push("E"),v>0?l.push("+".concat(v)):l.push("".concat(v))}else if(b>=0)for(n=0;n<e;n++)l.push("".concat(r[a++]));else{var _=e+b;if(_>0)for(n=0;n<_;n++)l.push("".concat(r[a++]));else l.push("0");for(l.push(".");_++<0;)l.push("0");for(n=0;n<e-Math.max(_-1,0);n++)l.push("".concat(r[a++]))}return l.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(Dt.prototype,"_bsontype",{value:"Decimal128"});var Pt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},t}();Object.defineProperty(Pt.prototype,"_bsontype",{value:"Double"});var xt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=0|+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty(xt.prototype,"_bsontype",{value:"Int32"});var Ut=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(Ut.prototype,"_bsontype",{value:"MaxKey"});var Mt=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(Mt.prototype,"_bsontype",{value:"MinKey"});var jt=new RegExp("^[0-9a-fA-F]{24}$"),$t=null,Ht=Symbol("id"),qt=function(){function t(e){if(!(this instanceof t))return new t(e);var r;if("object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new X("Argument passed in must have an id that is of type string or Buffer");r="toHexString"in e&&"function"==typeof e.toHexString?K.from(e.toHexString(),"hex"):e.id}else r=e;if(null==r||"number"==typeof r)this[Ht]=t.generate("number"==typeof r?r:void 0);else if(ArrayBuffer.isView(r)&&12===r.byteLength)this[Ht]=r instanceof K?r:ot(r);else{if("string"!=typeof r)throw new X("Argument passed in does not match the accepted types");if(12===r.length){var n=K.from(r);if(12!==n.byteLength)throw new X("Argument passed in must be a string of 12 bytes");this[Ht]=n}else{if(24!==r.length||!jt.test(r))throw new X("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[Ht]=K.from(r,"hex")}}t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[Ht]},set:function(e){this[Ht]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));var r=t.getInc(),n=K.alloc(12);return n.writeUInt32BE(e,0),null===$t&&($t=et(5)),n[4]=$t[0],n[5]=$t[1],n[6]=$t[2],n[7]=$t[3],n[8]=$t[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(null==e)return!1;if(e instanceof t)return this[Ht][11]===e[Ht][11]&&this[Ht].equals(e[Ht]);if("string"==typeof e&&t.isValid(e)&&12===e.length&&rt(this.id))return e===K.prototype.toString.call(this.id,"latin1");if("string"==typeof e&&t.isValid(e)&&24===e.length)return e.toLowerCase()===this.toHexString();if("string"==typeof e&&t.isValid(e)&&12===e.length)return K.from(e).equals(this.id);if("object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString){var r=e.toHexString(),n=this.toHexString().toLowerCase();return"string"==typeof r&&r.toLowerCase()===n}return!1},t.prototype.getTimestamp=function(){var t=new Date,e=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(e)),t},t.createPk=function(){return new t},t.createFromTime=function(e){var r=K.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(typeof e>"u"||null!=e&&24!==e.length)throw new X("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(K.from(e,"hex"))},t.isValid=function(e){if(null==e)return!1;try{return new t(e),!0}catch{return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(16777215*Math.random()),t}();Object.defineProperty(qt.prototype,"generate",{value:it((function(t){return qt.generate(t)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(qt.prototype,"getInc",{value:it((function(){return qt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(qt.prototype,"get_inc",{value:it((function(){return qt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(qt,"get_inc",{value:it((function(){return qt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(qt.prototype,"_bsontype",{value:"ObjectID"});var Ft=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.pattern=e,this.options=function(t){return t.split("").sort().join("")}(r??""),-1!==this.pattern.indexOf("\0"))throw new J("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(-1!==this.options.indexOf("\0"))throw new J("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new J("The regular expression option [".concat(this.options[n],"] is not supported"))}return t.parseOptions=function(t){return t?t.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e){if("string"==typeof e.$regex)return new t(e.$regex,t.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new X("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(Ft.prototype,"_bsontype",{value:"BSONRegExp"});var Vt=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(Vt.prototype,"_bsontype",{value:"Symbol"});var Wt=function(t){function e(r,n){var i=this;return i instanceof e?(i=wt.isLong(r)?t.call(this,r.low,r.high,!0)||this:nt(r)&&typeof r.t<"u"&&typeof r.i<"u"?t.call(this,r.i,r.t,!0)||this:t.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new e(r,n)}return Y(e,t),e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(t){return new e(wt.fromInt(t,!0))},e.fromNumber=function(t){return new e(wt.fromNumber(t,!0))},e.fromBits=function(t,r){return new e(t,r)},e.fromString=function(t,r){return new e(wt.fromString(t,!0,r))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(t){return new e(t.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=wt.MAX_UNSIGNED_VALUE,e}(wt),Kt=2147483647,zt=-2147483648,Yt=0x8000000000000000,Jt=-0x8000000000000000,Xt={$oid:qt,$binary:ft,$uuid:ft,$symbol:Vt,$numberInt:xt,$numberDecimal:Dt,$numberDouble:Pt,$numberLong:wt,$minKey:Mt,$maxKey:Ut,$regex:Ft,$regularExpression:Ft,$timestamp:Wt};function Zt(t,e){if(void 0===e&&(e={}),"number"==typeof t){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=zt&&t<=Kt)return new xt(t);if(t>=Jt&&t<=Yt)return wt.fromNumber(t)}return new Pt(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter((function(e){return e.startsWith("$")&&null!=t[e]})),n=0;n<r.length;n++){var i=Xt[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(null!=t.$date){var o=t.$date,s=new Date;return e.legacy?"number"==typeof o?s.setTime(o):"string"==typeof o&&s.setTime(Date.parse(o)):"string"==typeof o?s.setTime(Date.parse(o)):wt.isLong(o)?s.setTime(o.toNumber()):"number"==typeof o&&e.relaxed&&s.setTime(o),s}if(null!=t.$code){var a=Object.assign({},t);return t.$scope&&(a.$scope=Zt(t.$scope)),dt.fromExtendedJSON(t)}if(function(t){return nt(t)&&null!=t.$id&&"string"==typeof t.$ref&&(null==t.$db||"string"==typeof t.$db)}(t)||t.$dbPointer){var c=t.$ref?t:t.$dbPointer;if(c instanceof gt)return c;var u=Object.keys(c).filter((function(t){return t.startsWith("$")})),l=!0;if(u.forEach((function(t){-1===["$ref","$id","$db"].indexOf(t)&&(l=!1)})),l)return gt.fromExtendedJSON(c)}return t}function Qt(t){var e=t.toISOString();return 0!==t.getUTCMilliseconds()?e:e.slice(0,-5)+"Z"}function te(t,e){if(("object"==typeof t||"function"==typeof t)&&null!==t){var r=e.seenObjects.findIndex((function(e){return e.obj===t}));if(-1!==r){var n=e.seenObjects.map((function(t){return t.propertyName})),i=n.slice(0,r).map((function(t){return"".concat(t," -> ")})).join(""),o=n[r],s=" -> "+n.slice(r+1,n.length-1).map((function(t){return"".concat(t," -> ")})).join(""),a=n[n.length-1],c=" ".repeat(i.length+o.length/2),u="-".repeat(s.length+(o.length+a.length)/2-1);throw new X("Converting circular structure to EJSON:\n"+"    ".concat(i).concat(o).concat(s).concat(a,"\n")+"    ".concat(c,"\\").concat(u,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return function(t,e){return t.map((function(t,r){e.seenObjects.push({propertyName:"index ".concat(r),obj:null});try{return te(t,e)}finally{e.seenObjects.pop()}}))}(t,e);if(void 0===t)return null;if(t instanceof Date||function(t){return nt(t)&&"[object Date]"===Object.prototype.toString.call(t)}(t)){var l=t.getTime(),h=l>-1&&l<2534023188e5;return e.legacy?e.relaxed&&h?{$date:t.getTime()}:{$date:Qt(t)}:e.relaxed&&h?{$date:Qt(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(!("number"!=typeof t||e.relaxed&&isFinite(t))){if(Math.floor(t)===t){var f=t>=Jt&&t<=Yt;if(t>=zt&&t<=Kt)return{$numberInt:t.toString()};if(f)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)){var p=t.flags;if(void 0===p){var d=t.toString().match(/[gimuy]*$/);d&&(p=d[0])}return new Ft(t.source,p).toExtendedJSON(e)}return null!=t&&"object"==typeof t?function(t,e){if(null==t||"object"!=typeof t)throw new J("not an object instance");var r=t._bsontype;if(typeof r>"u"){var n={};for(var i in t){e.seenObjects.push({propertyName:i,obj:null});try{var o=te(t[i],e);"__proto__"===i?Object.defineProperty(n,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):n[i]=o}finally{e.seenObjects.pop()}}return n}if(function(t){return nt(t)&&Reflect.has(t,"_bsontype")&&"string"==typeof t._bsontype}(t)){var s=t;if("function"!=typeof s.toExtendedJSON){var a=re[t._bsontype];if(!a)throw new X("Unrecognized or invalid _bsontype: "+t._bsontype);s=a(s)}return"Code"===r&&s.scope?s=new dt(s.code,te(s.scope,e)):"DBRef"===r&&s.oid&&(s=new gt(te(s.collection,e),te(s.oid,e),te(s.db,e),te(s.fields,e))),s.toExtendedJSON(e)}throw new J("_bsontype must be a string, but was: "+typeof r)}(t,e):t}var ee,re={Binary:function(t){return new ft(t.value(),t.sub_type)},Code:function(t){return new dt(t.code,t.scope)},DBRef:function(t){return new gt(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new Dt(t.bytes)},Double:function(t){return new Pt(t.value)},Int32:function(t){return new xt(t.value)},Long:function(t){return wt.fromBits(null!=t.low?t.low:t.low_,null!=t.low?t.high:t.high_,null!=t.low?t.unsigned:t.unsigned_)},MaxKey:function(){return new Ut},MinKey:function(){return new Mt},ObjectID:function(t){return new qt(t)},ObjectId:function(t){return new qt(t)},BSONRegExp:function(t){return new Ft(t.pattern,t.options)},Symbol:function(t){return new Vt(t.value)},Timestamp:function(t){return Wt.fromBits(t.low,t.high)}};!function(t){function e(t,e){var r=Object.assign({},{relaxed:!0,legacy:!1},e);return"boolean"==typeof r.relaxed&&(r.strict=!r.relaxed),"boolean"==typeof r.strict&&(r.relaxed=!r.strict),JSON.parse(t,(function(t,e){if(-1!==t.indexOf("\0"))throw new J("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(t)));return Zt(e,r)}))}function r(t,e,r,n){null!=r&&"object"==typeof r&&(n=r,r=0),null!=e&&"object"==typeof e&&!Array.isArray(e)&&(n=e,e=void 0,r=0);var i=te(t,Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(i,e,r)}t.parse=e,t.stringify=r,t.serialize=function(t,e){return e=e||{},JSON.parse(r(t,e))},t.deserialize=function(t,r){return r=r||{},e(JSON.stringify(t),r)}}(ee||(ee={}));var ne=Q();ne.Map?ne.Map:function(){function t(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var e=0;e<t.length;e++)if(null!=t[e]){var r=t[e],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}}t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(t){var e=this._values[t];return null!=e&&(delete this._values[t],this._keys.splice(e.i,1),!0)},t.prototype.entries=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?[r,t._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(t,e){e=e||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];t.call(e,this._values[n].v,n,e)}},t.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},t.prototype.has=function(t){return null!=this._values[t]},t.prototype.keys=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(t,e){return this._values[t]?(this._values[t].v=e,this):(this._keys.push(t),this._values[t]={v:e,i:this._keys.length-1},this)},t.prototype.values=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?t._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0})}(),wt.fromNumber(lt),wt.fromNumber(ht);var ie=new Uint8Array(8);function oe(){return(new qt).toString()}function se(t){return{...t,_id:oe()}}function ae(t){return t._user&&delete t._user,{...t}}function ce(t){return t.lastSync&&delete t.lastSync,{...t}}new DataView(ie.buffer,ie.byteOffset,ie.byteLength),K.alloc(17825792);var ue=(t=>(t["most-liked"]="most-liked",t.newest="newest",t))(ue||{});Object.keys(ue);const le="createdAt";function he(t,e,r="asc",n){return((e[n]??e[le]??0)-(t[n]??t[le]??0))*("desc"===r?-1:1)}function fe(t,e){return t.localeCompare(e,"en",{sensitivity:"base"})}function pe(t,e){return fe(t.name,e.name)}function de(t,e){return fe(t.name,e.name)}const ge=(t,e)=>e.count-t.count,me=(t,e)=>e.matchScore!==t.matchScore?e.matchScore-t.matchScore:e.matchScore<60||t.matchScore<60?ge(t,e):0;var be=(t=>(t.BLOCKQUOTE="blockquote",t.PARAGRAPH="paragraph",t.HEADING_1="heading1",t.HEADING_2="heading2",t.HEADING_3="heading3",t.BULLET_LIST_ITEM="bulletListItem",t.IMAGE="image",t.CODE="code",t))(be||{});function ye(){var t;return!(typeof globalThis>"u")&&"navigator"in globalThis&&(null==(t=globalThis.navigator.userAgent)?void 0:t.toLowerCase().includes("firefox"))}Object.values(be);const Te=["http://","https://","http://www.","https://www.","www."],ve=["web-highlights.com","pre.web-highlights.com","localhost:2000"],_e=["app.web-highlights.com","pre-app.web-highlights.com","localhost:5173"],we=Te.map((t=>ve.map((e=>`${t}${e}/discover`)))).flat(1),Se=["guid","bookguid","openid.claimed_id","ref_","page","jk","vjk","file","uri","pageId"],Ee=["#/epubreader?bookguid=","#/notes/"],Ae=["/watch","/search"],Ie=Te.map((t=>_e.map((e=>`${t}${e}`)))).flat(1),ke=(Te.map((t=>ve.map((e=>`${t}${e}`)))).flat(1),["localhost:8080/defaultblacklisted","localhost:8080/defaultblacklistedWildcard/*","newtab/*","extensions/*","drive.google.com/*","docs.google.com/*","medium.com/new-story/*","medium.com/p/[^/]+/edit","photos.google.com/*","accounts.google.com/*","calendar.google.com/*","chrome.google.com/webstore/*","webhighlights.firebaseapp.com/*","paypal.com/*","slack.com/*","office.com/*","onedrive.live.com/*","yahoo.com/*","firebase.google.com/*","feedly.com/*","typeform.com/*","pornhub.com/*","redtube.com/*","youporn.com/*","com/*","com/*","com/*","tube8.com/*","xvideos.com/*","xnxx.com/*"]),Ne=t=>Oe(t)?je(t):Re(t)?t:`(${null==t?void 0:t.split("#")[0].split("?")[0]})(\\s|#|\\?[\\w]{1,}|\\/(\\s)|\\/(#)|($))`;function Oe(t){try{const e=new URL(t);return Be(e.href)||Se.some((t=>e.searchParams.has(t)))}catch{return!1}}function Le(t){try{const e=new URL(t);return Ee.some((t=>e.hash.includes(t)))}catch{return!1}}function Re(t){try{const e=new URL(t);return Ae.some((t=>e.href.toLowerCase().includes(t.toLowerCase())))}catch{return Ae.some((e=>t.toLowerCase().includes(e.toLowerCase())))}}function Ce(t){return decodeURIComponent(t).split("?file=")[1]??""}function Be(t){return!!De(t)&&Ge(t)}function Ge(t){const e=t.includes("viewer.html?file="),r=!!Ce(t);return e&&r}function De(t){return(null==t?void 0:t.startsWith("chrome-extension://"))||t.startsWith("http://localhost:8082")}function Pe(t){De(t)&&(t=t.split("?file=")[1]??"");try{const e=new URL(t);return((null==e?void 0:e.pathname)||"").endsWith(".pdf")||function(){var t;if(typeof window>"u"||typeof document>"u")return!1;const e=null==(t=null==document?void 0:document.body)?void 0:t.firstChild;return"EMBED"===(null==e?void 0:e.tagName)&&"application/pdf"===(null==e?void 0:e.getAttribute("type"))}()}catch{return!1}}function xe(t){return(t=null==(t=function(t){return(null==t?void 0:t.replace(/https:\/\/|http:\/\/|www.|/gi,""))??""}(t))?void 0:t.split("/")[0])??""}const Ue=t=>Ie.some((e=>t.startsWith(e)))||(t=>we.some((e=>t.startsWith(e))))(t);function Me(t,e){return null==t?void 0:t.replaceAll(" ","+").replaceAll("%20",e)}function je(t){try{const e=new URL(t),r=new URLSearchParams(e.search);return Array.from(r.keys()).filter((t=>!Se.includes(t))).forEach((t=>r.delete(t))),e.search=r.toString(),e.toString().toLowerCase()}catch{return t.toLowerCase()}}function $e(t){if(!t)return-1;if(0===t.repetitions)return 3;if(t.disableLearning)return 0;const e=(t.easinessFactor-1.3)/(3.2-1.3),r=(0===e?0:.1)*(6-Math.min(t.repetitions,6)),n=Math.abs(r-e),i=r>e&&t.repetitions>1?e-r/t.repetitions:n<.08?e/2.5:e-r,o=Math.max(i,0),s=Math.round(100*o);return Math.min(s,100)}function He(t){return t>=80?"Long-Term Memory":t>=60&&t<80?"Confident Recall":t>=40&&t<60?"Moderate Recall":t>=20&&t<40?"Short-Term Memory":t>=0&&t<20?"New Knowledge":"Not Yet Learned"}const qe={"Long-Term Memory":{id:"Long-Term Memory",isActive:t=>!(null!=t&&t.disableLearning)&&"Long-Term Memory"===He($e(t)),label:"Long-Term Memory",color:"#46B446"},"Confident Recall":{id:"Confident Recall",isActive:t=>!(null!=t&&t.disableLearning)&&"Confident Recall"===He($e(t)),label:"Confident Recall",color:"#A9B935"},"Moderate Recall":{id:"Moderate Recall",isActive:t=>!(null!=t&&t.disableLearning)&&"Moderate Recall"===He($e(t)),label:"Good Recall",color:"#E9C63A"},"Short-Term Memory":{id:"Short-Term Memory",isActive:t=>!(null!=t&&t.disableLearning)&&"Short-Term Memory"===He($e(t)),label:"Moderate Recall",color:"#E79E3D"},"New Knowledge":{id:"New Knowledge",isActive:t=>!(null!=t&&t.disableLearning)&&"New Knowledge"===He($e(t)),label:"Likely to forget",color:"#DB4646"},"Not Yet Learned":{id:"Not Yet Learned",isActive:t=>!(null!=t&&t.disableLearning)&&"Not Yet Learned"===He($e(t)),label:"Not Yet Learned",color:"#ccc"},Discarded:{id:"Discarded",isActive:t=>!(null==t||!t.disableLearning),label:"Discarded",color:"#555555"}};function Fe(t){var e,r,n,i;const o=new Date(Date.now()),s=new Date((null==(e=t.learningItem)?void 0:e.nextReviewInMillis)??0),a=new Date((null==(r=t.learningItem)?void 0:r.lastLearned)??0);return!(null!=(n=null==t?void 0:t.learningItem)&&n.disableLearning)&&!(null==(i=null==t?void 0:t.learningItem)||!i.nextReviewInMillis)&&s.getTime()<o.getTime()&&a.toDateString()!==o.toDateString()}Object.values(qe);const Ve=(t,e)=>({name:t,count:(null==e?void 0:e.filter((e=>e.toLowerCase()===t.toLowerCase())).length)??0}),We=(t,e)=>{const r=[...t.map((t=>t.tags??[])).flat(1),...e.map((t=>t.tags??[])).flat(1)];return[...new Set(r)].map((t=>Ve(t,r))).sort(pe)};function Ke(t,e){return(Array.isArray(e)?e:[]).reduce(((e,r)=>{if("string"!=typeof r)return e;try{return e[r=r.split(" ").join("")]=`${t}-${r}`,e}catch{return e}}),{})}var ze,Ye,Je,Xe,Ze;(t=>{const e=class{};l(e,"TAG","AppSidebar"),l(e,"TEST_IDS",{...Ke(e.TAG,["SIDEBAR_CONTAINER","MAIN_NAV_DASHBOARD_BTN","MAIN_NAV_LEARNING_BTN","MAIN_NAV_SEARCH_BTN","MAIN_NAV_DISCOVER_BTN","MAIN_NAV_UPGRADE_BTN","FOOTER_NAV_SETTINGS_BTN","FOOTER_NAV_CHANGE_COLOR","FOOTER_NAV_LEARNING","FOOTER_NAV_LOGOUT","TAGS_VIEW","ORIGINS_VIEW","COLORS_VIEW","IMAGES_VIEW","TRIAL_WARNING","TRIAL_INFO"]),GRID_VIEW_BTN:t=>`GRID_VIEW_BTN-${t}`,GRID_VIEW_BTN_BADGE:t=>`GRID_VIEW_BTN_BADGE-${t}`});let r=e;t.AppSidebar=r;const n=class{};l(n,"TAG","AppLayout"),l(n,"TEST_IDS",Ke(n.TAG,["MOBILE_NAV","MOBILE_MENU_SIDEBAR_BTN","MOBILE_MENU_SEARCH_BTN","MOBILE_MENU_LEARNING_BTN","MOBILE_MENU_HOME_BTN"]));let i=n;t.AppLayout=i;const o=class{};l(o,"TAG","ImportView"),l(o,"TEST_IDS",{...Ke(o.TAG,["NO_URL","ERROR_TITLE","ERROR_DESCRIPTION","LOADING"])});let s=o;t.ImportView=s;const a=class{};l(a,"TAG","TagsOverviewComponent"),l(a,"TEST_IDS",{...Ke(a.TAG,["TAG"])});let c=a;t.TagsOverviewComponent=c;const u=class{};l(u,"TAG","WebsitesOverviewComponent"),l(u,"TEST_IDS",{...Ke(u.TAG,["TAG"])});let h=u;t.WebsitesOverviewComponent=h})(ze||(ze={})),(t=>{const e=class{};l(e,"TAG","ExtensionDevPage"),l(e,"TEST_IDS",{...Ke(e.TAG,["TOGGLE_SIDEBAR_BTN","HIGHLIGHT_IMAGE_1","HIGHLIGHT_IMAGE_2"]),SHORTCUT_BTN:t=>`${e.TAG}_shortcut_btn_${t}`});let r=e;t.ExtensionDevPage=r;const n=class{};l(n,"TAG","webhighlights-demo"),l(n,"TEST_IDS",Ke(n.TAG,[""]));let i=n;t.Demo=i})(Ye||(Ye={})),(t=>{const e=class{};l(e,"TAG","webhighlights-element-registry"),l(e,"TEST_IDS",Ke(e.TAG,[""]));let r=e;t.ElementRegistry=r;const n=class{};l(n,"TAG","webhighlights-image-indicator"),l(n,"TEST_IDS",Ke(n.TAG,[])),l(n,"CLASSES",{IMAGE_HIGHLIGHT_INDICATOR_CLASS:"webhighlights-image-indicator"});let i=n;t.ImageIndicator=i})(Je||(Je={})),(t=>{const e=class{};l(e,"TAG","webhighlights-browser-action-mock"),l(e,"TEST_IDS",Ke(e.TAG,["HIGHLIGHT_IMAGE_2"]));let r=e;t.BrowserActionMock=r;const n=class{};l(n,"TAG","webhighlights-kindle-import-helper"),l(n,"TEST_IDS",Ke(n.TAG,[]));let i=n;t.KindleImportHelper=i;const o=class{};l(o,"TAG","webhighlights-marker"),l(o,"TEST_IDS",Ke(o.TAG,["POPUP_TOOLBOX"]));let s=o;t.Marker=s;const a=class{};l(a,"TAG","webhighlights-highlighter"),l(a,"TEST_IDS",Ke(a.TAG,["HIGHLIGHT_BTN","HIGHLIGHT_ICON","SETTINGS_ICON_BTN"]));let c=a;t.Highlighter=c;const u=class{};l(u,"TAG","webhighlights-mellowtel-dialog"),l(u,"TEST_IDS",Ke(u.TAG,["TITLE","OPT_IN_BTN","OPT_OUT_BTN"]));let h=u;t.MellowtelDialog=h;const f=class{};l(f,"TAG","webhighlights-notifications-pdf"),l(f,"TEST_IDS",Ke(f.TAG,[]));let p=f;t.NotificationsPdf=p;class d{}l(d,"TAG","webhighlights-popup-toolbox"),l(d,"TEST_IDS",{}),t.PopupToolbox=d;const g=class{};l(g,"TAG","webhighlights-popup-toolbox-menu"),l(g,"TEST_IDS",Ke(g.TAG,["MENU_CONTAINER","MARK_ELEMENT_TOOLBAR"]));let m=g;t.PopupToolboxMenu=m;const b=class{};l(b,"TAG","webhighlights-sidebar"),l(b,"TEST_IDS",Ke(b.TAG,["MAIN_COMPONENT"]));let y=b;t.Sidebar=y;const T=class{};l(T,"TAG","action-toolbar"),l(T,"TEST_IDS",Ke(T.TAG,["DELETE_BTN"]));let v=T;t.ActionToolbar=v;const _=class{};l(_,"TAG","webhighlights-column-resizer"),l(_,"TEST_IDS",Ke(_.TAG,[]));let w=_;t.ColumnResizerComponent=w;const S=class{};l(S,"TAG","webhighlights-domains-view"),l(S,"TEST_IDS",{...Ke(S.TAG,["SEARCH_INPUT"])});let E=S;t.DomainsView=E;const A=class{};l(A,"TAG","webhighlights-filtered-overview"),l(A,"TEST_IDS",{...Ke(A.TAG,["TAGS_CONTAINER","BOOKMARKS_CONTAINER","MARKS_CONTAINER","RELATED_TAGS"])});let I=A;t.FilteredOverview=I;const k=class{};l(k,"TAG","webhighlights-header-toggle"),l(k,"TEST_IDS",{...Ke(k.TAG,["CONTAINER","ACCORDIAN_VIEW_BTN","TAGS_VIEW_BTN","DOMAINS_VIEW_BTN","MARK_VIEW_BTN","SEARCH_BTN"])});let N=k;t.HeaderToggle=N;const O=class{};l(O,"TAG","webhighlights-header-toolbox"),l(O,"TEST_IDS",{...Ke(O.TAG,["CONTAINER","NOTIFICATIONS_BTN","NOTIFICATIONS_BADGE"])});let L=O;t.HeaderToolbox=L;const R=class{};l(R,"TAG","webhighlights-history-view"),l(R,"TEST_IDS",{...Ke(R.TAG,["SEARCH_INPUT"])});let C=R;t.HistoryOverviewView=C;const B=class{};l(B,"TAG","webhighlights-main-component"),l(B,"TEST_IDS",Ke(B.TAG,["IS_BLACKLISTED_INFO","SIGN_UP_EMPTY_INFO","BOOKMARK_DETAILS","BOOKMARK_DETAILS_POPOVER","POPOVER","EMPTY_STATE_CONTAINER","TOGGLE_SIDEBAR_BTN","BADGE_INDICATOR","RECENTLY_UPDATED_CONTAINER"]));let G=B;t.MainComponentPage=G;const D=class{};l(D,"TAG","webhighlights-mark-badge"),l(D,"TEST_IDS",Ke(D.TAG,[]));let P=D;t.MarkBadge=P;const x=class{};l(x,"TAG","webhighlights-overview-empty-state"),l(x,"TEST_IDS",Ke(x.TAG,[]));let U=x;t.MarkOverviewEmptyState=U;const M=class{};l(M,"TAG","webhighlights-shortcut-overview"),l(M,"TEST_IDS",Ke(M.TAG,[]));let j=M;t.ShortcutOverview=j;const $=class{};l($,"TAG","webhighlights-sidebar-footer"),l($,"TEST_IDS",Ke($.TAG,["SETTINGS_ICON","LEARN_BTN","SHORTCUT_BTN","LEARN_BTN_BADGE","DASHBOARD_LINK","BLACKLIST_TOGGLE_BTN","UPGRADE_BTN"]));let H=$;t.SidebarFooter=H;const q=class{};l(q,"TAG","webhighlights-sidebar-options"),l(q,"TEST_IDS",Ke(q.TAG,[]));let F=q;t.SidebarOptionsComponent=F;const V=class{};l(V,"TAG","webhighlights-tags-view"),l(V,"TEST_IDS",{...Ke(V.TAG,["SEARCH_INPUT"])});let W=V;t.TagsView=W;const K=class{};l(K,"TAG","webhighlights-selected-tag-view"),l(K,"TEST_IDS",{...Ke(K.TAG,["SELECTED_TAG_INFO"])});let z=K;t.SelectedTagView=z;const Y=class{};l(Y,"TAG","webhighlights-selected-domain-view"),l(Y,"TEST_IDS",{...Ke(Y.TAG,["SELECTED_TAG_INFO"])});let J=Y;t.SelectedDomainView=J;const X=class{};l(X,"TAG","webhighlights-pdf-local-file-info"),l(X,"TEST_IDS",Ke(X.TAG,[]));let Z=X;t.PdfLocalFileInfo=Z;const Q=class{};l(Q,"TAG","webhighlights-text-notification"),l(Q,"TEST_IDS",Ke(Q.TAG,[]));let tt=Q;t.TextNotification=tt})(Xe||(Xe={})),(t=>{const e=class{};l(e,"TAG","webhighlights-account-info"),l(e,"TEST_IDS",{...Ke(e.TAG,["ACCOUNT_INFO","USER_NAME","AVATAR","EMAIL"])});let r=e;t.AccountInfo=r;const n=class{};l(n,"TAG","webhighlights-auth"),l(n,"TEST_IDS",Ke(n.TAG,["AUTH_TYPE_SWITCH_BTN","TOS_PRIVACY_INFO","TITLE"]));let i=n;t.Auth=i;const o=class{};l(o,"TAG","webhighlights-avatar"),l(o,"TEST_IDS",Ke(o.TAG,["POPUP_TOOLBOX"]));let s=o;t.Avatar=s;const a=class{};l(a,"TAG","webhighlights-backup-or-sync-prompt"),l(a,"TEST_IDS",{...Ke(a.TAG,["CTA_BACKUP","CTA_SYNC","BACKUP_INTERVAL_INPUT","DISMISS_CHECKBOX_INPUT"])});let c=a;t.BackupOrSyncPrompt=c;const u=class{};l(u,"TAG","webhighlights-blacklisted-urls"),l(u,"TEST_IDS",{...Ke(u.TAG,["ADD_URL_INPUT","ADD_URL_BTN"]),LIST_ENTRY:t=>`${u.TAG}-LIST_ENTRY_${t}`,INPUT_VALUE:t=>`${u.TAG}-INPUT_VALUE_${t}`,DELETE_BTN:t=>`${u.TAG}-DELETE_BTN_${t}`});let h=u;t.BlacklistesUrls=h;const f=class{};l(f,"TAG","webhighlights-bookmark"),l(f,"TEST_IDS",Ke(f.TAG,["HIGHLIGHT_AND_NOTES_INFO","FOOTER","FOOTER_TAGS_CONTAINER","FOOTER_TAG"]));let p=f;t.Bookmark=p;const d=class{};l(d,"TAG","webhighlights-bookmark-details"),l(d,"TEST_IDS",Ke(d.TAG,[]));let g=d;t.BookmarkDetails=g;const m=class{};l(m,"TAG","webhighlights-bookmark-explore-toolbar"),l(m,"TEST_IDS",Ke(m.TAG,[""]));let b=m;t.BookmarkExploreToolbar=b;const y=class{};l(y,"TAG","webhighlights-bookmark-header"),l(y,"TEST_IDS",Ke(y.TAG,["AVATAR","USER_NAME","REMINDER","SHARE_BTN"]));let T=y;t.BookmarkHeader=T;const v=class{};l(v,"TAG","webhighlights-bookmark-likes"),l(v,"TEST_IDS",Ke(v.TAG,["USER_LIKE_INFO","AVATAR"]));let _=v;t.BookmarkLikes=_;const w=class{};l(w,"TAG","webhighlights-bookmark-preview"),l(w,"TEST_IDS",Ke(w.TAG,["PREVIEW_ITEM"]));let S=w;t.BookmarkPreview=S;const E=class{};l(E,"TAG","webhighlights-bookmark-preview-highlights-notes-info"),l(E,"TEST_IDS",{...Ke(E.TAG,["BADGE_HIGHLIGHTS","BADGE_NOTES"])});let A=E;t.BookmarkPreviewHighlightsNotesInfo=A;const I=class{};l(I,"TAG","webhighlights-change-color-mode"),l(I,"TEST_IDS",Ke(I.TAG,[]));let k=I;t.ChangeColorMode=k;const N=class{};l(N,"TAG","webhighlights-chrome-rating-prompt"),l(N,"TEST_IDS",{...Ke(N.TAG,["DECLINE_BTN","CONFIRM_BTN","CHROME_STORE_LINK"])});let O=N;t.ChromeRatingPrompt=O;const L=class{};l(L,"TAG","webhighlights-chrome-settings"),l(L,"TEST_IDS",{...Ke(L.TAG,[])});let C=L;t.ChromeSettings=C;const B=class{};l(B,"TAG","webhighlights-clipboard-button"),l(B,"TEST_IDS",Ke(B.TAG,[""]));let G=B;t.ClipboardButton=G;const D=class{};l(D,"TAG","webhighlights-color-picker"),l(D,"TEST_IDS",Ke(D.TAG,[""]));let P=D;t.ColorPicker=P;const x=class{};l(x,"TAG","webhighlights-datetimepicker"),l(x,"TEST_IDS",Ke(x.TAG,["PREVIEW_TEXT","DATE_INPUT","HOUR_INPUT","MINUTE_INPUT","CANCEL_BTN","CONFIRM_BTN"]));let U=x;t.DatetimePicker=U;const M=class{};l(M,"TAG","webhighlights-dialog"),l(M,"TEST_IDS",{...Ke(M.TAG,[])});let j=M;t.Dialog=j;const $=class{};l($,"TAG","webhighlights-discount-info"),l($,"TEST_IDS",Ke($.TAG,["TEXT","AVATAR"]));let H=$;t.DiscountInfo=H;const q=class{};l(q,"TAG","webhighlights-discover-feed-info"),l(q,"TEST_IDS",{...Ke(q.TAG,[])});let F=q;t.DiscoverFeedInfo=F;const V=class{};l(V,"TAG","webhighlights-dots-menu"),l(V,"TEST_IDS",{...Ke(V.TAG,["BTN"]),DROPDOWN_ITEM:t=>`${V.TAG}-dropdown-item-${t}`});let W=V;t.DotsMenu=W;const K=class{};l(K,"TAG","webhighlights-entity-grid"),l(K,"TEST_IDS",Ke(K.TAG,[]));let z=K;t.EntityGrid=z;const Y=class{};l(Y,"TAG","webhighlights-expiry-info"),l(Y,"TEST_IDS",Ke(Y.TAG,["EXPIRY_INFO","CTA_TEXT","CTA_BTN","BEFORE_MARCH_25_INFO"]));let J=Y;t.ExpiryInfo=J;const X=class{};l(X,"TAG","webhighlights-fallback-img"),l(X,"TEST_IDS",{...Ke(X.TAG,[])});let Z=X;t.FallbackImage=Z;const Q=class{};l(Q,"TAG","webhighlights-favicon"),l(Q,"TEST_IDS",Ke(Q.TAG,["image"]));let tt=Q;t.Favicon=tt;const et=class{};l(et,"TAG","webhighlights-grid"),l(et,"TEST_IDS",Ke(et.TAG,["PAGES_COUNT_BADGE","HIGHLIGHTS_COUNT_BADGE","SWITCH_TO_HIGHLIGHTS","SWITCH_TO_PAGES","PAGINATION_STEP_BTN","PAGINATION_STEP_PREV_BTN","PAGINATION_STEP_NEXT_BTN","PAGINATION_INFO"]));let rt=et;t.Grid=rt;const nt=class{};l(nt,"TAG","webhighlights-grid-toolbar"),l(nt,"TEST_IDS",Ke(nt.TAG,[]));let it=nt;t.GridToolbar=it;const ot=class{};l(ot,"TAG","webhighlights-highlighter-mode-selector"),l(ot,"TEST_IDS",{...Ke(ot.TAG,[]),HIGHLIGHTER_MODE_OPTION_INPUT:t=>`highlighter-mode-option-input-${t}`,HIGHLIGHTER_MODE_OPTION_CONTAINER:t=>`highlighter-mode-option-container-${t}`});let st=ot;t.HighlighterModeSelector=st;const at=class{};l(at,"TAG","webhighlights-icon"),l(at,"TEST_IDS",Ke(at.TAG,[""]));let ct=at;t.Icon=ct;const ut=class{};l(ut,"TAG","webhighlights-image-viewer"),l(ut,"TEST_IDS",{...Ke(ut.TAG,["IMG","OUTSIDE_CONTAINER"])});let lt=ut;t.ImageViewer=lt;const ht=class{};l(ht,"TAG","webhighlights-imprint"),l(ht,"TEST_IDS",Ke(ht.TAG,[""]));let ft=ht;t.Imprint=ft;const pt=class{};l(pt,"TAG","webhighlights-invoices"),l(pt,"TEST_IDS",{...Ke(pt.TAG,[""])});let dt=pt;t.Invoices=dt;const gt=class{};l(gt,"TAG","webhighlights-learning-btn"),l(gt,"TEST_IDS",Ke(gt.TAG,[]));let mt=gt;t.LearningBtn=mt;const bt=class{};l(bt,"TAG","webhighlights-learning-dashboard"),l(bt,"TEST_IDS",Ke(bt.TAG,["POPOVER","BOOKMARK_DETAILS_POPOVER","CONFIDENCE_MAIN","GO_BACK_BTN","SELECTED_CATEGORY"]));let yt=bt;t.LearningDashboard=yt;const Tt=class{};l(Tt,"TAG","webhighlights-learning-reminder"),l(Tt,"TEST_IDS",Ke(Tt.TAG,["CONTINUE_LEARNING_BTN"]));let vt=Tt;t.LearningReminder=vt;const _t=class{};l(_t,"TAG","webhighlights-learning-settings"),l(_t,"TEST_IDS",{...Ke(_t.TAG,["SHOW_TEASER_CHECKBOX"])});let wt=_t;t.LearningSettings=wt;const St=class{};l(St,"TAG","webhighlights-learning-streak-overview"),l(St,"TEST_IDS",{...Ke(St.TAG,["MAX_STREAK","CURRENT_STREAK","DAYS_LEARNT"]),DAY_CHECK_ICON:t=>`${St.TAG}-DAY_CHECK_ICON-${t}`});let Et=St;t.LearningStreakOverview=Et;const At=class{};l(At,"TAG","webhighlights-legal-footer"),l(At,"TEST_IDS",Ke(At.TAG,["FAQ_LINK","BLOG_LINK","TOS_LINK","PRIVACY_LINK","IMPRINT_LINK","COOKIE_LINK"]));let It=At;t.LegalFooter=It;const kt=class{};l(kt,"TAG","webhighlights-like-button"),l(kt,"TEST_IDS",{...Ke(kt.TAG,["INPUT_CHECKBOX"])});let Nt=kt;t.LikeButton=Nt;const Ot=class{};l(Ot,"TAG","webhighlights-link-preview"),l(Ot,"TEST_IDS",Ke(Ot.TAG,["TITLE","URL","DESCRIPTION","IMAGE"]));let Lt=Ot;t.LinkPreview=Lt;const Rt=class{};l(Rt,"TAG","webhighlights-loading"),l(Rt,"TEST_IDS",Ke(Rt.TAG,[]));let Ct=Rt;t.Loading=Ct;const Bt=class{};l(Bt,"TAG","webhighlights-loading-text"),l(Bt,"TEST_IDS",Ke(Bt.TAG,[""]));let Gt=Bt;t.LoadingText=Gt;const Dt=class{};l(Dt,"TAG","webhighlights-lobby-container"),l(Dt,"TEST_IDS",Ke(Dt.TAG,[""]));let Pt=Dt;t.LobbyContainer=Pt;const xt=class{};l(xt,"TAG","webhighlights-lobby-container-extension"),l(xt,"TEST_IDS",Ke(xt.TAG,[""]));let Ut=xt;t.LobbyContainerExtension=Ut;const Mt=class{};l(Mt,"TAG","webhighlights-logo"),l(Mt,"TEST_IDS",Ke(Mt.TAG,[]));let jt=Mt;t.Logo=jt;const $t=class{};l($t,"TAG","webhighlights-logo-animated"),l($t,"TEST_IDS",Ke($t.TAG,[""]));let Ht=$t;t.LogoAnimated=Ht;const qt=class{};l(qt,"TAG","webhighlights-mark-blockquotes-teaser"),l(qt,"TEST_IDS",Ke(qt.TAG,[""]));let Ft=qt;t.MarkBlockQuotesTeaser=Ft;const Vt=class{};l(Vt,"TAG","webhighlights-mark-element"),l(Vt,"TEST_IDS",Ke(Vt.TAG,["TOOLBAR","RICH_EDITOR","TAGS","CONTAINER"]));let Wt=Vt;t.MarkElement=Wt;const Kt=class{static preload(){R([this.TAG,ct.TAG,P.TAG,G.TAG,re.TAG])}};l(Kt,"TAG","webhighlights-mark-element-toolbar"),l(Kt,"TEST_IDS",Ke(Kt.TAG,["CONTAINER","TOGGLE_NOTES_BTN","TOGGLE_TAGS_BTN","COLOR_PICKER","COPY_BTN","DELETE_BTN","TOGGLE_SIDEBAR_BTN","OPEN_MEDIA_TYPE_DROPDOWN_BTN"]));let zt=Kt;t.MarkElementToolbar=zt;const Yt=class{};l(Yt,"TAG","webhighlights-mark-media-item"),l(Yt,"TEST_IDS",{...Ke(Yt.TAG,["DELETE_BTN","EXPAND_IMG"])});let Jt=Yt;t.MarkMediaItem=Jt;const Xt=class{};l(Xt,"TAG","webhighlights-mark-preview"),l(Xt,"TEST_IDS",Ke(Xt.TAG,[]));let Zt=Xt;t.MarkPreview=Zt;const Qt=class{};l(Qt,"TAG","webhighlights-media-type-dropdown"),l(Qt,"TEST_IDS",{...Ke(Qt.TAG,[])});let te=Qt;t.MediaTypeDropdown=te;const ee=class{};l(ee,"TAG","webhighlights-media-type-dropdown-item"),l(ee,"TEST_IDS",{...Ke(ee.TAG,[]),HIGHLIGHT_BTN:t=>`${ee.TAG}_DROPDOWN_ITEM-${t}`});let re=ee;t.MediaTypeDropdownItem=re;const ne=class{};l(ne,"TAG","webhighlights-media-type-menu"),l(ne,"TEST_IDS",{...Ke(ne.TAG,["ENABLE_MODE_OVERLAY","ENABLE_MODE_BTN"]),HIGHLIGHT_BTN:t=>`${ne.TAG}_HIGHLIGHT_BTN-${t}`});let ie=ne;t.MediaTypeMenu=ie;const oe=class{};l(oe,"TAG","webhighlights-modal"),l(oe,"TEST_IDS",Ke(oe.TAG,["CONTAINER","CLOSE_BTN"]));let se=oe;t.Modal=se;const ae=class{};l(ae,"TAG","webhighlights-notes-editor"),l(ae,"TEST_IDS",{...Ke(ae.TAG,["NOTES_CONTAINER"])});let ce=ae;t.NotesEditor=ce;const ue=class{};l(ue,"TAG","webhighlights-notifications-btn"),l(ue,"TEST_IDS",Ke(ue.TAG,["BTN","BADGE"]));let le=ue;t.NotificationsBtn=le;const he=class{};l(he,"TAG","webhighlights-notifications-list"),l(he,"TEST_IDS",Ke(he.TAG,[]));let fe=he;t.NotificationsList=fe;const pe=class{};l(pe,"TAG","webhighlights-payment-method"),l(pe,"TEST_IDS",{...Ke(pe.TAG,[""])});let de=pe;t.PaymentMethod=de;const ge=class{};l(ge,"TAG","webhighlights-pdf-hint"),l(ge,"TEST_IDS",Ke(ge.TAG,[]));let me=ge;t.PdfHint=me;const be=class{};l(be,"TAG","webhighlights-popover"),l(be,"TEST_IDS",{...Ke(be.TAG,["CLOSE_BTN"])});let ye=be;t.Popover=ye;const Te=class{};l(Te,"TAG","webhighlights-premium-benefits"),l(Te,"TEST_IDS",{...Ke(Te.TAG,[""])});let ve=Te;t.PremiumBenefits=ve;const _e=class{};l(_e,"TAG","webhighlights-pricing"),l(_e,"TEST_IDS",Ke(_e.TAG,["SWITCH_TO_YEARLY_BTN","SWITCH_TO_MONTHLY_BTN","SWITCH_TO_LIFETIME"]));let we=_e;t.Pricing=we;const Se=class{};l(Se,"TAG","webhighlights-privacy-policy"),l(Se,"TEST_IDS",Ke(Se.TAG,[""]));let Ee=Se;t.PrivacyPolicy=Ee;const Ae=class{};l(Ae,"TAG","webhighlights-recent-colors"),l(Ae,"TEST_IDS",Ke(Ae.TAG,[""]));let Ie=Ae;t.RecentColors=Ie;const ke=class{};l(ke,"TAG","webhighlights-reminder"),l(ke,"TEST_IDS",Ke(ke.TAG,["SNOOZE_BTN","CLOCK_ICON","DOTS_MENU","LABEL","LOADING","DELETE_BTN"]));let Ne=ke;t.Reminder=Ne;const Oe=class{};l(Oe,"TAG","webhighlights-reset-password"),l(Oe,"TEST_IDS",{...Ke(Oe.TAG,["NEW_PASSWORD_INPUT","SUBMIT_BTN","ERROR_MSG","SUCCESSS_MSG"])});let Le=Oe;t.ResetPassword=Le;const Re=class{};l(Re,"TAG","webhighlights-search"),l(Re,"TEST_IDS",{...Ke(Re.TAG,["LOADING","SEARCH_ENTITY","NO_RESULTS_INFO"]),SEARCH_TYPE_FILTER:t=>`SEARCH_TYPE_FILTER_${Re.TAG}-${t}`});let Ce=Re;t.Search=Ce;const Be=class{};l(Be,"TAG","webhighlights-searchbar"),l(Be,"TEST_IDS",{...Ke(Be.TAG,["INPUT","SUBMIT_BTN","CLEAR_BTN","CANCEL_BTN"])});let Ge=Be;t.SearchBar=Ge;const De=class{};l(De,"TAG","webhighlights-settings"),l(De,"TEST_IDS",{...Ke(De.TAG,["ACCOUNT_INFO"]),VIEW_BTN:t=>`${De.TAG}_${t}-VIEW_BTN`});let Pe=De;t.Settings=Pe;const xe=class{};l(xe,"TAG","webhighlights-share-button"),l(xe,"TEST_IDS",{...Ke(xe.TAG,["SHARE_BUTTON","UNSHARE_BUTTON","CONTAINER","SOCIAL_CONTAINER","SOCIAL_FACEBOOK","SOCIAL_LINKEDIN","SOCIAL_TWITTER","SHARE_TO_FEED_CHECKBOX"])});let Ue=xe;t.ShareButton=Ue;const Me=class{};l(Me,"TAG","webhighlights-share-social"),l(Me,"TEST_IDS",Ke(Me.TAG,[""]));let je=Me;t.ShareSocial=je;const $e=class{};l($e,"TAG","webhighlights-shortcut"),l($e,"TEST_IDS",Ke($e.TAG,[""]));let He=$e;t.Shortcut=He;const qe=class{};l(qe,"TAG","webhighlights-sign-up-prompt"),l(qe,"TEST_IDS",{...Ke(qe.TAG,["CTA"])});let Fe=qe;t.SignUpPrompt=Fe;const Ve=class{};l(Ve,"TAG","webhighlights-sync-indicator"),l(Ve,"TEST_IDS",Ke(Ve.TAG,["SYNC_BTN","UNSYNCED_ENTITIES_BADGE","TOOLTIP","SYNC_PROGRESS_INFO","CLOUD_OFF_ICON","CLOUD_CHECK_ICON","UPDATING_LOADING_SPINNER"]));let We=Ve;t.SyncIndicator=We;const ze=class{};l(ze,"TAG","webhighlights-sync-status-entity"),l(ze,"TEST_IDS",Ke(ze.TAG,[""]));let Ye=ze;t.SyncStatusEntity=Ye;const Je=class{};l(Je,"TAG","webhighlights-tag"),l(Je,"TEST_IDS",{...Ke(Je.TAG,["DELETE_BTN","BADGE","SELECT_BTN"])});let Xe=Je;t.Tag=Xe;const Ze=class{};l(Ze,"TAG","webhighlights-tags"),l(Ze,"TEST_IDS",{...Ke(Ze.TAG,["INPUT","EXISTING_TAG"])});let Qe=Ze;t.Tags=Qe;const tr=class{};l(tr,"TAG","webhighlights-terms-of-service"),l(tr,"TEST_IDS",Ke(tr.TAG,[""]));let er=tr;t.TermsOfService=er;const rr=class{};l(rr,"TAG","webhighlights-testimonial-item"),l(rr,"TEST_IDS",{...Ke(rr.TAG,[])});let nr=rr;t.TestimonialItem=nr;const ir=class{};l(ir,"TAG","webhighlights-testimonials-grid"),l(ir,"TEST_IDS",{...Ke(ir.TAG,[])});let or=ir;t.TestimonialsGrid=or;const sr=class{};l(sr,"TAG","webhighlights-toasts"),l(sr,"TEST_IDS",Ke(sr.TAG,[""]));let ar=sr;t.Toasts=ar;const cr=class{};l(cr,"TAG","webhighlights-toggle-button"),l(cr,"TEST_IDS",Ke(cr.TAG,[""]));let ur=cr;t.ToggleButton=ur;const lr=class{};l(lr,"TAG","webhighlights-tooltip"),l(lr,"TEST_IDS",Ke(lr.TAG,[""]));let hr=lr;t.Tooltip=hr;const fr=class{};l(fr,"TAG","webhighlights-upgrade-deal-prompt"),l(fr,"TEST_IDS",{...Ke(fr.TAG,["CTA"])});let pr=fr;t.UpgradeDealPrompt=pr;const dr=class{};l(dr,"TAG","webhighlights-upgrade-needed"),l(dr,"TEST_IDS",{...Ke(dr.TAG,["CTA_BTN"])});let gr=dr;t.UpgradeNeeded=gr})(Ze||(Ze={}));const Qe=Ke("webhighlights-bookmark-preview-item",["FAVICON","IMAGE","TITLE","DESCRIPTION","URL"]);var tr,er;(t=>{const e=class{};l(e,"TAG","webhighlights-toast"),l(e,"TEST_IDS",Ke(e.TAG,["CONTAINER","VARIANT_ICON","CONTENT","CLOSE_BTN","CTA_BTN"]));let r=e;t.Toast=r;const n=class{};l(n,"TAG","webhighlights-backup-export-btn"),l(n,"TEST_IDS",{...Ke(n.TAG,["DOWNLOAD_ANCHOR_ELEMENT","EXPORT_BTN"])});let i=n;t.BackupExportBtn=i;const o=class{};l(o,"TAG","webhighlights-backup-import"),l(o,"TEST_IDS",{...Ke(o.TAG,["IMPORT_BTN","UPLOADED_BACKUP_FILE_INFO","CHOOSE_FILE_BTN","FILE_INPUT","IMPORT_BTN"])});let s=o;t.BackupImport=s;const a=class{};l(a,"TAG","webhighlights-bookmark-details-grid"),l(a,"TEST_IDS",Ke(a.TAG,[]));let c=a;t.BookmarkDetailsGrid=c;const u=class{};l(u,"TAG","webhighlights-bookmark-details-header"),l(u,"TEST_IDS",{...Ke(u.TAG,["SUB_IMAGE_TOOLBAR","TOGGLE_IMG_BTN","TOGGLE_DESCRIPTION_BTN","FAVICON","OPEN_PAGE_BTN","OPEN_APP_BTN","TOGGLE_BOOKMARK_BTN","TOGGLE_BOOKMARK_BTN_TOOLTIP","TITLE","DESCRIPTION","TAGS","SHARE_BTN","URL","INTEGRATION_LINK"]),INTEGRATION_LINK:t=>`INTEGRATION_LINK-${t}`});let h=u;t.BookmarkDetailsHeader=h;const f=class{};l(f,"TAG","webhighlights-bookmark-details-main"),l(f,"TEST_IDS",Ke(f.TAG,[]));let p=f;t.BookmarkDetailsMain=p;const d=class{};l(d,"TAG","webhighlights-bookmark-preview-grid"),l(d,"TEST_IDS",{...Qe,...Ke(d.TAG,[])});let g=d;t.BookmarkPreviewGrid=g;const m=class{};l(m,"TAG","webhighlights-bookmark-preview-image"),l(m,"TEST_IDS",{...Ke(m.TAG,["IMAGE"])});let b=m;t.BookmarkPreviewImage=b;const y=class{};l(y,"TAG","webhighlights-bookmark-preview-list"),l(y,"TEST_IDS",{...Qe,...Ke(y.TAG,[])});let T=y;t.BookmarkPreviewList=T;const v=class{};l(v,"TAG","webhighlights-bookmark-preview-tags"),l(v,"TEST_IDS",{...Ke(v.TAG,[""])});let _=v;t.BookmarkPreviewTags=_;const w=class{};l(w,"TAG","webhighlights-capacities-api-integration"),l(w,"TEST_IDS",{...Ke(w.TAG,["TOKEN_INPUT"])});let S=w;t.CapacitiesApiIntegration=S;const E=class{};l(E,"TAG","webhighlights-change-password-form"),l(E,"TEST_IDS",{...Ke(E.TAG,["OLD_PASSWORD","NEW_PASSWORD","SUBMIT_BTN","ERROR_MSG","SUCCESSS_MSG"])});let A=E;t.ChangePasswordForm=A;const I=class{};l(I,"TAG","webhighlights-color-tile"),l(I,"TEST_IDS",Ke(I.TAG,[""]));let k=I;t.ColorTile=k;const N=class{};l(N,"TAG","webhighlights-forgot-password"),l(N,"TEST_IDS",Ke(N.TAG,[""]));let O=N;t.ForgotPassword=O;const L=class{};l(L,"TAG","webhighlights-forgot-password-form"),l(L,"TEST_IDS",{...Ke(L.TAG,["EMAIL","GO_BACK_BTN","SUBMIT_BTN","ERROR_MSG","SUCCESSS_MSG"])});let R=L;t.ForgotPasswordForm=R;const C=class{};l(C,"TAG","webhighlights-google-sign-in"),l(C,"TEST_IDS",Ke(C.TAG,[""]));let B=C;t.GoogleSignIn=B;const G=class{};l(G,"TAG","webhighlights-grid-filters"),l(G,"TEST_IDS",Ke(G.TAG,["FILTER_TAG"]));let D=G;t.GridFilters=D;const P=class{};l(P,"TAG","webhighlights-grid-toolbar-selector"),l(P,"TEST_IDS",Ke(P.TAG,[]));let x=P;t.GridToolbarSelector=x;const U=class{};l(U,"TAG","webhighlights-learning-categories"),l(U,"TEST_IDS",Ke(U.TAG,["CATEGORY_CARD"]));let M=U;t.LearningCategories=M;const j=class{};l(j,"TAG","webhighlights-learning-confidence"),l(j,"TEST_IDS",Ke(j.TAG,["CONFIDENCE"]));let $=j;t.LearningConfidence=$;const H=class{};l(H,"TAG","webhighlights-learning-confidence-bar"),l(H,"TEST_IDS",Ke(H.TAG,[]));let q=H;t.LearningConfidenceBar=q;const F=class{};l(F,"TAG","webhighlights-learning-marks-list"),l(F,"TEST_IDS",Ke(F.TAG,["MARK_LIST_ITEM","MARK_LIST_ITEM_HEADER_ROW","MARK_LIST_ITEM_TEXT","UN_DISCARD_BTN","DISCARD_BTN"]));let V=F;t.LearningMarksList=V;const W=class{};l(W,"TAG","webhighlights-learning-pagination"),l(W,"TEST_IDS",Ke(W.TAG,["PAGINATION_INFO","PAGINATION_PREV_BTN","PAGINATION_NEXT_BTN"]));let K=W;t.LearningPagination=K;const z=class{};l(z,"TAG","webhighlights-learning-schedule"),l(z,"TEST_IDS",Ke(z.TAG,["LEARNED_YESTERDAY_COUNT","LEARNED_TODAY_COUNT","DUE_TOMORROW_COUNT","TODAY_LEARN_BTN"]));let Y=z;t.LearningSchedule=Y;const J=class{};l(J,"TAG","webhighlights-learning-session"),l(J,"TEST_IDS",Ke(J.TAG,["CURRENT_CARD_INFO"]));let X=J;t.LearningSession=X;const Z=class{};l(Z,"TAG","webhighlights-learning-session-card"),l(Z,"TEST_IDS",Ke(Z.TAG,["KNOW_IT_BTN","DONT_KNOW_IT_BTN","DISCARD_BTN"]));let Q=Z;t.LearningSessionCard=Q;const tt=class{};l(tt,"TAG","webhighlights-learning-session-result"),l(tt,"TEST_IDS",Ke(tt.TAG,["CONTINUE_LEARNING_BTN","KNOWN_CARDS_COUNT","NOT_KNOWN_CARDS_COUNT","DISCARDED_CARDS_COUNT","STREAK_FIGURE","STREAK_TEXT","TOTAL_CARDS_COUNT","GO_TO_DASHBOARD_BTN"]));let et=tt;t.LearningSessionResult=et;const rt=class{};l(rt,"TAG","webhighlights-learning-status"),l(rt,"TEST_IDS",{...Ke(rt.TAG,[]),ROW:t=>`${rt.TAG}-ROW-${t.split(" ").join("-")}`,COUNT:t=>`${rt.TAG}-COUNT-${t.split(" ").join("-")}`,COUNT_RELATIVE:t=>`${rt.TAG}-PROGRESS-${t.split(" ").join("-")}`});let nt=rt;t.LearningStatus=nt;const it=class{};l(it,"TAG","webhighlights-mark-preview-list"),l(it,"TEST_IDS",Ke(it.TAG,["URL"]));let ot=it;t.MarkPreviewList=ot;const st=class{};l(st,"TAG","webhighlights-notifications-list-item"),l(st,"TEST_IDS",Ke(st.TAG,["TITLE","CTA_LINK"]));let at=st;t.NotificationsListItem=at;const ct=class{};l(ct,"TAG","webhighlights-notion-api-integration"),l(ct,"TEST_IDS",{...Ke(ct.TAG,["AUTHORIZE_LINK"])});let ut=ct;t.NotionApiIntegration=ut;const lt=class{};l(lt,"TAG","webhighlights-price"),l(lt,"TEST_IDS",Ke(lt.TAG,["PRICE","INTERVAL_INFO","HINT"]));let ht=lt;t.Price=ht;const ft=class{};l(ft,"TAG","webhighlights-pricing-plan-container"),l(ft,"TEST_IDS",{...Ke(ft.TAG,["HEADLINE","FEATURE_LIST"]),CHECKOUT_BTN:t=>`${ft.TAG}-${t}_BTN`,CONTAINER:t=>`${ft.TAG}-${t}`});let pt=ft;t.PricingPlanContainer=pt;const dt=class{};l(dt,"TAG","webhighlights-search-entity"),l(dt,"TEST_IDS",{...Ke(dt.TAG,["CONTAINER","SEARCH_TYPE_INDICATOR","SEARCH_ENTITY_CONTENT","SEARCH_ENTITY_DETAILS","SEARCH_ENTITY_DATE"]),SEARCH_TYPE_INDICATOR:t=>`SEARCH_TYPE_INDICATOR_${dt.TAG}-${t}`});let gt=dt;t.SearchEntity=gt;const mt=class{};l(mt,"TAG","webhighlights-share-link"),l(mt,"TEST_IDS",{...Ke(mt.TAG,["INPUT","COPY_BTN"])});let bt=mt;t.ShareLink=bt;const yt=class{};l(yt,"TAG","webhighlights-sign-in-form"),l(yt,"TEST_IDS",{...Ke(yt.TAG,["EMAIL","PASSWORD","PASSWORD_2","SIGN_IN_BTN","GOOGLE_SIGN_IN","ERROR_MSG","RESEND_EMAIL_BTN","FORGOT_PASSWORD_BTN"])});let Tt=yt;t.SignInForm=Tt;const vt=class{};l(vt,"TAG","webhighlights-sign-up"),l(vt,"TEST_IDS",{...Ke(vt.TAG,["EMAIL","PASSWORD_1","PASSWORD_2","PRIVACY_CHECKBOX","SIGN_UP_BTN","GOOGLE_SIGN_UP","ERROR_MSG"])});let _t=vt;t.SignUp=_t;const wt=class{};l(wt,"TAG","webhighlights-sign-up-form"),l(wt,"TEST_IDS",{...Ke(wt.TAG,["EMAIL","PASSWORD","PASSWORD_1","PASSWORD_2","PRIVACY_CHECKBOX","SIGN_UP_BTN","GOOGLE_SIGN_UP","ERROR_MSG"])});let St=wt;t.SignUpForm=St;const Et=class{};l(Et,"TAG","webhighlights-social-auth"),l(Et,"TEST_IDS",{...Ke(Et.TAG,["GOOGLE_AUTH_BTN"])});let At=Et;t.SocialAuth=At;const It=class{};l(It,"TAG","webhighlights-settings-account"),l(It,"TEST_IDS",{...Ke(It.TAG,["CHANGE_PASSWORD_BTN","EMAIL_ADDRESS","DELETE_ACCOUNT_BTN","LOGOUT_BTN","LINKED_ACCOUNT_LABEL"])});let kt=It;t.SettingsAccount=kt;const Nt=class{};l(Nt,"TAG","webhighlights-settings-backup"),l(Nt,"TEST_IDS",{...Ke(Nt.TAG,[""])});let Ot=Nt;t.SettingsBackup=Ot;const Lt=class{};l(Lt,"TAG","webhighlights-settings-billing"),l(Lt,"TEST_IDS",{...Ke(Lt.TAG,["CURRENT_PLAN_INFO","CHANGE_PAYMENT_METHOD_LINK","USERPLAN_INFO","EXPIRY_INFO"])});let Rt=Lt;t.SettingsBilling=Rt;const Ct=class{};l(Ct,"TAG","webhighlights-settings-integrations"),l(Ct,"TEST_IDS",{...Ke(Ct.TAG,[]),INTEGRATION_ITEM:t=>`${Ct.TAG}INTEGRATION_ITEM-${t}`});let Bt=Ct;t.SettingsIntegrations=Bt;const Gt=class{};l(Gt,"TAG","webhighlights-settings-integration-item"),l(Gt,"TEST_IDS",{...Ke(Gt.TAG,[])});let Dt=Gt;t.SettingsIntegrationItem=Dt;const Pt=class{};l(Pt,"TAG","webhighlights-settings-integration-preview"),l(Pt,"TEST_IDS",{...Ke(Pt.TAG,[])});let xt=Pt;t.SettingsIntegrationPreview=xt;const Ut=class{};l(Ut,"TAG","webhighlights-settings-notifications"),l(Ut,"TEST_IDS",{...Ke(Ut.TAG,["BACKUP_INTERVAL_INPUT"])});let Mt=Ut;t.SettingsNotifications=Mt;const jt=class{};l(jt,"TAG","webhighlights-settings-settings"),l(jt,"TEST_IDS",{...Ke(jt.TAG,[""])});let $t=jt;t.SettingsSettings=$t;const Ht=class{};l(Ht,"TAG","webhighlights-sign-in"),l(Ht,"TEST_IDS",{...Ke(Ht.TAG,["EMAIL","PASSWORD","PASSWORD_2","SIGN_IN_BTN","GOOGLE_SIGN_IN","ERROR_MSG","RESEND_EMAIL_BTN"])});let qt=Ht;t.SignIn=qt;const Ft=class{};l(Ft,"TAG","webhighlights-tag-suggestions"),l(Ft,"TEST_IDS",{...Ke(Ft.TAG,["SUGGESTION_TAG","PREVIEW_TAG"])});let Vt=Ft;t.TagSuggestions=Vt;const Wt=class{};l(Wt,"TAG","webhighlights-weava-import"),l(Wt,"TEST_IDS",{...Ke(Wt.TAG,["FILE_INPUT","UPLOADED_FILE_INFO","CHOOSE_FILE_BTN","IMPORT_BTN"])});let Kt=Wt;t.WeavaImport=Kt})(tr||(tr={})),(t=>{const e=class{};l(e,"TAG","WebsiteLikeBtn"),l(e,"TEST_IDS",{...Ke(e.TAG,["BTN"])});let r=e;t.WebsiteLikeBtn=r;const n=class{};l(n,"TAG","webhighlights-legal-footer"),l(n,"TEST_IDS",Ke(n.TAG,["FAQ_LINK","BLOG_LINK","TOS_LINK","PRIVACY_LINK","IMPRINT_LINK","COOKIE_LINK"]));let i=n;t.WebsiteFooter=i;const o=class{};l(o,"TAG","WebsiteNavbar"),l(o,"TEST_IDS",{...Ke(o.TAG,["BTN"]),NAV_ITEM_LINK:t=>`NAV_ITEM_LINK-${t}`});let s=o;t.WebsiteNavbar=s;const a=class{};l(a,"TAG","WebsiteDiscoverFeed"),l(a,"TEST_IDS",{...Ke(a.TAG,["BTN"]),FEED_TYPE_LINK:t=>`FEED_TYPE_LINK-${t}`});let c=a;t.WebsiteDiscoverFeed=c;const u=class{};l(u,"TAG","WebsitePageNotFound"),l(u,"TEST_IDS",{...Ke(u.TAG,["CONTAINER","TITLE","DESCRIPTION","LINK"])});let h=u;t.WebsitePageNotFound=h;const f=class{};l(f,"TAG","WebsiteLegalDisclaimer"),l(f,"TEST_IDS",{...Ke(f.TAG,["DISCLAIMER"])});let p=f;t.WebsiteLegalDisclaimer=p})(er||(er={}));const rr=["#fdffb4","#f8b6a8","#a7e8c8","#f7c2d6","#c3bbec","#c3effc"],nr=t=>!!t&&(null!=t&&t.notes?!(null==t||!t.notes)&&"<p></p>"!==t.notes:!(null==t||!t.richText)&&(t=>{var e,r,n;return(null==t?void 0:t.richText)&&(t.richText&&(null==(r=null==(e=t.richText)?void 0:e.ops)?void 0:r.length)>1||t.richText&&"\n"!==(null==(n=t.richText)?void 0:n.ops[0].insert))})(t));function ir(t,e){return t.map((t=>{const r=e.filter((e=>e._bookmark===t._id));return{...t,marksCount:r.length,notesCount:r.filter(nr).length}}))}O.WEB_HIGHLIGHT;const or={CONTEXT_MENU_SAVE_TEXT:"CONTEXT_MENU_SAVE_TEXT",CONTEXT_MENU_SAVE_BOOKMARK:"CONTEXT_MENU_SAVE_BOOKMARK",CONTEXT_MENU_SAVE_IMAGE:"CONTEXT_MENU_SAVE_IMAGE"};function sr(t,e){return t.id===e}var ar=(t=>(t.marks="marks",t.bookmarks="bookmarks",t.chromesettings="chromesettings",t))(ar||{});const cr={...(lr=ar.chromesettings,{_id:oe(),createdAt:Date.now(),updatedAt:0,_objectStore:lr}),showMarkerPopup:!0,showLeftSidebarWidget:!1,showToolboxAutomatically:!1,defaultHighlightColor:rr[0],recentColors:[rr[0]],blacklistedUrls:[],lastSync:Date.now(),showLearningTeaser:!1,chromeRatingPromptDismissed:!1,sidebarOptions:{sidebarWidth:400,sidebarAlignment:"left",sidebarBehavior:"push"},preferredColorMode:"dark",showBackupDialogPrompt:!0,backupDialogPromptInterval:100},ur={jwt_webmarker:"",lastSyncDateInMillis:0,lastServerFetchInMillis:0,notionOAuthToken:null,capacitiesToken:null,signUpPromptDismissed:!1,chromeRatingPromptDismissed:!1,upgradeDealPromptDismissed:!1,lastUserPromptShownAtInMillis:0,lastUpdatedKey:null,isEmailActivated:!1,mellowtelDialogShownAtInMillis:0};var lr;function hr(){var t;return typeof chrome<"u"&&!(null==(t=null==chrome?void 0:chrome.storage)||!t.sync)}const fr=new class{async getStorage(){return new Promise((t=>{try{chrome.storage.sync.get((e=>{const r={...ur,...e};t(r)}))}catch{t(ur)}}))}async getValue(t){const e=ur[t];return new Promise((r=>{try{chrome.storage.sync.get((n=>{r(n[t]??e)}))}catch{r(e)}}))}setValue(t,e){try{const r={[t]:e};chrome.storage.sync.set(r);const n={lastUpdatedKey:t};chrome.storage.sync.set(n),this.getStorage().then((r=>{xr.dispatch("chromeStorageChanged",{detail:{...r,[t]:e}})}))}catch{}return hr()}clear(){var t,e;try{if(typeof chrome>"u")return;null==(e=null==(t=null==chrome?void 0:chrome.storage)?void 0:t.sync)||e.clear()}catch{}}};var pr=(t=>(t.OFFLINE="OFFLINE",t.FREE="FREE",t.FREE_TRIAL="FREE_TRIAL",t.PREMIUM="PREMIUM",t.ULTIMATE="ULTIMATE",t))(pr||{}),dr=(t=>(t.ONE_MONTH="1M",t.ONE_YEAR="1Y",t.LIFETIME="Lifetime",t))(dr||{});const gr=1679745752934;function mr(t){return t._objectStore===ar.marks}function br(t){return t._objectStore===ar.bookmarks}function yr(t){return t._objectStore===ar.chromesettings}function Tr(t){return Sr(t,ar.marks)}function vr(t){return Sr(t,ar.bookmarks)}function _r(t){return Sr(t,ar.chromesettings)}function wr(t){return{...t,lastSync:Date.now()}}function Sr(t,e){return{...t,_objectStore:e}}function Er(t){return!Ir(t)&&(t.createdAt??0)>(t.lastSync??0)}function Ar(t){return!Ir(t)&&!Er(t)&&(t.updatedAt??0)>(t.lastSync??0)}function Ir(t){return(t.deletedAt??0)>(t.lastSync??0)}function kr(t){return Er(t)||Ar(t)||Ir(t)}function Nr(t,e){return{...t,...e}}l(class t{constructor(t){l(this,"executeSyncInProgress",!1),l(this,"executeSyncQueued",!1),l(this,"_chromeSyncStatus",{chromeSyncState:"OFFLINE",entitiesThatNeedSync:[]}),this.options=t,this.executeSync()}get chromeSyncStatus(){return this._chromeSyncStatus}set setChromeSyncStatus(t){xr.dispatch("chromeSyncStatusChanged",{detail:t}),this._chromeSyncStatus=t}async getCurrentUser(){return w.getJwtPayload()}resolveChromeSyncState({jwtPayload:t,numberOfEntitiesThatNeedSync:e}){const r=function(t){var e,r,n,i,o,s;if(!t)return pr.OFFLINE;const a=(new Date).getTime(),c=((null==(e=t.userPlan)?void 0:e.expiresDateMillis)??0)>a,u=typeof t.premium>"u"&&typeof(null==(r=t.userPlan)?void 0:r.subscription_id)>"u",l=null==(n=t.userPlan)?void 0:n.type;if(t.premium||u)return c&&l===pr.ULTIMATE?pr.ULTIMATE:pr.PREMIUM;if(c&&t.userPlan&&l){const e=l===pr.PREMIUM&&t.userPlan.expiresDateMillis<17110656e5&&!(null!=(i=t.userPlan)&&i.subscription_id),r=l===pr.PREMIUM&&72580284e5===t.userPlan.expiresDateMillis&&!(null!=(o=t.userPlan)&&o.subscription_id);return e||r?pr.ULTIMATE:l}return(null==(s=t.userPlan)?void 0:s.type)===pr.FREE_TRIAL&&t.userPlan.expiresDateMillis>a?pr.FREE_TRIAL:pr.FREE}(t??null);return r===pr.OFFLINE?"OFFLINE":0===e?"UP_TO_DATE":function(t,{activeUserPlan:e,user:r}){return!(!function(t,e){return"sync"===t&&1675008111780===(null==e?void 0:e.createdAt)}(t,r)&&"backup"!==t&&e!==pr.FREE_TRIAL&&e!==pr.ULTIMATE&&("sync"===t?!function(t){var e,r,n;return(null==(e=null==t?void 0:t.userPlan)?void 0:e.type)!==pr.PREMIUM&&(null==(r=null==t?void 0:t.userPlan)?void 0:r.type)!==pr.ULTIMATE&&((null==(n=null==t?void 0:t.userPlan)?void 0:n.type)&&t.userPlan.expiresDateMillis<gr||(null==t?void 0:t.createdAt)&&t.createdAt<gr)}(r)&&e!==pr.PREMIUM:"share"!==t||e!==pr.PREMIUM))}("sync",{activeUserPlan:r,user:t??null})?"NEEDS_SYNC":"PREMIUM_REQUIRED"}async readChromeSyncStatus(){const t=await this.getCurrentUser(),e=await this.options.db.getEntitiesThatNeedSync();return{chromeSyncState:this.resolveChromeSyncState({jwtPayload:t,numberOfEntitiesThatNeedSync:e.length}),entitiesThatNeedSync:e}}executeSync(t){if(this.executeSyncInProgress)return this.executeSyncQueued=!0,void(t&&t());const e=e=>{t&&t(),this.executeSyncInProgress=!1,this.executeSyncQueued?(this.executeSyncQueued=!1,this.executeSync()):this.readChromeSyncStatus().then((t=>{e&&(t.chromeSyncState=e),this.setChromeSyncStatus=t,this.checkForBackupOrSyncDialog()})),this.executeSyncQueued=!1};this.executeSyncInProgress=!0;try{this.readChromeSyncStatus().then((async t=>{this.setChromeSyncStatus=t;const{chromeSyncState:r,entitiesThatNeedSync:n}=t;if("OFFLINE"!==r&&"UP_TO_DATE"!==r&&"PREMIUM_REQUIRED"!==r){n.length&&(this.setChromeSyncStatus={...this.chromeSyncStatus,chromeSyncState:"UPDATING"});try{const t=await this.getCurrentUser();if(!t)throw new Error("Can not sync because user is not signed in.");const r=n.filter(Er),i=n.filter(Ar),o=n.filter(Ir);let s=0;const a=50,c=(null==n?void 0:n.length)>a,u=async(t,e)=>{if(!t.length)return;const r=Math.ceil(t.length/a);for(let i=0;i<r;i++){const r=i*a,o=r+a,u=t.slice(r,o);await e(u),c&&(s=Math.min(s+a,n.length),xr.dispatch("chromeSyncProgress",{detail:{current:s,of:n.length}}))}};c&&xr.dispatch("chromeSyncProgress",{detail:{current:1,of:n.length}}),await u(r,(t=>this.options.httpFacade.createEntities({entities:t}))),await u(i,(t=>this.options.httpFacade.updateEntities({entities:t}))),await u(o,(t=>this.options.httpFacade.deleteEntities({entities:t.map((t=>({_id:t._id,_objectStore:t._objectStore})))}))),xr.dispatch("chromeSyncProgress",{detail:{current:n.length,of:n.length}}),await Promise.all([n.map((async e=>this.updateEntitiesWithUserIdAfterSync({marks:[e].filter(mr).map(wr),bookmarks:[e].filter(br).map(wr),chromesettings:[e].filter(yr).map(wr)},t)))]),await this.runGarbageCollectorAfterSync(n),this.updateLastSync(),e()}catch(t){(t=>401===(null==t?void 0:t.statusCode))(t)&&(await async function(){await w.getJwtPayload()&&(xr.dispatch("loginNeeded",{detail:{authType:"signIn"}}),C({content:"Your token expired. Please login again.",variant:"warn",uniqueId:"token-expired",duration:1e4}))}(),xr.dispatch("loggedOut",{detail:null})),e("SERVER_ERROR")}}else e()}))}catch(t){console.error(t)}}updateLastSync(t=Date.now()){this.options.lastSyncDateInMillis!==t&&(this.options={...this.options,lastSyncDateInMillis:t},fr.setValue("lastSyncDateInMillis",t))}async writeServerResultIntoLocalDb(t){const e=await this.getCurrentUser();if(e)try{const r=function(t,e,r){try{const n=t=>{const r=null==e?void 0:e.find((e=>e._id===t._id));return r&&(null==r?void 0:r.updatedAt)>(null==t?void 0:t.updatedAt)?r:t},i=t.marks.map(Tr).map(wr).map(n),o=t.bookmarks.map(vr).map(wr).map(n),s=t.chromesettings.map(_r).map(wr).map(n),a=[...i,...o,...s],c=null==e?void 0:e.filter((t=>!a.some((e=>e._id===t._id)))),u=[...a,...c??[]].map((t=>({...t,_user:null==r?void 0:r._id})));return{marks:u.filter(mr),bookmarks:u.filter(br),chromesettings:u.filter(yr)}}catch{return t}}(t,(await this.options.db.getEntitiesThatNeedSync()).filter((t=>!t._user||t._user===e._id)),e);return await this.options.db.clearDatabases(),await this.updateEntitiesWithUserIdAfterSync(r,e),r}catch(t){console.error(t)}finally{this.updateLastSync(),fr.setValue("lastServerFetchInMillis",Date.now())}}async updateEntitiesWithUserIdAfterSync({marks:t,bookmarks:e,chromesettings:r},n){try{const i={_user:n._id};await Promise.allSettled([this.options.db.createOrUpdateEntities({objectStoreName:ar.marks,entities:t.map((t=>Nr(t,i)))}),this.options.db.createOrUpdateEntities({objectStoreName:ar.bookmarks,entities:e.map((t=>Nr(t,i)))}),this.options.db.createOrUpdateEntities({objectStoreName:ar.chromesettings,entities:r.map((t=>Nr(t,i)))})])}catch(t){console.error("Error during 'updateEntitiesWithUserIdAfterSync'",t)}}async runGarbageCollectorAfterSync(t){try{const e=t.filter(Ir);await Promise.allSettled([this.options.db.deleteEntities({objectStoreName:ar.marks,entities:e.filter(mr)}),this.options.db.deleteEntities({objectStoreName:ar.bookmarks,entities:e.filter(br)}),this.options.db.deleteEntities({objectStoreName:ar.chromesettings,entities:e.filter(yr)})])}catch(t){console.error("Error during 'runGarbageCollectorAfterSync'",t)}}static create(e){if(t.instance)return t.instance;const r=new t(e);return t.instance=r,r}static createForUnitTests(e){return new t(e)}async updateChromeSyncState(t){const e=await this.options.db.getEntitiesThatNeedSync();this.setChromeSyncStatus={chromeSyncState:t||this.resolveChromeSyncState({numberOfEntitiesThatNeedSync:e.length}),entitiesThatNeedSync:e??[]}}async checkForBackupOrSyncDialog(){var t;const e=this.chromeSyncStatus.entitiesThatNeedSync,r=await this.options.db.getChromeSettings();if(null!=e&&e.length&&function({chromeSettings:t,entitiesThatNeedSync:e}){var r;const n=t.showBackupDialogPrompt,i=(null==e?void 0:e.length)??0,o=t.backupDialogPromptInterval,s=function(t){return`backup_prompt_dismissed_${t}`}(i),a=i>=o&&n&&!(null!=(r=null==t?void 0:t.dismissedBackupPromptIds)&&r.includes(s))&&i>=o&&i%o==0;return a&&Gr({dismissedBackupPromptIds:[...t.dismissedBackupPromptIds??[],s]}),a}({chromeSettings:r,entitiesThatNeedSync:e})&&function(t){R([Ze.Dialog.TAG],{lazy:!1});const e=Ze.Dialog.TAG;let r=document.querySelector(Ze.Dialog.TAG);t.keepCurrentDialog&&(r=null);const n=!!r;r||(r=document.createElement(e)),r.props=t,r.props.onDialogClosed=e=>{null==r||r.remove(),t.dialogClosedCallback&&t.dialogClosedCallback(e)},n||document.body.append(r)}({dialogName:"backup-or-sync-prompt",options:{headerOptions:{showLogo:!0,showCloseButton:!0}}}),0===(null==e?void 0:e.length)&&"UP_TO_DATE"===this.chromeSyncStatus.chromeSyncState&&((null==(t=null==r?void 0:r.dismissedBackupPromptIds)?void 0:t.length)??0)>0)return Gr({dismissedBackupPromptIds:[]})}},"instance");const Or={slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},primary:{50:"rgb(187, 219, 204)",100:"rgb(153, 208, 184)",200:"rgb(120, 197, 164)",300:"rgb(86, 186, 144)",400:"rgb(53, 176, 125)",500:"hsl(161, 100%, 35%)",600:"hsl(161, 100%, 33%)",700:"hsl(161, 100%, 31%)",800:"hsl(161, 100%, 29%)",900:"hsl(161, 100%, 25%)",950:"hsl(161, 100%, 20%)"},secondary:{50:"hsl(218, 22%, 30%)",100:"hsl(218, 22%, 27%)",200:"hsl(218, 22%, 25%)",300:"hsl(218, 22%, 22%)",400:"hsl(218, 22%, 20%)",500:"hsl(218, 22%, 18%)",600:"hsl(218, 22%, 16%)",700:"hsl(218, 22%, 14%)",800:"hsl(218, 22%, 12%)",900:"hsl(218, 22%, 8%)",950:"hsl(218, 22%, 6%)"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"}},Lr={"wh-primary-color":"var(--wh-primary-500)","wh-primary-color-hover":"#00a16e","wh-primary-color-transparent":"#00aa7424","wh-primary-color-transparent-light":"#00a8730f","wh-primary-light":"#53e3a6","wh-primary-dark":"#007f4b","wh-primary-dark-hover":"#017444","wh-primary-shadow":"#00b07841","wh-primary-shadow-2":"#00b07870","wh-primary-border-color":"#c8c8c870","wh-warning-color":"#ff5a1f","wh-warning-color-light":"#feecdc","secondary-color":"#3d4455","secondary-color-hover":"#3a4052","secondary-color-transparent":"#3d44556b","secondary-light":"#4c556d","secondary-dark":"#252934","secondary-dark-hover":"#191b22","secondary-dark-transparent":"#2e2d2d46","highlight-color":"#92ffaa","error-color":"#d62d4c","error-color-light":"#fde8e8","error-info":"#14854e","success-color":"#0e9f6e","success-color-light":"#def7ec","font-color":"#2f3237","font-color-light":"#626364","font-color-dark":"#252525","wh-font-family":"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont,\n  'Open Sans', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell',\n  'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif","font-family":"var(--wh-font-family)","font-size":"12px","webhighlights-font-size":"12px","link-color":"#1d9bf0","wh-form-active-color":"#3b82f6","wh-accent-blue":"#1f6feb","wh-mobile-breakpoint":"767px",BREAKPOINT_XS:"575px",BREAKPOINT_S:"767px",BREAKPOINT_M:"991px",BREAKPOINT_L:"1199px",BREAKPOINT_XL:"1399px",BREAKPOINT_XXL:"1699px","wh-danger-color":"var(--wh-red-600)","wh-danger-color-hover":"var(--wh-red-700)","wh-font-size":"13px","wh-blockquote-line-height":"1.3"},Rr=[...Object.keys(Or).map((t=>Object.keys(Or[t]).map((e=>{const r=Or[t][e];return{property:`wh-${t}-${e}`,value:{dark:r,light:r}}})))).flat(),...Object.keys(Lr).map((t=>({property:t,value:{dark:Lr[t],light:Lr[t]}}))),{property:"wh-bg-base",value:{dark:"var(--wh-secondary-600)",light:"hsl(0, 0%, 100%)"}},{property:"wh-bg-base-hover",value:{dark:"var(--wh-secondary-500)",light:"var(--wh-gray-50)"}},{property:"wh-border-base",value:{dark:"var(--wh-secondary-200)",light:"hsl(20, 6%, 94%)"}},{property:"wh-border-base-hover",value:{dark:"var(--wh-secondary-100)",light:"hsl(20, 6%, 90%)"}},{property:"wh-border-base-strong",value:{dark:"var(--wh-secondary-100)",light:"hsl(24, 6%, 85%)"}},{property:"wh-border-base-strong-hover",value:{dark:"var(--wh-secondary-50)",light:"hsl(24, 6%, 70%)"}},{property:"wh-bg-base-hover-strong",value:{dark:"var(--wh-secondary-300)",light:"var(--wh-gray-100)"}},{property:"wh-bg-back",value:{dark:"var(--wh-secondary-700)",light:"hsl(0, 0%, 100%)"}},{property:"wh-bg-back-strong",value:{dark:"var(--wh-secondary-800)",light:"var(--wh-gray-100)"}},{property:"wh-bg-back-strong-hover",value:{dark:"var(--wh-secondary-900)",light:"var(--wh-gray-200)"}},{property:"wh-bg-back-hover",value:{dark:"var(--wh-secondary-600)",light:"var(--wh-neutral-50)"}},{property:"wh-bg-back-hover-strong",value:{dark:"var(--wh-secondary-800)",light:"var(--wh-neutral-100)"}},{property:"wh-border-back",value:{dark:"var(--wh-secondary-100)",light:"#e7e5e4"}},{property:"wh-border-back-strong",value:{dark:"var(--wh-secondary-50)",light:"#d6d3d1"}},{property:"wh-bg-front",value:{dark:"var(--wh-secondary-400)",light:"hsl(0, 0%, 100%)"}},{property:"wh-bg-front-strong",value:{dark:"var(--wh-secondary-200)",light:"var(--wh-neutral-100)"}},{property:"wh-bg-front-strong-hover",value:{dark:"var(--wh-secondary-100)",light:"var(--wh-neutral-200)"}},{property:"wh-bg-front-hover",value:{dark:"var(--wh-secondary-300)",light:"hsl(0, 0%, 98%)"}},{property:"wh-bg-front-hover-strong",value:{dark:"var(--wh-secondary-200)",light:"hsl(0, 0%, 95%)"}},{property:"wh-border-front",value:{dark:"hsl(227, 20%, 25%)",light:"#e7e5e4"}},{property:"wh-border-front-strong",value:{dark:"hsl(227, 20%, 35%)",light:"#d6d3d1"}},{property:"wh-text-stronger",value:{dark:"hsla(0, 0%, 100%, 0.95)",light:"hsl(45, 8%, 25%)"}},{property:"wh-text-strongest",value:{dark:"hsla(0, 0%, 100%, 1)",light:"hsl(45, 8%, 20%)"}},{property:"wh-text-strong",value:{dark:"rgba(255, 255, 255, 0.9)",light:"rgb(55, 53, 47)"}},{property:"wh-text",value:{dark:"rgba(255, 255, 255, 0.85)",light:"rgb(55, 53, 47)"}},{property:"wh-text-hover",value:{dark:"var(--wh-text-strong)",light:"var(--wh-text-strong)"}},{property:"wh-text-light",value:{dark:"rgba(255, 255, 255, 0.73)",light:"rgb(55, 53, 47, 0.9)"}},{property:"wh-text-lighter",value:{dark:"rgba(255, 255, 255, 0.63)",light:"rgb(55, 53, 47, 0.7)"}},{property:"wh-text-lightest",value:{dark:"rgba(255, 255, 255, 0.5)",light:"rgb(55, 53, 47, 0.5)"}},{property:"wh-border-color",value:{dark:"hsla(0, 0%, 100%, 0.15)",light:"var(--wh-gray-300)"}},{property:"wh-border-color-strong",value:{dark:"hsla(0, 0%, 100%, 0.25)",light:"var(--wh-gray-400)"}},{property:"wh-note-editor-bg-color",value:{dark:"hsl(221, 27%, 20%)",light:"rgb(247, 246, 243)"}},{property:"wh-note-editor-bg-color-preview",value:{dark:"hsl(221, 27%, 18%)",light:"rgba(247, 246, 243, 0.85)"}},{property:"wh-bg-tags",value:{dark:"var(--wh-secondary-300)",light:"var(--wh-bg-front-strong)"}},{property:"wh-bg-tags-hover",value:{dark:"var(--wh-secondary-200)",light:"var(--wh-bg-front-strong-hover)"}},{property:"wh-syntax-bg-color",value:{dark:"rgba(255, 255, 255, 0.05)",light:"rgb(230, 230, 230)"}},{property:"wh-fallback-img-color",value:{dark:"var(--wh-secondary-600)",light:"var(--wh-gray-100)"}},{property:"wh-bg-disabled",value:{dark:"hsl(220, 22%, 18%)",light:"#e7e9ec"}},{property:"wh-bg-notification-unread",value:{dark:"hsla(161, 100%, 20%, 0.15)",light:"rgba(187, 219, 204, 0.2)"}},{property:"wh-bg-notification-unread-hover",value:{dark:"hsla(161, 100%, 20%, 0.05)",light:"rgba(187, 219, 204, 0.1)"}},{property:"wh-subtle-gray",value:{dark:"rgb(255, 255, 255, 0.1)",light:"rgb(128, 128, 128, 0.15)"}},{property:"wh-shadow",value:{dark:"inset 0 0 0.5px 1px hsla(0, 0%, 100%, 0.1),\n      /* 2. shadow ring 👇 */ 0 0 0 1px hsla(230, 13%, 9%, 0.075),\n      /* 3. multiple soft shadows 👇 */ 0 0.3px 0.4px hsla(230, 13%, 9%, 0.02),\n      0 0.9px 1.5px hsla(230, 13%, 9%, 0.045),\n      0 3.5px 6px hsla(230, 13%, 9%, 0.09)",light:"inset 0 0 0.5px 1px hsla(0, 0%, 100%, 0.1),\n      /* 2. shadow ring 👇 */ 0 0 0 1px hsla(230, 13%, 9%, 0.075),\n      /* 3. multiple soft shadows 👇 */ 0 0.3px 0.4px hsla(230, 13%, 9%, 0.02),\n      0 0.9px 1.5px hsla(230, 13%, 9%, 0.045),\n      0 3.5px 6px hsla(230, 13%, 9%, 0.09)"}},{property:"wh-shadow-primary",value:{dark:"var(--wh-primary-500) 0px 0px 0px 1px inset,\n      var(--wh-primary-500) 0px 0px 1px",light:"var(--wh-primary-500) 0px 0px 0px 1px inset,\n      var(--wh-primary-500) 0px 0px 1px"}}],Cr=(t,e)=>({property:t.property,value:t.value[e]});function Br(t){const e=t??(typeof window>"u"||"function"!=typeof window.matchMedia?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");!function(t){const e=function(t){return`:root { ${t.map((({property:t,value:e})=>`${t.startsWith("--")?t:`--${t}`}: ${e};`)).join("")} }`}(t);!function(t,e){const r=function(t){const e=function(t){return document.getElementById(t)}(t);if(e)return e;const r=document.createElement("style");return r.id=t,document.body.append(r),r}(t);r.innerHTML!==e&&(r.innerHTML=e)}(N.GLOBAL_STYLE_VARIABLES_ID,e)}(Rr.map((t=>Cr(t,e))))}async function Gr(t){const{db:e,chromeSyncService:r}=I(),n=await e.updateChromeSettings(t);typeof t.preferredColorMode<"u"&&Br(t.preferredColorMode),xr.dispatch("updatedChromeSettings",{detail:n}),r.executeSync()}const Dr="webhighlights-notifications";function Pr(){const t=document.getElementById(Dr);if(!t){const t=document.createElement("div");return t.id=Dr,document.body.append(t),t}return t}const xr={subscribe:function(t,e){const r=Pr();return r.addEventListener(t,e),{unsubscribe:()=>r.removeEventListener(t,e)}},unsubscribe:function(t,e){return Pr().removeEventListener(t,e)},dispatch:function(t,e){Pr().dispatchEvent(new CustomEvent(t,e))}};l(class t{constructor(t){l(this,"subscriptions",[]),this.options=t}static create(e){return t._singleton?t._singleton:new t(e)}start(){this.stop(),this.subscriptions=[xr.subscribe("updatedMark",(t=>this.options.updatedMark(t.detail))),xr.subscribe("deletedMark",(t=>this.options.deletedMark(t.detail))),xr.subscribe("bookmarkSelected",(t=>this.options.bookmarkSelected(t.detail[0],t.detail[1])))]}stop(){this.subscriptions.forEach((t=>{t.unsubscribe()}))}},"_singleton");const Ur=()=>!(typeof window>"u")&&window.innerWidth<=767;L.clock,L.history,L.history,L.eye,Ur(),Ur();ar.bookmarks,ar.marks,ar.bookmarks,ar.bookmarks,ar.bookmarks,ar.bookmarks,ar.bookmarks,ar.marks,Ur(),new class{constructor(){l(this,"pressedKeys",{}),l(this,"keyUpListener"),l(this,"keyDownListener")}handleKeydown(t){this.pressedKeys[t.key]=!0}handleKeyUp(t){this.pressedKeys[t.key]=!1}start(){this.keyDownListener=this.handleKeydown.bind(this),this.keyUpListener=this.handleKeyUp.bind(this),window.addEventListener("keydown",this.keyDownListener),window.addEventListener("keyup",this.keyUpListener)}stop(){this.keyDownListener&&window.removeEventListener("keydown",this.keyDownListener),this.keyUpListener&&window.removeEventListener("keyup",this.keyUpListener)}isKeyPressed(t){return!!this.pressedKeys[t]}};pr.FREE_TRIAL,pr.PREMIUM,pr.PREMIUM,pr.ULTIMATE,pr.ULTIMATE,pr.PREMIUM,pr.PREMIUM;S.BASIC,pr.PREMIUM,pr.PREMIUM,pr.ULTIMATE,pr.ULTIMATE,pr.ULTIMATE,dr.LIFETIME,pr.PREMIUM,dr.LIFETIME,pr.ULTIMATE,dr.ONE_YEAR,pr.ULTIMATE,dr.ONE_MONTH,pr.PREMIUM,dr.ONE_YEAR,pr.PREMIUM,dr.ONE_MONTH;var Mr=(t=>(t[t.bookmarks=ar.bookmarks]="bookmarks",t[t.marks=ar.marks]="marks",t.notes="notes",t.tag="tag",t))(Mr||{});Object.values(Mr),L.tag,L.blockquote,L["feather-edit-3"],L.globe,L.user,L.save,L.settings,L["arrow-up-circle"],L.zap,L.bell;const jr=null,$r="https://forms.gle/VQZnfwAqtEpLQGjB8",Hr={mellowtel:!1},qr=new class{constructor(t,e){l(this,"dbName","WebHighlights"),l(this,"version",1),l(this,"db"),l(this,"indexedDb"),l(this,"activeIdbRequests",new Map),l(this,"activeOpenDbRequest",null),this.fallbackStorage=t,this.indexedDb=e}getIdbRequest(t,e){const r=`${t}-${e}`,n=this.activeIdbRequests.get(r);if(n)return n;let i=null;if("getAll"===t&&(i=this.getObjectStore(e,"readonly").getAll()),this.activeIdbRequests.set(r,i),!i)return console.error(`IndexDbService: No request found for {${r}} for {${e}}`),null;const o=()=>{this.activeIdbRequests.delete(r),null==i||i.removeEventListener("success",o)},s=()=>{this.activeIdbRequests.delete(r),null==i||i.removeEventListener("error",s)};return i.addEventListener("success",o),i.addEventListener("error",s),i}clearActiveIdbRequests(){this.activeIdbRequests.clear()}async openDB(){return new Promise(((t,e)=>{const r=this.activeOpenDbRequest??this.indexedDb.open(this.dbName,this.version),n=e=>{this.db=e.target.result,this.activeOpenDbRequest=null,null==r||r.removeEventListener("success",n),t(this.db)},i=t=>{this.activeOpenDbRequest=null,null==r||r.removeEventListener("error",i),e(t.target.error)};r.addEventListener("success",n),r.addEventListener("error",i),r.onupgradeneeded=t=>{this.initObjectStores(t)}}))}initObjectStores(t){const e=t.target.result;e.objectStoreNames.contains(ar.marks)||e.createObjectStore(ar.marks,{keyPath:"_id"}),e.objectStoreNames.contains(ar.bookmarks)||e.createObjectStore(ar.bookmarks,{keyPath:"_id"}),e.objectStoreNames.contains(ar.chromesettings)||(e.createObjectStore(ar.chromesettings,{keyPath:"_id"}),this.createOrUpdateEntities({objectStoreName:ar.chromesettings,entities:[cr]}))}getObjectStore(t,e){return this.db.transaction(t,e).objectStore(t)}async getBookmarkForUrl({currentUrl:t,canonicalLink:e,asin:r}){return(await this.getAll(ar.bookmarks)).find((n=>r?function(t){return"kindle"===(null==t?void 0:t.type)}(n)&&n.asin===r:function(t,e,r){var n,i;if(!Oe(e)&&!Oe(t.url)){if(r&&t.canonicalLink)return(null==r?void 0:r.toLowerCase())===(null==(n=t.canonicalLink)?void 0:n.toLowerCase());if((null==r?void 0:r.toLowerCase())===(null==(i=t.url)?void 0:i.toLowerCase()))return!0}return function(t,e){try{if(!t||!e||"string"!=typeof t||"string"!=typeof e)return!1;if(Ge(t)){const r=Ce(t);if(null!=r&&r.startsWith("file:")){const t=decodeURIComponent(r).split("/"),n=Me(t[t.length-1],"+");return Me(decodeURIComponent(e),"+").endsWith(n)}const n=Ne(decodeURIComponent(r)),i=new RegExp(n),o=decodeURIComponent(Ce(e));return i.test(o)}if(Re(t)||Re(e))return t===e;if(Oe(t)||Oe(e))return je(t)===je(e);if(Le(t)||Le(e))return t===e;const r=Ne(decodeURIComponent(t));return new RegExp(r).test(decodeURIComponent(e))}catch(t){return console.error(t),!1}}(null==t?void 0:t.url,e)}(n,t,e)))??null}async getAllEntities(t){const[e,r,n]=await Promise.all([this.getAll(ar.marks,t),this.getAll(ar.bookmarks,t),this.getAll(ar.chromesettings,t)]);return{marks:e??[],bookmarks:r??[],chromesettings:n??[cr]}}async getAllMarks(t){const e=await this.getAll(ar.marks,t);return"function"==typeof(null==t?void 0:t.filter)?e.filter(t.filter):e}async getAllBookmarks(t){const e=await this.getAll(ar.bookmarks,t);return"function"==typeof(null==t?void 0:t.filter)?e.filter(t.filter):e}async getEntityById(t){return await this.openDB(),(await this.getAll(t._objectStore)).find((e=>e._id===t._id))??null}async getMarksForTag(t){return(await this.getAll(ar.marks)).filter((e=>e.tags.some((e=>e.toLowerCase()===t.toLowerCase()))))}async getMarksForDomain(t){return(await this.getAll(ar.marks)).filter((e=>{var r;return(null==(r=xe(e.url))?void 0:r.toLowerCase())===t.toLowerCase()}))}async getBookmarksForTag(t){const[e,r]=await Promise.all([this.getAll(ar.marks),this.getAll(ar.bookmarks)]);return ir(r.filter((e=>e.tags.some((e=>e.toLowerCase()===t.toLowerCase())))),e)}async getBookmarksForDomain(t){const[e,r]=await Promise.all([this.getAll(ar.marks),this.getAll(ar.bookmarks)]);return r.filter((e=>xe(e.url).toLowerCase()===t.toLowerCase())).map((t=>{const r=e.filter((e=>e._bookmark===t._id));return{...t,marksCount:r.length,notesCount:r.filter(nr).length}}))}async getMarksForBookmark(t){return(await this.getAll(ar.marks)).filter((e=>e._bookmark===t._id))}async getBookmarksWithCount(t){const{marks:e,bookmarks:r}=await this.getAllEntities(),n=e.map((t=>({_bookmark:t._bookmark,hasNote:nr(t)})));return r.map((t=>{const e=n.filter((e=>e._bookmark===t._id));return{...t,marksCount:e.length,notesCount:e.filter((t=>t.hasNote)).length}})).sort(((e,r)=>he(e,r,(null==t?void 0:t.sortDirection)??"asc",(null==t?void 0:t.sortType)??"createdAt"))).slice((null==t?void 0:t.from)??0,(null==t?void 0:t.limit)??1/0)}async getEntitiesThatNeedSync(){const t=await this.getAllEntities({includeMarkedAsDeleted:!0});return[...t.marks.map(Tr),...t.bookmarks.map(vr),...t.chromesettings.map(_r)].filter(kr)}async getAllTags(){const[t,e]=await Promise.all([this.getAll(ar.marks),this.getAll(ar.bookmarks)]);return We(t??[],e??[])}async getChromeSettings(){const t=await w.getJwtPayload(),e=await this.getAll(ar.chromesettings),r=e.find((e=>e._user===(null==t?void 0:t._id))),n=(()=>{if(r)return{...cr,...r};if(t)return{...cr,isFallback:!0,_user:t._id};const n=e[e.length-1];return{...cr,...n??{},_id:cr._id}})();return n.sidebarOptions.sidebarWidth||(n.sidebarOptions.sidebarWidth=cr.sidebarOptions.sidebarWidth),n.sidebarOptions.sidebarAlignment||(n.sidebarOptions.sidebarAlignment=cr.sidebarOptions.sidebarAlignment),n.sidebarOptions.sidebarBehavior||(n.sidebarOptions.sidebarBehavior=cr.sidebarOptions.sidebarBehavior),n}async updateChromeSettings(t){const e=await this.getChromeSettings(),r=await w.getJwtPayload(),n={...e,...t,updatedAt:Date.now(),_user:e._user??(null==r?void 0:r._id)};try{await this.createOrUpdateEntities({objectStoreName:ar.chromesettings,entities:[n]})}catch(t){console.error("Error while updating chrome settings",t)}return n}async getAllCount(t){const e=await this.getAll(t);return(null==e?void 0:e.length)??0}async importBackupData(t){if(!function(t){return!(null===t||"object"!=typeof t||!Array.isArray(null==t?void 0:t.bookmarks)||!Array.isArray(null==t?void 0:t.marks)||typeof t.chromeSettings>"u")}(t))throw new Error("Invalid import backup data");const e=await this.getBackupData();try{const e=function(t){const e=function(t){const e=se(t.chromeSettings);let r=t.marks.map(se);return{bookmarks:t.bookmarks.map((t=>{const e=oe();return r=r.map((r=>({...r,_bookmark:r._bookmark===t._id?e:r._bookmark}))),{...t,_id:e}})),marks:r,chromeSettings:e}}(t),r=function({marks:t,bookmarks:e,chromeSettings:r}){return{bookmarks:e.map(ae).map(ce),marks:t.map(ae).map(ce),chromeSettings:ce(ae(r))}}(e);return{bookmarks:r.bookmarks,marks:r.marks,chromeSettings:r.chromeSettings}}(t);await this.clearDatabases(),await this.writeData({bookmarks:e.bookmarks,marks:e.marks,chromesettings:[e.chromeSettings]})}catch{C({content:"Something went wrong, restoring old data...",variant:"error",uniqueId:"general-error"}),await this.writeData({bookmarks:e.bookmarks,marks:e.marks,chromesettings:[e.chromeSettings]})}}async writeData(t){return Promise.allSettled([this.createOrUpdateEntities({objectStoreName:ar.marks,entities:t.marks}),this.createOrUpdateEntities({objectStoreName:ar.bookmarks,entities:t.bookmarks}),this.createOrUpdateEntities({objectStoreName:ar.chromesettings,entities:t.chromesettings})])}async getAllOrigins(){return function(t){const e=t.map((t=>xe(t.url))).filter(Boolean).flat(1);return[...new Set(e)].map((t=>Ve(t,e))).sort(de)}(await this.getAll(ar.bookmarks)??[])}async getBookmark(t){return this.getEntityById({_id:t._id,_objectStore:ar.bookmarks})}async getAll(t,e){return await this.openDB(),new Promise(((r,n)=>{const i=t=>!(null==e||!e.includeMarkedAsDeleted)||!t.deletedAt,o=this.getIdbRequest("getAll",t);if(!o)return n();const s=t=>{null==o||o.removeEventListener("success",s);const e=t.target.result;r(e.filter(i))},a=()=>{n(),null==o||o.removeEventListener("error",a)};o.addEventListener("success",s),o.addEventListener("error",a)}))}async createOrUpdateEntities({objectStoreName:t,entities:e}){return await this.openDB(),new Promise(((r,n)=>{const i=this.db.transaction([t],"readwrite"),o=i.objectStore(t);null==e||e.forEach((t=>o.put(t))),i.oncomplete=()=>{this.clearActiveIdbRequests(),r()},i.onerror=t=>{this.clearActiveIdbRequests(),n(t.target.error)}}))}async markEntitiesAsDeleted({objectStoreName:t,entities:e}){return await this.openDB(),new Promise(((r,n)=>{const i=this.db.transaction([t],"readwrite"),o=i.objectStore(t);null==e||e.map((t=>{const e=o.get(t._id);e.onsuccess=()=>{this.clearActiveIdbRequests();const r=e.result;if(null!=r&&r.lastSync){const t={...r,deletedAt:Date.now()};o.put(t)}else o.delete(t._id)}})),i.oncomplete=()=>{this.clearActiveIdbRequests(),r()},i.onerror=t=>{this.clearActiveIdbRequests(),n(t.target.error)}}))}async deleteEntities({objectStoreName:t,entities:e}){return await this.openDB(),new Promise(((r,n)=>{const i=this.db.transaction([t],"readwrite"),o=i.objectStore(t);null==e||e.forEach((t=>{o.delete(t._id)})),i.oncomplete=()=>{this.clearActiveIdbRequests(),r()},i.onerror=t=>{this.clearActiveIdbRequests(),n(t.target.error)}}))}async clearDatabases(){try{return await this.openDB(),new Promise(((t,e)=>{const r=this.db.transaction([ar.marks,ar.bookmarks,ar.chromesettings],"readwrite"),n=r.objectStore(ar.marks),i=r.objectStore(ar.bookmarks),o=r.objectStore(ar.chromesettings);n.clear(),i.clear(),o.clear(),r.oncomplete=()=>{this.clearActiveIdbRequests(),t()},r.onerror=t=>{this.clearActiveIdbRequests(),e(t.target.error)}}))}catch{console.error("Error while clearing database")}}async getBackupData(){const[t,e,r]=await Promise.all([this.getAll(ar.marks),this.getAll(ar.bookmarks),this.getAll(ar.chromesettings)]);return{marks:t,bookmarks:e,chromeSettings:r[0]||cr}}async getEntitiesForSearchValue({searchValue:t}){t=t.toLowerCase();const e=e=>e.tags.some((e=>e.toLowerCase().includes(t))),[r,n]=await Promise.all([this.getAll(ar.marks),this.getAll(ar.bookmarks)]),i=We(r,n),o=(t,e)=>he(t,e,"asc","createdAt"),s=r.sort(o).filter((r=>{var n,i,o;return(null==(n=null==r?void 0:r.title)?void 0:n.toLowerCase().includes(t))||(null==(i=null==r?void 0:r.text)?void 0:i.toLowerCase().includes(t))||(null==(o=null==r?void 0:r.url)?void 0:o.toLowerCase().includes(t))||e(r)})),a=n.sort(o).filter((r=>{var n,i;return(null==(n=null==r?void 0:r.title)?void 0:n.toLowerCase().includes(t))||(null==(i=null==r?void 0:r.url)?void 0:i.toLowerCase().includes(t))||e(r)})),c=r.filter((e=>{var r;return nr(e)&&(null==(r=e.notes)?void 0:r.toLowerCase().includes(t))})),u=function({allTags:t,searchValue:e,existingTags:r}){if(!Array.isArray(t))return[];const n=t.filter((t=>!(null!=r&&r.some((e=>e.toLowerCase()===t.name.toLowerCase())))));if("string"!=typeof e||null==e||!e.length)return n.sort(ge);const i=e.toLowerCase();return n.filter((t=>t.name.toLowerCase().includes(i))).map((t=>{const r=function(t,e){if(t.toLowerCase()===e.toLowerCase())return 100;if(t.toLowerCase().startsWith(e.toLowerCase()))return 90;if(t.toLowerCase().includes(e.toLowerCase()))return 70;const r=function(t,e){const r=[];if(0===t.length)return e.length;if(0===e.length)return t.length;for(let t=0;t<=e.length;t++)r[t]=[t];for(let e=0;e<=t.length;e++)r[0][e]=e;for(let n=1;n<=e.length;n++)for(let i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,r[n][i-1]+1,r[n-1][i]+1);return r[e.length][t.length]}(t.toLowerCase(),e.toLowerCase());return Math.max(50-r,0)}(t.name,e),n=t.count>=5?5:t.count%5;return{...t,matchScore:r+n}})).sort(me)}({allTags:i,searchValue:t});return{marks:s,bookmarks:ir(a,r),tags:u,marksWithNotes:c}}async getLastHighlightedMark(){return(await this.getAll(ar.marks)).sort(((t,e)=>e.createdAt-t.createdAt))[0]||null}async getLearningStatus(){return function(t){var e,r,n,i,o;let s=0,a=0,c=0,u=0,l=0,h=0;for(const f of t)try{if(!f.learningItem){h++;continue}if(null!=(e=f.learningItem)&&e.lastLearned&&E(new Date((null==(r=f.learningItem)?void 0:r.lastLearned)??0))&&s++,null!=(n=f.learningItem)&&n.lastLearned&&E(new Date((null==(i=f.learningItem)?void 0:i.lastLearned)??0),{todayOffset:-1})&&a++,null!=(o=f.learningItem)&&o.disableLearning){c++;continue}f.learningItem&&Fe(f)&&u++,f.learningItem.nextReviewInMillis&&E(new Date(f.learningItem.nextReviewInMillis),{todayOffset:1})&&l++,f.learningItem&&Fe(f)}catch(t){console.error(t)}return{learntTodayCount:s,dueCount:u,unlearnedCount:h,disabledCount:c,learntYesterdayCount:a,dueTomorrowCount:l,marksToLearnCount:u+h}}(await this.getAll(ar.marks))}}({marks:[],bookmarks:[],chromesettings:[]},indexedDB);var Fr=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};function Vr(){chrome.commands.getAll().then((t=>{var e,r,n,i,o,s;const a=null!==(n=null===(r=null!==(e=t.find((t=>"highlight-text"===t.name)))&&void 0!==e?e:null)||void 0===r?void 0:r.shortcut)&&void 0!==n?n:h,c=null!==(s=null===(o=null!==(i=t.find((t=>"toggle-bookmark"===t.name)))&&void 0!==i?i:null)||void 0===o?void 0:o.shortcut)&&void 0!==s?s:h;chrome.contextMenus.removeAll(),chrome.contextMenus.create({id:or.CONTEXT_MENU_SAVE_TEXT,title:"Highlight selected text "+(a?`[${a}]`:""),contexts:["selection"]}),chrome.contextMenus.create({id:or.CONTEXT_MENU_SAVE_BOOKMARK,title:"Save page as bookmark "+(c?`[${c}]`:""),contexts:["page"]}),chrome.contextMenus.create({id:or.CONTEXT_MENU_SAVE_IMAGE,title:"Save image",contexts:["image"]})}))}function Wr(t){Kr(function(t){return`${ye()?"moz-extension":"chrome-extension"}://${(()=>{var t,e;return typeof chrome>"u"?k.EXTENSION_ID:ye()?(null==(t=null==chrome?void 0:chrome.i18n)?void 0:t.getMessage("@@extension_id"))??k.EXTENSION_ID:(null==(e=null==chrome?void 0:chrome.runtime)?void 0:e.id)??k.EXTENSION_ID})()}/viewer.html?file=${encodeURIComponent(t)}`}(t))}function Kr(t){try{chrome.tabs.update({url:t})}catch(t){console.warn(t)}}function zr(t){qr.getChromeSettings().then((e=>Fr(this,void 0,void 0,(function*(){if(t.url&&t.id){const r=function(t,e){return function(t,e){return[...e,...ke].some((e=>function(t,e){try{const r=e.endsWith("/*");return e=`^(?:www.|(?:http|https|ftp|ftps|chrome|file|)://(?:www.|))${e}`,r||(e=`${e}(?:$|/$)`),RegExp(e).test(t)}catch{return!1}}(t,e)))||Ue(t)}(t,e)}(t.url,e.blacklistedUrls);try{yield function(t,e,r){return Fr(this,void 0,void 0,(function*(){const n=Pe(r),i={text:"Off",color:"#252934"},o={text:"PDF",color:"#d8261c"},s=t?i.text:n?o.text:"",a=t?i.color:n?o.color:"";return Promise.all([Yr(e,t),Jr(e,s),Xr(e,a)])}))}(r,t.id,t.url)}catch(t){console.warn(t)}}}))))}function Yr(t,e){return Fr(this,void 0,void 0,(function*(){chrome.action.setIcon({path:`../../../../assets/marker-icon${e?"-disabled":""}.png`,tabId:t})}))}function Jr(t,e){return Fr(this,void 0,void 0,(function*(){e&&(yield chrome.action.setBadgeText({text:e,tabId:t}))}))}function Xr(t,e){return Fr(this,void 0,void 0,(function*(){e&&(yield chrome.action.setBadgeBackgroundColor({color:e,tabId:t}))}))}var Zr=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const Qr=class{constructor(t,e){}getOptInStatus(){return Zr(this,void 0,void 0,(function*(){return!1}))}initContentScript(){return Zr(this,void 0,void 0,(function*(){}))}initBackground(t,e){return Zr(this,void 0,void 0,(function*(){}))}generateSettingsLink(){return Zr(this,void 0,void 0,(function*(){return""}))}openUserSettingsInPopupWindow(){return Zr(this,void 0,void 0,(function*(){return!0}))}optIn(){return Zr(this,void 0,void 0,(function*(){return!0}))}optOut(){return Zr(this,void 0,void 0,(function*(){return!0}))}start(){return Zr(this,void 0,void 0,(function*(){return!0}))}stop(){return Zr(this,void 0,void 0,(function*(){return!0}))}},tn=k;var en=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};const rn=new class{constructor(t,e){this.configKey=t,this.config=e,Hr.mellowtel&&(this.mellowtel=new Qr(this.configKey,this.config))}get isEnabled(){return tn.production&&Hr.mellowtel}checkDialogVisibility(){return en(this,void 0,void 0,(function*(){var t;if(!this.mellowtel)return!1;const e=null!==(t=yield fr.getValue("mellowtelDialogShownAtInMillis"))&&void 0!==t?t:0;return!(yield this.mellowtel.getOptInStatus())&&!e}))}activate(){return en(this,void 0,void 0,(function*(){this.mellowtel&&((yield this.getOptInStatus())||(yield this.mellowtel.optIn(),yield this.mellowtel.start()))}))}deactivate(){return en(this,void 0,void 0,(function*(){this.mellowtel&&((yield this.getOptInStatus())||(yield this.mellowtel.optOut(),yield this.mellowtel.stop()))}))}getOptInStatus(){return en(this,void 0,void 0,(function*(){return!!this.mellowtel&&this.mellowtel.getOptInStatus()}))}initContentScript(){return en(this,void 0,void 0,(function*(){if(this.mellowtel)return this.mellowtel.initContentScript()}))}initBackground(t,e){return en(this,void 0,void 0,(function*(){if(this.mellowtel)return this.mellowtel.initBackground(t,e)}))}generateSettingsLink(){return en(this,void 0,void 0,(function*(){return this.mellowtel?this.mellowtel.generateSettingsLink():""}))}openUserSettingsInPopupWindow(){return en(this,void 0,void 0,(function*(){return!!this.mellowtel&&this.mellowtel.openUserSettingsInPopupWindow()}))}optIn(){return en(this,void 0,void 0,(function*(){return!!this.mellowtel&&this.mellowtel.optIn()}))}optOut(){return en(this,void 0,void 0,(function*(){return!!this.mellowtel&&this.mellowtel.optOut()}))}start(){return en(this,void 0,void 0,(function*(){return!!this.mellowtel&&this.mellowtel.start()}))}stop(){return en(this,void 0,void 0,(function*(){return!!this.mellowtel&&this.mellowtel.stop()}))}}("e42844f8",{disableLogs:!0,MAX_DAILY_RATE:500});chrome.runtime.onInstalled.addListener((t=>{chrome.runtime.setUninstallURL(Math.random()<.9?"https://tooltivity.com?ref=web-highlights":$r)})),function(){var t,e,r,n;t=this,e=void 0,n=function*(){try{yield rn.initBackground(!0)}catch(t){console.error(`init background failed: ${String(t)}`)}},new((r=void 0)||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))}(),function(){chrome.contextMenus.onClicked.addListener((t=>{return e=this,r=void 0,i=function*(){chrome.tabs.query({active:!0,currentWindow:!0},(e=>{t.menuItemId,or[t.menuItemId]&&d.sendMessage({id:t.menuItemId,detail:t})}))},new((n=void 0)||(n=Promise))((function(t,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(s,a)}c((i=i.apply(e,r||[])).next())}));var e,r,n,i}))}(),chrome.action.onClicked.addListener((t=>{t.url&&function(t){return t&&"string"==typeof t&&!(null==t||!t.length)&&Pe(t)&&!Be(t)}(t.url)&&Wr(t.url),d.sendMessage({id:"browserActionClicked"})})),(()=>{var t,e;"undefined"!=typeof chrome&&(null===(e=null===(t=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===t?void 0:t.onMessage)||void 0===e||e.addListener(((t,e,r)=>{if(sr(t,"navigateToPdfViewer")&&Wr(t.detail),sr(t,"navigateToFromBackground")&&"string"==typeof t.detail&&Kr(t.detail),sr(t,"backgroundIndexDbQuery")){const e=t.detail;g(qr,e)&&qr[e.method](e.payload).catch(console.error)}if(sr(t,"setBadge")){const{text:e,backgroundColor:r}=t.detail;"string"==typeof e&&"string"==typeof r&&chrome.tabs.query({currentWindow:!0,active:!0},(function(t){var n;const i=null===(n=t[0])||void 0===n?void 0:n.id;i&&(chrome.action.setBadgeText({text:e,tabId:i}),r&&chrome.action.setBadgeBackgroundColor({color:r,tabId:i}))}))}r()})),chrome.runtime.onConnect.addListener((t=>{!function(t){const{name:e}=t;if(function(t){return"string"==typeof t&&Object.values(p).includes(t)}(e))return void function(t,e){t===p.COMMANDS&&chrome.commands.getAll().then((t=>{e.postMessage(t.filter((t=>!!t.description)).map((t=>Object.assign(Object.assign({},t),{shortcut:t.shortcut||h}))))}))}(e,t);const r=function(t){try{return JSON.parse(t)}catch{return null}}(e);g(qr,r)&&qr[r.method](r.payload).then((e=>{t.postMessage(e)}))}(t)})),chrome.runtime.onInstalled.addListener((t=>{return e=void 0,r=void 0,i=function*(){"install"===t.reason&&chrome.tabs.create({url:jr||"https://web-highlights.com/blog/welcome?ref=install",active:!0}),Vr()},new((n=void 0)||(n=Promise))((function(t,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(s,a)}c((i=i.apply(e,r||[])).next())}));var e,r,n,i})))})(),chrome.tabs.onActivated.addListener((t=>{chrome.tabs.query({currentWindow:!0,active:!0},(function(t){zr(t[0])}))})),chrome.tabs.onUpdated.addListener((function(t,e,r){Vr(),zr(r)})),chrome.commands.onCommand.addListener((t=>{d.sendMessage({id:"keyboardShortcut",detail:t})}))})(),{}})()));